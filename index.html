<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Maine Farm Stand Finder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body class="bg-[#ffffff] antialiased">
    <div id="fb-root"></div>

    <div id="app-container" class="h-screen flex flex-col"> <header class="bg-[#e8dcc3] shadow-md z-30 print:hidden">
        <div
          class="flex flex-col sm:flex-row justify-start items-center sm:items-stretch gap-3 sm:gap-4 h-full w-full"
        >
          <div class="flex items-center gap-2 self-center sm:self-stretch py-1">
            <img
              src="images/flag.png"
              alt="Maine Flag"
              class="h-8 sm:h-full w-auto object-contain"
            />
            <h1
              class="text-xl sm:text-2xl font-bold whitespace-nowrap"
              style="color: #1b4a7b"
            >
              Farm Stand Finder
            </h1>
          </div>

          <div class="flex items-center w-full sm:w-auto sm:max-w-md flex-grow">
            <input
              type="text"
              id="searchInput"
              placeholder="enter starting location..."
              class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 w-full text-sm h-10"
            />
          </div>

          <div
            class="flex flex-col sm:flex-row items-center w-full sm:w-auto gap-3 sm:gap-4"
          >
            <label
              for="radiusSlider"
              class="text-xs sm:text-sm font-medium"
              style="color: #3c4043"
              >Radius:</label
            >
            <input
              type="range"
              id="radiusSlider"
              name="radius"
              min="10"
              max="100"
              value="30"
              step="5"
              class="w-24 sm:w-32 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-red-600"
            />
            <span
              id="radiusValue"
              class="text-sm font-semibold w-10 text-right"
              style="color: #c53030"
              >30 mi</span
            >
          </div>
        </div>
      </header>

      <main class="flex flex-grow relative">
        <div
          id="detailsOverlaySocial"
          class="detail-pop-overlay detail-pop-overlay-social custom-scrollbar hidden flex flex-col" /* Added flex flex-col */
        >
          <button id="closeDetailsOverlaySocialButton" class="overlay-close-button">
              <svg class="w-6 h-6 sm:w-7 sm:h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
          </button>
          <div class="pt-10 sm:pt-12 shrink-0">
            <div class="mb-4 border-b border-gray-200">
              <nav id="socialOverlayTabs" class="flex flex-wrap -mb-px" aria-label="Tabs">
                <button data-tab-target="social-photos-panel" class="social-tab-button group inline-flex items-center py-3 px-1 sm:px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap">
                  <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                  
                </button>
                <button data-tab-target="social-reviews-panel" class="social-tab-button group inline-flex items-center py-3 px-1 sm:px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap">
                  <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg>
                  
                </button>                
                 <button data-tab-target="social-facebook-panel" class="social-tab-button group inline-flex items-center py-3 px-1 sm:px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap">
                  <svg class="w-4 h-4 mr-1 text-blue-600" viewBox="0 0 24 24" fill="currentColor"> <path d="M22.676 0H1.324C.593 0 0 .593 0 1.324v21.352C0 23.407.593 24 1.324 24h11.494v-9.294H9.689v-3.621h3.129V8.41c0-3.1 1.893-4.785 4.659-4.785 1.325 0 2.463.099 2.795.142v3.24h-1.92c-1.505 0-1.796.716-1.796 1.765v2.312h3.584l-.467 3.622h-3.116V24h6.116C23.407 24 24 23.407 24 22.676V1.324C24 .593 23.407 0 22.676 0z"></path></svg>
                  
                </button>
                <button data-tab-target="social-instagram-panel" class="social-tab-button group inline-flex items-center py-3 px-1 sm:px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap">
                    <svg class="w-4 h-4 mr-1 text-pink-600" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 1.272.058 2.166.293 2.913.595a4.877 4.877 0 011.76 1.177c.642.641.997 1.378 1.177 2.125.302.747.537 1.64.595 2.912.058 1.266.07 1.646.07 4.85s-.012 3.584-.07 4.85c-.058 1.272-.293 2.166-.595 2.913a4.877 4.877 0 01-1.177 1.76c-.641.642-1.378.997-2.125 1.177-.747.302-1.64.537-2.912.595-1.266.058-1.646.07-4.85.07s-3.584-.012-4.85-.07c-1.272-.058-2.166.293-2.913-.595a4.877 4.877 0 01-1.76-1.177c-.642-.641-.997-1.378-1.177 2.125-.302-.747-.537 1.64-.595-2.912-.058-1.266-.07-1.646-.07-4.85s.012-3.584.07-4.85c.058-1.272.293 2.166.595 2.913a4.877 4.877 0 011.177-1.76c.641-.642 1.378.997 2.125 1.177.747.302 1.64.537 2.912.595L7.15 2.233C8.416 2.175 8.796 2.163 12 2.163zm0 1.802c-3.075 0-3.444.012-4.642.068-1.18.053-1.847.28-2.377.48-.575.222-1.018.567-1.465 1.015-.447.447-.793.89-1.015 1.464-.2.53-.427 1.197-.48 2.378C2.024 8.556 2.012 8.925 2.012 12s.012 3.444.068 4.642c.053 1.18.28 1.847.48 2.377.222.575.567 1.018 1.015 1.465.447.447.89.793 1.464 1.015.53.2 1.197.427 2.378.48 1.198.056 1.567.068 4.642.068s3.444-.012 4.642-.068c1.18-.053 1.847.28 2.377-.48.575.222 1.018.567 1.465 1.015.447.447.793-.89 1.015 1.464.2-.53.427-1.197-.48-2.378.056-1.198.068-1.567.068-4.642s-.012-3.444-.068-4.642c-.053-1.18-.28-1.847-.48-2.377-.222-.575-.567-1.018-1.015-1.465-.447-.447-.793-.89-1.015-1.464-.53-.2-1.197-.427-2.378-.48C15.444 3.977 15.075 3.965 12 3.965zM12 7.198a4.802 4.802 0 100 9.604 4.802 4.802 0 000-9.604zm0 7.994a3.192 3.192 0 110-6.384 3.192 3.192 0 010 6.384zm6.385-7.852a1.145 1.145 0 100-2.29 1.145 1.145 0 000 2.29z"></path></svg>
                  
                </button>
                <button data-tab-target="social-twitter-panel" class="social-tab-button group inline-flex items-center py-3 px-1 sm:px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap">
                  <svg class="w-4 h-4 mr-1 text-blue-400" viewBox="0 0 24 24" fill="currentColor"> <path d="M23.643 4.937c-.835.37-1.732.62-2.675.733a4.67 4.67 0 0 0 2.048-2.578a9.3 9.3 0 0 1-2.958 1.13a4.66 4.66 0 0 0-7.938 4.25a13.229 13.229 0 0 1-9.602-4.868a4.662 4.662 0 0 0 1.444 6.216a4.613 4.613 0 0 1-2.11-.583v.06a4.656 4.656 0 0 0 3.737 4.567a4.615 4.615 0 0 1-2.105.08a4.662 4.662 0 0 0 4.351 3.234a9.368 9.368 0 0 1-5.786 1.995a9.5 9.5 0 0 1-1.112-.065a13.177 13.177 0 0 0 7.14 2.094c8.567 0 13.255-7.098 13.255-13.254c0-.203-.005-.405-.014-.606a9.46 9.46 0 0 0 2.323-2.41z"></path></svg>
                  
                </button>
                <button data-tab-target="social-directions-panel" class="social-tab-button group inline-flex items-center py-3 px-1 sm:px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap">
                   <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
                  
                </button>
              </nav>
            </div>
          </div>

          <!-- Tab Content Panels - This div will grow -->
          <div class="flex-grow overflow-y-auto custom-scrollbar">
            <div id="social-photos-panel" class="social-tab-content social-feed-section flex flex-col h-full">
                <h3 class="text-lg font-medium text-gray-700 mb-2 shrink-0">Photos from Google</h3>
                <div id="socialOverlayGooglePhotosContainer" class="flex-grow overflow-y-auto custom-scrollbar"> 
                    <p class="text-sm text-gray-500 p-4 col-span-full text-center">Loading Google Photos...</p>
                </div>
            </div>
            <div id="social-reviews-panel" class="social-tab-content social-feed-section hidden flex flex-col h-full">
                <h3 class="text-lg font-medium text-gray-700 mb-2 shrink-0">Google Reviews</h3>
                <div id="socialOverlayReviewsContainer" class="flex-grow overflow-y-auto custom-scrollbar pr-1">
                    <p class="text-sm text-gray-500 p-4 text-center">Loading reviews...</p>
                </div>
            </div>
            <div id="social-facebook-panel" class="social-tab-content social-feed-section hidden flex flex-col h-full">
              <div id="socialLinksContainer" class="social-feed-content bg-white rounded-lg shadow-sm overflow-hidden flex-grow"> 
                <p class="text-sm text-gray-500 p-4">Loading Facebook feed...</p>
              </div>
            </div>
            <div id="social-instagram-panel" class="social-tab-content social-feed-section hidden flex flex-col h-full">
              <div id="instagramFeedContainer" class="social-feed-content bg-white rounded-lg shadow-sm overflow-hidden p-4 flex-grow">
                <p class="text-sm text-gray-500">Instagram content will load here.</p>
              </div>
            </div>
            <div id="social-twitter-panel" class="social-tab-content social-feed-section hidden flex flex-col h-full">
              <div id="twitterTimelineContainer" class="social-feed-content bg-white rounded-lg shadow-sm overflow-hidden flex-grow">
                <p class="text-sm text-gray-500 p-4">Loading Twitter feed...</p>
              </div>
            </div>
            <div id="social-directions-panel" class="social-tab-content hidden">
              <p class="text-sm text-gray-500 p-4">Directions for this shop are available in the other panel (shop details).</p>
            </div>
          </div>
        </div>

        <section id="mapPanel" class="flex-grow"><div id="map" class="w-full h-full"></div></section>

        <section
          id="listingsPanel"
          class="w-full md:w-2/5 lg:w-1/3 p-3 sm:p-4 overflow-y-auto custom-scrollbar bg-[#ffffff] shrink-0" /* shrink-0 so it doesn't grow */
        >
          <div
            id="listingsContainer"
            class="grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4"
          >
            <p class="text-center text-gray-700 p-4 col-span-1 md:col-span-2">
              Loading Farm Stands...
            </p>
          </div>
          <div
            id="noResults"
            class="hidden text-center text-gray-600 mt-10 p-4"
          ></div>
        </section>

        
        <div
          id="detailsOverlayShop"
          class="detail-pop-overlay custom-scrollbar hidden flex flex-col" /* Added flex flex-col */
        >          
          <div id="shopDetailsContent" class="flex-grow overflow-y-auto custom-scrollbar pt-6 sm:pt-8">
            <div id="shopImageGallery" class="mb-4 shrink-0">
              <p class="text-sm text-gray-500 text-center p-4 col-span-full">Loading listing photos...</p>
            </div>

            <!-- ========= NEW SECTION FOR PRODUCT ICONS ========= -->
            <div class="product-icons-section mb-4 shrink-0">
                <h3 class="text-lg font-semibold text-gray-700 mb-2 px-1">Products Available</h3>
                <div id="shopProductIconsContainer">
                    <p class="text-sm text-gray-500 text-center p-2">Loading product icons...</p>
                </div>
            </div>
            <!-- ========= END NEW SECTION ========= -->
            

                        <!-- ========= NEW SECTION FOR OPENING HOURS ========= -->
            <div class="opening-hours-section mb-4 border-t border-b border-gray-200 py-3 shrink-0">
                <h3 class="text-lg font-semibold text-gray-700 mb-2 px-1">Hours of Operation</h3>
                <div id="shopOpeningHoursContainer" class="px-1">
                    <p class="text-sm text-gray-500 text-center p-2">Loading hours...</p>
                </div>
            </div>
            <!-- ========= END NEW SECTION ========= -->

            
          </div>
        </div>
      </main>
    </div>

    
    <script src="config.js"></script>
    <script src="utils.js"></script>
    <script src="apiService.js"></script>
    <script src="uiLogic.js"></script>
    <script src="mapLogic.js"></script>
    <script src="main.js"></script>
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" 
            src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v20.0"></script>



    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCRGp81QHEPMm5l08QK3f2xrxtRBAWLpBY&callback=initAppMap&libraries=places,geometry&v=weekly"></script>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <script async src="https://www.instagram.com/embed.js"></script>
  </body>
</html>