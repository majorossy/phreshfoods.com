import{b as o}from"./react-vendor-CH-h0uFD.js";const E=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(", ");function p({isActive:u,onClose:f,containerRef:r,initialFocusRef:n,restoreFocus:m=!0}){const s=o.useRef(null),c=o.useCallback(()=>r.current?Array.from(r.current.querySelectorAll(E)).filter(t=>t.offsetParent!==null&&!t.hasAttribute("inert")):[],[r]);o.useEffect(()=>{if(!u)return;const t=e=>{if(e.key==="Escape"&&f){e.preventDefault(),e.stopPropagation(),f();return}if(e.key==="Tab"){const l=c();if(l.length===0)return;const a=l[0],d=l[l.length-1];e.shiftKey&&document.activeElement===a?(e.preventDefault(),d.focus()):(!e.shiftKey&&document.activeElement===d||r.current&&!r.current.contains(document.activeElement))&&(e.preventDefault(),a.focus())}};return document.addEventListener("keydown",t,!0),()=>{document.removeEventListener("keydown",t,!0)}},[u,f,r,c]),o.useEffect(()=>{if(u){s.current=document.activeElement;const t=setTimeout(()=>{if(n!=null&&n.current)n.current.focus();else{const e=c();e.length>0&&e[0].focus()}},0);return()=>clearTimeout(t)}else m&&s.current&&(s.current.focus(),s.current=null)},[u,n,m,c])}export{p as u};
