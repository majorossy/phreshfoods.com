const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MapComponent-TLIGZRhe.js","assets/react-vendor-CH-h0uFD.js","assets/MapSearchControls-BBiISNAr.js","assets/MapSearchControls-DVCZV7or.css","assets/CardListings-BxrVIXDs.js","assets/StarRating-BU65rjwo.js","assets/index-CQL8DPBT.js","assets/MobileBottomSheet-CFqLZWtB.js","assets/ShopDetails-BkVS_MFO.js","assets/useFocusTrap-Byck7F-r.js","assets/ShopSocials-rXllifo-.js"])))=>i.map(i=>d[i]);
var Gs=Object.defineProperty;var zs=(e,r,s)=>r in e?Gs(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s;var ee=(e,r,s)=>zs(e,typeof r!="symbol"?r+"":r,s);import{r as qs,a as Ws,g as Ys,b as i,u as dr,c as Ks,d as ur,e as mr,R as z,L as Js,f as Xs,h as $,N as le,B as Zs}from"./react-vendor-CH-h0uFD.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(n){if(n.ep)return;n.ep=!0;const c=s(n);fetch(n.href,c)}})();var Qe={exports:{}},Le={},Ar;function Qs(){if(Ar)return Le;Ar=1;/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */return function(){var e=qs(),r=Symbol.for("react.element"),s=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),E=Symbol.iterator,x="@@iterator";function _(a){if(a===null||typeof a!="object")return null;var h=E&&a[E]||a[x];return typeof h=="function"?h:null}var S=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function w(a){{for(var h=arguments.length,N=new Array(h>1?h-1:0),k=1;k<h;k++)N[k-1]=arguments[k];P("error",a,N)}}function P(a,h,N){{var k=S.ReactDebugCurrentFrame,M=k.getStackAddendum();M!==""&&(h+="%s",N=N.concat([M]));var B=N.map(function(V){return String(V)});B.unshift("Warning: "+h),Function.prototype.apply.call(console[a],console,B)}}var b=!1,F=!1,I=!1,A=!1,L=!1,j;j=Symbol.for("react.module.reference");function D(a){return!!(typeof a=="string"||typeof a=="function"||a===t||a===c||L||a===n||a===m||a===p||A||a===y||b||F||I||typeof a=="object"&&a!==null&&(a.$$typeof===v||a.$$typeof===d||a.$$typeof===l||a.$$typeof===u||a.$$typeof===f||a.$$typeof===j||a.getModuleId!==void 0))}function g(a,h,N){var k=a.displayName;if(k)return k;var M=h.displayName||h.name||"";return M!==""?N+"("+M+")":N}function R(a){return a.displayName||"Context"}function T(a){if(a==null)return null;if(typeof a.tag=="number"&&w("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case t:return"Fragment";case s:return"Portal";case c:return"Profiler";case n:return"StrictMode";case m:return"Suspense";case p:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case u:var h=a;return R(h)+".Consumer";case l:var N=a;return R(N._context)+".Provider";case f:return g(a,a.render,"ForwardRef");case d:var k=a.displayName||null;return k!==null?k:T(a.type)||"Memo";case v:{var M=a,B=M._payload,V=M._init;try{return T(V(B))}catch{return null}}}return null}var U=Object.assign,C=0,G,H,J,W,Q,he,fe;function pe(){}pe.__reactDisabledLog=!0;function be(){{if(C===0){G=console.log,H=console.info,J=console.warn,W=console.error,Q=console.group,he=console.groupCollapsed,fe=console.groupEnd;var a={configurable:!0,enumerable:!0,value:pe,writable:!0};Object.defineProperties(console,{info:a,log:a,warn:a,error:a,group:a,groupCollapsed:a,groupEnd:a})}C++}}function de(){{if(C--,C===0){var a={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:U({},a,{value:G}),info:U({},a,{value:H}),warn:U({},a,{value:J}),error:U({},a,{value:W}),group:U({},a,{value:Q}),groupCollapsed:U({},a,{value:he}),groupEnd:U({},a,{value:fe})})}C<0&&w("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ae=S.ReactCurrentDispatcher,oe;function K(a,h,N){{if(oe===void 0)try{throw Error()}catch(M){var k=M.stack.trim().match(/\n( *(at )?)/);oe=k&&k[1]||""}return`
`+oe+a}}var ce=!1,ve;{var Ns=typeof WeakMap=="function"?WeakMap:Map;ve=new Ns}function br(a,h){if(!a||ce)return"";{var N=ve.get(a);if(N!==void 0)return N}var k;ce=!0;var M=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var B;B=ae.current,ae.current=null,be();try{if(h){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(Z){k=Z}Reflect.construct(a,[],V)}else{try{V.call()}catch(Z){k=Z}a.call(V.prototype)}}else{try{throw Error()}catch(Z){k=Z}a()}}catch(Z){if(Z&&k&&typeof Z.stack=="string"){for(var O=Z.stack.split(`
`),X=k.stack.split(`
`),q=O.length-1,Y=X.length-1;q>=1&&Y>=0&&O[q]!==X[Y];)Y--;for(;q>=1&&Y>=0;q--,Y--)if(O[q]!==X[Y]){if(q!==1||Y!==1)do if(q--,Y--,Y<0||O[q]!==X[Y]){var re=`
`+O[q].replace(" at new "," at ");return a.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",a.displayName)),typeof a=="function"&&ve.set(a,re),re}while(q>=1&&Y>=0);break}}}finally{ce=!1,ae.current=B,de(),Error.prepareStackTrace=M}var je=a?a.displayName||a.name:"",ge=je?K(je):"";return typeof a=="function"&&ve.set(a,ge),ge}function xs(a,h,N){return br(a,!1)}function _s(a){var h=a.prototype;return!!(h&&h.isReactComponent)}function Ce(a,h,N){if(a==null)return"";if(typeof a=="function")return br(a,_s(a));if(typeof a=="string")return K(a);switch(a){case m:return K("Suspense");case p:return K("SuspenseList")}if(typeof a=="object")switch(a.$$typeof){case f:return xs(a.render);case d:return Ce(a.type,h,N);case v:{var k=a,M=k._payload,B=k._init;try{return Ce(B(M),h,N)}catch{}}}return""}var we=Object.prototype.hasOwnProperty,vr={},yr=S.ReactDebugCurrentFrame;function Re(a){if(a){var h=a._owner,N=Ce(a.type,a._source,h?h.type:null);yr.setExtraStackFrame(N)}else yr.setExtraStackFrame(null)}function Es(a,h,N,k,M){{var B=Function.call.bind(we);for(var V in a)if(B(a,V)){var O=void 0;try{if(typeof a[V]!="function"){var X=Error((k||"React class")+": "+N+" type `"+V+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof a[V]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw X.name="Invariant Violation",X}O=a[V](h,V,k,N,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(q){O=q}O&&!(O instanceof Error)&&(Re(M),w("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",k||"React class",N,V,typeof O),Re(null)),O instanceof Error&&!(O.message in vr)&&(vr[O.message]=!0,Re(M),w("Failed %s type: %s",N,O.message),Re(null))}}}var Fs=Array.isArray;function We(a){return Fs(a)}function ws(a){{var h=typeof Symbol=="function"&&Symbol.toStringTag,N=h&&a[Symbol.toStringTag]||a.constructor.name||"Object";return N}}function Ps(a){try{return jr(a),!1}catch{return!0}}function jr(a){return""+a}function Nr(a){if(Ps(a))return w("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",ws(a)),jr(a)}var Pe=S.ReactCurrentOwner,Ds={key:!0,ref:!0,__self:!0,__source:!0},xr,_r,Ye;Ye={};function Ss(a){if(we.call(a,"ref")){var h=Object.getOwnPropertyDescriptor(a,"ref").get;if(h&&h.isReactWarning)return!1}return a.ref!==void 0}function As(a){if(we.call(a,"key")){var h=Object.getOwnPropertyDescriptor(a,"key").get;if(h&&h.isReactWarning)return!1}return a.key!==void 0}function Ts(a,h){if(typeof a.ref=="string"&&Pe.current&&h&&Pe.current.stateNode!==h){var N=T(Pe.current.type);Ye[N]||(w('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',T(Pe.current.type),a.ref),Ye[N]=!0)}}function Us(a,h){{var N=function(){xr||(xr=!0,w("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",h))};N.isReactWarning=!0,Object.defineProperty(a,"key",{get:N,configurable:!0})}}function ks(a,h){{var N=function(){_r||(_r=!0,w("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",h))};N.isReactWarning=!0,Object.defineProperty(a,"ref",{get:N,configurable:!0})}}var Is=function(a,h,N,k,M,B,V){var O={$$typeof:r,type:a,key:h,ref:N,props:V,_owner:B};return O._store={},Object.defineProperty(O._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(O,"_self",{configurable:!1,enumerable:!1,writable:!1,value:k}),Object.defineProperty(O,"_source",{configurable:!1,enumerable:!1,writable:!1,value:M}),Object.freeze&&(Object.freeze(O.props),Object.freeze(O)),O};function Cs(a,h,N,k,M){{var B,V={},O=null,X=null;N!==void 0&&(Nr(N),O=""+N),As(h)&&(Nr(h.key),O=""+h.key),Ss(h)&&(X=h.ref,Ts(h,M));for(B in h)we.call(h,B)&&!Ds.hasOwnProperty(B)&&(V[B]=h[B]);if(a&&a.defaultProps){var q=a.defaultProps;for(B in q)V[B]===void 0&&(V[B]=q[B])}if(O||X){var Y=typeof a=="function"?a.displayName||a.name||"Unknown":a;O&&Us(V,Y),X&&ks(V,Y)}return Is(a,O,X,M,k,Pe.current,V)}}var Ke=S.ReactCurrentOwner,Er=S.ReactDebugCurrentFrame;function ye(a){if(a){var h=a._owner,N=Ce(a.type,a._source,h?h.type:null);Er.setExtraStackFrame(N)}else Er.setExtraStackFrame(null)}var Je;Je=!1;function Xe(a){return typeof a=="object"&&a!==null&&a.$$typeof===r}function Fr(){{if(Ke.current){var a=T(Ke.current.type);if(a)return`

Check the render method of \``+a+"`."}return""}}function Rs(a){{if(a!==void 0){var h=a.fileName.replace(/^.*[\\\/]/,""),N=a.lineNumber;return`

Check your code at `+h+":"+N+"."}return""}}var wr={};function Ls(a){{var h=Fr();if(!h){var N=typeof a=="string"?a:a.displayName||a.name;N&&(h=`

Check the top-level render call using <`+N+">.")}return h}}function Pr(a,h){{if(!a._store||a._store.validated||a.key!=null)return;a._store.validated=!0;var N=Ls(h);if(wr[N])return;wr[N]=!0;var k="";a&&a._owner&&a._owner!==Ke.current&&(k=" It was passed a child from "+T(a._owner.type)+"."),ye(a),w('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',N,k),ye(null)}}function Dr(a,h){{if(typeof a!="object")return;if(We(a))for(var N=0;N<a.length;N++){var k=a[N];Xe(k)&&Pr(k,h)}else if(Xe(a))a._store&&(a._store.validated=!0);else if(a){var M=_(a);if(typeof M=="function"&&M!==a.entries)for(var B=M.call(a),V;!(V=B.next()).done;)Xe(V.value)&&Pr(V.value,h)}}}function Os(a){{var h=a.type;if(h==null||typeof h=="string")return;var N;if(typeof h=="function")N=h.propTypes;else if(typeof h=="object"&&(h.$$typeof===f||h.$$typeof===d))N=h.propTypes;else return;if(N){var k=T(h);Es(N,a.props,"prop",k,a)}else if(h.PropTypes!==void 0&&!Je){Je=!0;var M=T(h);w("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",M||"Unknown")}typeof h.getDefaultProps=="function"&&!h.getDefaultProps.isReactClassApproved&&w("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Vs(a){{for(var h=Object.keys(a.props),N=0;N<h.length;N++){var k=h[N];if(k!=="children"&&k!=="key"){ye(a),w("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",k),ye(null);break}}a.ref!==null&&(ye(a),w("Invalid attribute `ref` supplied to `React.Fragment`."),ye(null))}}var Sr={};function Ms(a,h,N,k,M,B){{var V=D(a);if(!V){var O="";(a===void 0||typeof a=="object"&&a!==null&&Object.keys(a).length===0)&&(O+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var X=Rs(M);X?O+=X:O+=Fr();var q;a===null?q="null":We(a)?q="array":a!==void 0&&a.$$typeof===r?(q="<"+(T(a.type)||"Unknown")+" />",O=" Did you accidentally export a JSX literal instead of a component?"):q=typeof a,w("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",q,O)}var Y=Cs(a,h,N,M,B);if(Y==null)return Y;if(V){var re=h.children;if(re!==void 0)if(k)if(We(re)){for(var je=0;je<re.length;je++)Dr(re[je],a);Object.freeze&&Object.freeze(re)}else w("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Dr(re,a)}if(we.call(h,"key")){var ge=T(a),Z=Object.keys(h).filter(function(Bs){return Bs!=="key"}),Ze=Z.length>0?"{key: someKey, "+Z.join(": ..., ")+": ...}":"{key: someKey}";if(!Sr[ge+Ze]){var $s=Z.length>0?"{"+Z.join(": ..., ")+": ...}":"{}";w(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Ze,ge,$s,ge),Sr[ge+Ze]=!0}}return a===t?Vs(Y):Os(Y),Y}}var Hs=Ms;Le.Fragment=t,Le.jsxDEV=Hs}(),Le}var Tr;function eo(){return Tr||(Tr=1,Qe.exports=Qs()),Qe.exports}var o=eo(),Oe={},Ur;function ro(){if(Ur)return Oe;Ur=1;var e=Ws();{var r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Oe.createRoot=function(s,t){r.usingClientEntryPoint=!0;try{return e.createRoot(s,t)}finally{r.usingClientEntryPoint=!1}},Oe.hydrateRoot=function(s,t,n){r.usingClientEntryPoint=!0;try{return e.hydrateRoot(s,t,n)}finally{r.usingClientEntryPoint=!1}}}return Oe}var so=ro();const oo=Ys(so),to="modulepreload",ao=function(e){return"/"+e},kr={},Ee=function(r,s,t){let n=Promise.resolve();if(s&&s.length>0){let l=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));n=l(s.map(m=>{if(m=ao(m),m in kr)return;kr[m]=!0;const p=m.endsWith(".css"),d=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${d}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":to,p||(v.as="script"),v.crossOrigin="",v.href=m,f&&v.setAttribute("nonce",f),document.head.appendChild(v),p)return new Promise((y,E)=>{v.addEventListener("load",y),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${m}`)))})}))}function c(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return n.then(l=>{for(const u of l||[])u.status==="rejected"&&c(u.reason);return r().catch(c)})};class no{constructor(r=6e4){ee(this,"pendingRequests");ee(this,"defaultCacheDuration");this.pendingRequests=new Map,this.defaultCacheDuration=r}async fetch(r,s,t=this.defaultCacheDuration){const n=this.getCacheKey(r,s),c=this.pendingRequests.get(n);if(c){const u=Date.now()-c.timestamp;if(c.result&&u<t)return c.result;if(!c.result&&!(s!=null&&s.signal))return c.promise}const l=this.executeRequest(r,s);return this.pendingRequests.set(n,{promise:l,timestamp:Date.now()}),l.then(u=>{const f=this.pendingRequests.get(n);f&&(f.result=u,f.timestamp=Date.now()),setTimeout(()=>{this.pendingRequests.delete(n)},t)}).catch(u=>{this.pendingRequests.delete(n)}),l}async executeRequest(r,s){const t=await fetch(r,s);if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);return await t.json()}getCacheKey(r,s){const t=s?JSON.stringify({method:s.method,body:s.body,headers:s.headers}):"";return`${r}|${t}`}clear(r,s){const t=this.getCacheKey(r,s);this.pendingRequests.delete(t)}clearAll(){this.pendingRequests.clear()}getStats(){return{size:this.pendingRequests.size,entries:Array.from(this.pendingRequests.entries()).map(([r,s])=>({key:r,age:Date.now()-s.timestamp,hasResult:!!s.result}))}}}const rs=new no;typeof window<"u"&&(window.clearAppCache=()=>{rs.clearAll()});async function io(e,r,s){return rs.fetch(e,r,s)}function Ue(e){const r=typeof e=="string"?e:e.message,s=r.toLowerCase();return s.includes("referernotallowedmaperror")||s.includes("referer not allowed")?{userMessage:"Unable to load map from this website. This site may have been accessed from an unauthorized domain.",technicalDetails:"The Google Maps API key has HTTP referrer restrictions that block requests from this domain.",recoverable:!1,suggestedAction:"Please access this website from its official domain, or contact support if you believe this is an error."}:s.includes("apinotactivatedmaperror")||s.includes("api not activated")?{userMessage:"The mapping service is temporarily unavailable.",technicalDetails:"The required Google Maps API is not activated in the Google Cloud Console.",recoverable:!1,suggestedAction:"Please contact support to resolve this issue."}:s.includes("apitargetblockedmaperror")||s.includes("api target blocked")?{userMessage:"Some map features are currently unavailable.",technicalDetails:"The API key has restrictions that block access to required APIs.",recoverable:!1,suggestedAction:"Please contact support to enable additional map features."}:s.includes("invalidkeymaperror")||s.includes("invalid key")?{userMessage:"Map authentication failed. Please contact support.",technicalDetails:"The Google Maps API key is invalid or malformed.",recoverable:!1,suggestedAction:"Contact support to resolve this authentication issue."}:s.includes("request_denied")||s.includes("request denied")?{userMessage:"Unable to complete your request at this time.",technicalDetails:"The server's request was denied by Google Maps API. This may be due to IP address restrictions or API limits.",recoverable:!0,suggestedAction:"Please try again in a few moments. If the problem persists, contact support."}:s.includes("over_query_limit")||s.includes("quota")||s.includes("limit exceeded")?{userMessage:"Our map service has reached its daily usage limit.",technicalDetails:"The Google Maps API daily quota has been exceeded.",recoverable:!0,suggestedAction:"Please try again tomorrow, or contact support for assistance."}:s.includes("zero_results")?{userMessage:"No results found for your search.",technicalDetails:"The search or directions request returned no results.",recoverable:!0,suggestedAction:"Try a different search location or address."}:s.includes("invalid_request")?{userMessage:"Invalid search request. Please check your input and try again.",technicalDetails:"The request to Google Maps API was malformed.",recoverable:!0,suggestedAction:"Please verify your search input and try again."}:s.includes("not_found")?{userMessage:"Location not found.",technicalDetails:"The requested place or location could not be found.",recoverable:!0,suggestedAction:"Please try a different search term or address."}:s.includes("authentication failed")||s.includes("auth fail")?{userMessage:"Map authentication failed. The service may have restrictions that prevent loading.",technicalDetails:"Google Maps API authentication failed, possibly due to API key restrictions.",recoverable:!1,suggestedAction:"Please contact support if this issue persists."}:s.includes("network")||s.includes("connection")||s.includes("failed to fetch")?{userMessage:"Unable to connect to map services. Please check your internet connection.",technicalDetails:"Network error while loading Google Maps API.",recoverable:!0,suggestedAction:"Check your internet connection and try again."}:{userMessage:"An unexpected error occurred while loading the map.",technicalDetails:r,recoverable:!0,suggestedAction:"Please refresh the page and try again. If the problem persists, contact support."}}function $e(e,r=!0){let s=e.userMessage;return r&&e.suggestedAction&&(s+=` ${e.suggestedAction}`),s}function Ir(e,r){{const s=Ue(e);console.group(`[Google Maps Error${`: ${r}`}]`),console.error("User Message:",s.userMessage),s.technicalDetails&&console.error("Technical Details:",s.technicalDetails),s.suggestedAction&&console.info("Suggested Action:",s.suggestedAction),console.error("Original Error:",e),console.groupEnd()}}const me=["farm_stand","cheese_shop","fish_monger","butcher","antique_shop","brewery","winery","sugar_shack"],co=me.length,se={farm_stand:{singular:"Farm Stand",plural:"Farm Stands",emoji:"ðŸšœ",colors:{badge:"bg-green-100 text-green-700 dark:bg-green-700 dark:text-green-100",marker:"#22c55e",glow:"rgba(34, 197, 94, 0.5)"}},cheese_shop:{singular:"Cheesemonger",plural:"Cheesemongers",emoji:"ðŸ§€",colors:{badge:"bg-yellow-100 text-yellow-700 dark:bg-yellow-700 dark:text-yellow-100",marker:"#eab308",glow:"rgba(234, 179, 8, 0.5)"}},fish_monger:{singular:"Fishmonger",plural:"Fishmongers",emoji:"ðŸŸ",colors:{badge:"bg-blue-100 text-blue-700 dark:bg-blue-700 dark:text-blue-100",marker:"#3b82f6",glow:"rgba(59, 130, 246, 0.5)"}},butcher:{singular:"Butcher",plural:"Butchers",emoji:"ðŸ¥©",colors:{badge:"bg-red-100 text-red-700 dark:bg-red-700 dark:text-red-100",marker:"#ef4444",glow:"rgba(239, 68, 68, 0.5)"}},antique_shop:{singular:"Antiques",plural:"Antiques",emoji:"ðŸº",colors:{badge:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-100",marker:"#6b7280",glow:"rgba(107, 114, 128, 0.5)"}},brewery:{singular:"Brewery",plural:"Breweries",emoji:"ðŸº",colors:{badge:"bg-amber-100 text-amber-700 dark:bg-amber-700 dark:text-amber-100",marker:"#d97706",glow:"rgba(217, 119, 6, 0.5)"}},winery:{singular:"Winery",plural:"Wineries",emoji:"ðŸ·",colors:{badge:"bg-purple-100 text-purple-700 dark:bg-purple-700 dark:text-purple-100",marker:"#a855f7",glow:"rgba(168, 85, 247, 0.5)"}},sugar_shack:{singular:"Sugar Shack",plural:"Sugar Shacks",emoji:"ðŸ",colors:{badge:"bg-orange-100 text-orange-700 dark:bg-orange-700 dark:text-orange-100",marker:"#92400e",glow:"rgba(146, 64, 14, 0.5)"}}},ss={badge:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-100",glow:"rgba(107, 114, 128, 0.5)"},lo={farm_stand:"farm-stand",cheese_shop:"cheesemonger",fish_monger:"fishmonger",butcher:"butcher",antique_shop:"antique-shop",brewery:"brewery",winery:"winery",sugar_shack:"sugar-shack"},os={"farm-stand":"farm_stand",cheesemonger:"cheese_shop",fishmonger:"fish_monger",butcher:"butcher","antique-shop":"antique_shop",brewery:"brewery",winery:"winery","sugar-shack":"sugar_shack"};function uo(e){return lo[e]}function mo(e){return os[e]||null}function ho(e){return e.size===me.length&&me.every(t=>e.has(t))?"all":Array.from(e).map(s=>uo(s)).sort().join("+")}function fo(e){if(!e||e===""||e==="/")return new Set(me);const r=e.startsWith("/")?e.slice(1):e;if(r==="all")return new Set(me);const s=r.split("+").filter(Boolean),t=[];for(const n of s){const c=mo(n);c&&t.push(c)}return t.length===0?new Set(me):new Set(t)}function Jt(e){return{farm_stand:"/farm-stand",cheese_shop:"/cheesemonger",fish_monger:"/fishmonger",butcher:"/butcher",antique_shop:"/antique-shop",brewery:"/brewery",winery:"/winery",sugar_shack:"/sugar-shack"}[e]}function Cr(e){const r=e.startsWith("/")?e.slice(1):e;if(!r)return!1;if(r==="all")return!0;if(r.includes("/"))return!1;const s=r.split("+").filter(Boolean);return s.length>0&&s.every(t=>os[t]!==void 0)}function te(e,r=!1){const s=se[e];return r?s.plural:s.singular}function ue(e){return se[e].emoji}function Xt(e){var r;return((r=se[e])==null?void 0:r.colors.badge)??ss.badge}function Zt(e){var r;return((r=se[e])==null?void 0:r.colors.glow)??ss.glow}const po="#ed411a",Qt={farm_stand:se.farm_stand.colors.marker,cheese_shop:se.cheese_shop.colors.marker,fish_monger:se.fish_monger.colors.marker,butcher:se.butcher.colors.marker,antique_shop:se.antique_shop.colors.marker,brewery:se.brewery.colors.marker,winery:se.winery.colors.marker,sugar_shack:se.sugar_shack.colors.marker,default:po},ea={north:47.459683,south:42.975426,west:-71.089859,east:-66.949829},ts={lat:43.6591,lng:-70.2568},ra=ts,sa=11,oa="6c1bbba6c5f48ca2beb388ad",go=25,ta=5,aa=100,na=5,ia=300,bo=1609.34,vo=1/1609.34,ca=.05,la=768,da=20,ua=.67,ma="0.25s",ha="scale(0.96)",fa=1,pa=1001,ga=2e3,ba=50,va=34,ya=9999,ja=.1,Na=.4,xa=2,_a=1,Ea="#4285F4",Fa=0,wa=-10,Pa=50,Da=50,Sa=100,Aa=300,yo={beef:{csvHeader:"beef",name:"Beef",icon_available:"beef_1.jpg",icon_unavailable:"beef_0.jpg",category:"Meats"},pork:{csvHeader:"pork",name:"Pork",icon_available:"pork_1.jpg",icon_unavailable:"pork_0.jpg",category:"Meats"},lamb:{csvHeader:"lamb",name:"Lamb",icon_available:"lamb_1.jpg",icon_unavailable:"lamb_0.jpg",category:"Meats"},chicken:{csvHeader:"chicken",name:"Chicken",icon_available:"chicken_1.jpg",icon_unavailable:"chicken_0.jpg",category:"Poultry & Eggs"},turkey:{csvHeader:"turkey",name:"Turkey",icon_available:"turkey_1.jpg",icon_unavailable:"turkey_0.jpg",category:"Poultry & Eggs"},duck:{csvHeader:"duck",name:"Duck",icon_available:"duck_1.jpg",icon_unavailable:"duck_0.jpg",category:"Poultry & Eggs"},eggs:{csvHeader:"eggs",name:"Eggs",icon_available:"eggs_1.jpg",icon_unavailable:"eggs_0.jpg",category:"Poultry & Eggs"},corn:{csvHeader:"corn",name:"Corn",icon_available:"corn_1.jpg",icon_unavailable:"corn_0.jpg",category:"Vegetables"},carrots:{csvHeader:"carrots",name:"Carrots",icon_available:"carrots_1.jpg",icon_unavailable:"carrots_0.jpg",category:"Vegetables"},potatoes:{csvHeader:"potatoes",name:"Potatoes",icon_available:"potatoes_1.jpg",icon_unavailable:"potatoes_0.jpg",category:"Vegetables"},lettuce:{csvHeader:"lettuce",name:"Lettuce",icon_available:"lettuce_1.jpg",icon_unavailable:"lettuce_0.jpg",category:"Vegetables"},spinach:{csvHeader:"spinach",name:"Spinach",icon_available:"spinach_1.jpg",icon_unavailable:"spinach_0.jpg",category:"Vegetables"},squash:{csvHeader:"squash",name:"Squash",icon_available:"squash_1.jpg",icon_unavailable:"squash_0.jpg",category:"Vegetables"},tomatoes:{csvHeader:"tomatoes",name:"Tomatoes",icon_available:"tomatoes_1.jpg",icon_unavailable:"tomatoes_0.jpg",category:"Vegetables"},peppers:{csvHeader:"peppers",name:"Peppers",icon_available:"peppers_1.jpg",icon_unavailable:"peppers_0.jpg",category:"Vegetables"},cucumbers:{csvHeader:"cucumbers",name:"Cucumbers",icon_available:"cucumbers_1.jpg",icon_unavailable:"cucumbers_0.jpg",category:"Vegetables"},zucchini:{csvHeader:"zucchini",name:"Zucchini",icon_available:"zucchini_1.jpg",icon_unavailable:"zucchini_0.jpg",category:"Vegetables"},garlic:{csvHeader:"garlic",name:"Garlic",icon_available:"garlic_1.jpg",icon_unavailable:"garlic_0.jpg",category:"Aromatics"},onions:{csvHeader:"onions",name:"Onions",icon_available:"onions_1.jpg",icon_unavailable:"onions_0.jpg",category:"Aromatics"},strawberries:{csvHeader:"strawberries",name:"Strawberries",icon_available:"strawberries_1.jpg",icon_unavailable:"strawberries_0.jpg",category:"Fruits"},blueberries:{csvHeader:"blueberries",name:"Blueberries",icon_available:"blueberries_1.jpg",icon_unavailable:"blueberries_0.jpg",category:"Fruits"}},jo=["Meats","Poultry & Eggs","Vegetables","Fruits","Aromatics"],No={cheddar:{csvHeader:"cheddar",name:"Cheddar",icon_available:"cheddar_1.jpg",icon_unavailable:"cheddar_0.jpg",category:"Cheese Types"},brie:{csvHeader:"brie",name:"Brie",icon_available:"brie_1.jpg",icon_unavailable:"brie_0.jpg",category:"Cheese Types"},gouda:{csvHeader:"gouda",name:"Gouda",icon_available:"gouda_1.jpg",icon_unavailable:"gouda_0.jpg",category:"Cheese Types"},mozzarella:{csvHeader:"mozzarella",name:"Mozzarella",icon_available:"mozzarella_1.jpg",icon_unavailable:"mozzarella_0.jpg",category:"Cheese Types"},feta:{csvHeader:"feta",name:"Feta",icon_available:"feta_1.jpg",icon_unavailable:"feta_0.jpg",category:"Cheese Types"},blue_cheese:{csvHeader:"blue_cheese",name:"Blue Cheese",icon_available:"blue_cheese_1.jpg",icon_unavailable:"blue_cheese_0.jpg",category:"Cheese Types"},parmesan:{csvHeader:"parmesan",name:"Parmesan",icon_available:"parmesan_1.jpg",icon_unavailable:"parmesan_0.jpg",category:"Cheese Types"},swiss:{csvHeader:"swiss",name:"Swiss",icon_available:"swiss_1.jpg",icon_unavailable:"swiss_0.jpg",category:"Cheese Types"},provolone:{csvHeader:"provolone",name:"Provolone",icon_available:"provolone_1.jpg",icon_unavailable:"provolone_0.jpg",category:"Cheese Types"},cow_milk:{csvHeader:"cow_milk",name:"Cow Milk",icon_available:"cow_milk_1.jpg",icon_unavailable:"cow_milk_0.jpg",category:"Milk Source"},goat_milk:{csvHeader:"goat_milk",name:"Goat Milk",icon_available:"goat_milk_1.jpg",icon_unavailable:"goat_milk_0.jpg",category:"Milk Source"},sheep_milk:{csvHeader:"sheep_milk",name:"Sheep Milk",icon_available:"sheep_milk_1.jpg",icon_unavailable:"sheep_milk_0.jpg",category:"Milk Source"}},xo=["Cheese Types","Milk Source"],_o={salmon:{csvHeader:"salmon",name:"Salmon",icon_available:"salmon_1.jpg",icon_unavailable:"salmon_0.jpg",category:"Fish"},cod:{csvHeader:"cod",name:"Cod",icon_available:"cod_1.jpg",icon_unavailable:"cod_0.jpg",category:"Fish"},haddock:{csvHeader:"haddock",name:"Haddock",icon_available:"haddock_1.jpg",icon_unavailable:"haddock_0.jpg",category:"Fish"},tuna:{csvHeader:"tuna",name:"Tuna",icon_available:"tuna_1.jpg",icon_unavailable:"tuna_0.jpg",category:"Fish"},halibut:{csvHeader:"halibut",name:"Halibut",icon_available:"halibut_1.jpg",icon_unavailable:"halibut_0.jpg",category:"Fish"},lobster:{csvHeader:"lobster",name:"Lobster",icon_available:"lobster_1.jpg",icon_unavailable:"lobster_0.jpg",category:"Shellfish"},shrimp:{csvHeader:"shrimp",name:"Shrimp",icon_available:"shrimp_1.jpg",icon_unavailable:"shrimp_0.jpg",category:"Shellfish"},crab:{csvHeader:"crab",name:"Crab",icon_available:"crab_1.jpg",icon_unavailable:"crab_0.jpg",category:"Shellfish"},oysters:{csvHeader:"oysters",name:"Oysters",icon_available:"oysters_1.jpg",icon_unavailable:"oysters_0.jpg",category:"Shellfish"},clams:{csvHeader:"clams",name:"Clams",icon_available:"clams_1.jpg",icon_unavailable:"clams_0.jpg",category:"Shellfish"},mussels:{csvHeader:"mussels",name:"Mussels",icon_available:"mussels_1.jpg",icon_unavailable:"mussels_0.jpg",category:"Shellfish"},scallops:{csvHeader:"scallops",name:"Scallops",icon_available:"scallops_1.jpg",icon_unavailable:"scallops_0.jpg",category:"Shellfish"}},Eo=["Fish","Shellfish"],Fo={beef:{csvHeader:"beef",name:"Beef",icon_available:"beef_1.jpg",icon_unavailable:"beef_0.jpg",category:"Fresh Meats"},pork:{csvHeader:"pork",name:"Pork",icon_available:"pork_1.jpg",icon_unavailable:"pork_0.jpg",category:"Fresh Meats"},lamb:{csvHeader:"lamb",name:"Lamb",icon_available:"lamb_1.jpg",icon_unavailable:"lamb_0.jpg",category:"Fresh Meats"},veal:{csvHeader:"veal",name:"Veal",icon_available:"veal_1.jpg",icon_unavailable:"veal_0.jpg",category:"Fresh Meats"},chicken:{csvHeader:"chicken",name:"Chicken",icon_available:"chicken_1.jpg",icon_unavailable:"chicken_0.jpg",category:"Poultry"},turkey:{csvHeader:"turkey",name:"Turkey",icon_available:"turkey_1.jpg",icon_unavailable:"turkey_0.jpg",category:"Poultry"},duck:{csvHeader:"duck",name:"Duck",icon_available:"duck_1.jpg",icon_unavailable:"duck_0.jpg",category:"Poultry"},sausages:{csvHeader:"sausages",name:"Sausages",icon_available:"sausages_1.jpg",icon_unavailable:"sausages_0.jpg",category:"Prepared Meats"},bacon:{csvHeader:"bacon",name:"Bacon",icon_available:"bacon_1.jpg",icon_unavailable:"bacon_0.jpg",category:"Prepared Meats"},ground_meat:{csvHeader:"ground_meat",name:"Ground Meat",icon_available:"ground_meat_1.jpg",icon_unavailable:"ground_meat_0.jpg",category:"Prepared Meats"},steaks:{csvHeader:"steaks",name:"Steaks",icon_available:"steaks_1.jpg",icon_unavailable:"steaks_0.jpg",category:"Cuts"},roasts:{csvHeader:"roasts",name:"Roasts",icon_available:"roasts_1.jpg",icon_unavailable:"roasts_0.jpg",category:"Cuts"}},wo=["Fresh Meats","Poultry","Prepared Meats","Cuts"],Po={furniture:{csvHeader:"furniture",name:"Furniture",icon_available:"furniture_1.jpg",icon_unavailable:"furniture_0.jpg",category:"Furniture & Decor"},art:{csvHeader:"art",name:"Art",icon_available:"art_1.jpg",icon_unavailable:"art_0.jpg",category:"Furniture & Decor"},jewelry:{csvHeader:"jewelry",name:"Jewelry",icon_available:"jewelry_1.jpg",icon_unavailable:"jewelry_0.jpg",category:"Jewelry & Accessories"},vintage_clothing:{csvHeader:"vintage_clothing",name:"Vintage Clothing",icon_available:"vintage_clothing_1.jpg",icon_unavailable:"vintage_clothing_0.jpg",category:"Jewelry & Accessories"},books:{csvHeader:"books",name:"Books",icon_available:"books_1.jpg",icon_unavailable:"books_0.jpg",category:"Collectibles"},collectibles:{csvHeader:"collectibles",name:"Collectibles",icon_available:"collectibles_1.jpg",icon_unavailable:"collectibles_0.jpg",category:"Collectibles"},ceramics:{csvHeader:"ceramics",name:"Ceramics",icon_available:"ceramics_1.jpg",icon_unavailable:"ceramics_0.jpg",category:"Tableware"},glassware:{csvHeader:"glassware",name:"Glassware",icon_available:"glassware_1.jpg",icon_unavailable:"glassware_0.jpg",category:"Tableware"},silverware:{csvHeader:"silverware",name:"Silverware",icon_available:"silverware_1.jpg",icon_unavailable:"silverware_0.jpg",category:"Tableware"},textiles:{csvHeader:"textiles",name:"Textiles",icon_available:"textiles_1.jpg",icon_unavailable:"textiles_0.jpg",category:"Textiles"}},Do=["Furniture & Decor","Jewelry & Accessories","Collectibles","Tableware","Textiles"],So={ipa:{csvHeader:"ipa",name:"IPA",icon_available:"ipa_1.jpg",icon_unavailable:"ipa_0.jpg",category:"Beer Styles"},lager:{csvHeader:"lager",name:"Lager",icon_available:"lager_1.jpg",icon_unavailable:"lager_0.jpg",category:"Beer Styles"},stout:{csvHeader:"stout",name:"Stout",icon_available:"stout_1.jpg",icon_unavailable:"stout_0.jpg",category:"Beer Styles"},ale:{csvHeader:"ale",name:"Ale",icon_available:"ale_1.jpg",icon_unavailable:"ale_0.jpg",category:"Beer Styles"},pilsner:{csvHeader:"pilsner",name:"Pilsner",icon_available:"pilsner_1.jpg",icon_unavailable:"pilsner_0.jpg",category:"Beer Styles"},wheat_beer:{csvHeader:"wheat_beer",name:"Wheat Beer",icon_available:"wheat_beer_1.jpg",icon_unavailable:"wheat_beer_0.jpg",category:"Beer Styles"},tours:{csvHeader:"tours",name:"Tours",icon_available:"tours_1.jpg",icon_unavailable:"tours_0.jpg",category:"Offerings"},tastings:{csvHeader:"tastings",name:"Tastings",icon_available:"tastings_1.jpg",icon_unavailable:"tastings_0.jpg",category:"Offerings"},food:{csvHeader:"food",name:"Food",icon_available:"food_1.jpg",icon_unavailable:"food_0.jpg",category:"Offerings"},outdoor_seating:{csvHeader:"outdoor_seating",name:"Outdoor Seating",icon_available:"outdoor_seating_1.jpg",icon_unavailable:"outdoor_seating_0.jpg",category:"Offerings"}},Ao=["Beer Styles","Offerings"],To={red_wine:{csvHeader:"red_wine",name:"Red Wine",icon_available:"red_wine_1.jpg",icon_unavailable:"red_wine_0.jpg",category:"Wine Types"},white_wine:{csvHeader:"white_wine",name:"White Wine",icon_available:"white_wine_1.jpg",icon_unavailable:"white_wine_0.jpg",category:"Wine Types"},rose:{csvHeader:"rose",name:"RosÃ©",icon_available:"rose_1.jpg",icon_unavailable:"rose_0.jpg",category:"Wine Types"},sparkling:{csvHeader:"sparkling",name:"Sparkling",icon_available:"sparkling_1.jpg",icon_unavailable:"sparkling_0.jpg",category:"Wine Types"},dessert_wine:{csvHeader:"dessert_wine",name:"Dessert Wine",icon_available:"dessert_wine_1.jpg",icon_unavailable:"dessert_wine_0.jpg",category:"Wine Types"},tours:{csvHeader:"tours",name:"Tours",icon_available:"tours_1.jpg",icon_unavailable:"tours_0.jpg",category:"Offerings"},tastings:{csvHeader:"tastings",name:"Tastings",icon_available:"tastings_1.jpg",icon_unavailable:"tastings_0.jpg",category:"Offerings"},food:{csvHeader:"food",name:"Food",icon_available:"food_1.jpg",icon_unavailable:"food_0.jpg",category:"Offerings"},vineyard_views:{csvHeader:"vineyard_views",name:"Vineyard Views",icon_available:"vineyard_views_1.jpg",icon_unavailable:"vineyard_views_0.jpg",category:"Offerings"},events:{csvHeader:"events",name:"Events",icon_available:"events_1.jpg",icon_unavailable:"events_0.jpg",category:"Offerings"}},Uo=["Wine Types","Offerings"],ko={maple_syrup:{csvHeader:"maple_syrup",name:"Maple Syrup",icon_available:"maple_syrup_1.jpg",icon_unavailable:"maple_syrup_0.jpg",category:"Maple Products"},maple_candy:{csvHeader:"maple_candy",name:"Maple Candy",icon_available:"maple_candy_1.jpg",icon_unavailable:"maple_candy_0.jpg",category:"Maple Products"},maple_cream:{csvHeader:"maple_cream",name:"Maple Cream",icon_available:"maple_cream_1.jpg",icon_unavailable:"maple_cream_0.jpg",category:"Maple Products"},maple_sugar:{csvHeader:"maple_sugar",name:"Maple Sugar",icon_available:"maple_sugar_1.jpg",icon_unavailable:"maple_sugar_0.jpg",category:"Maple Products"},tours:{csvHeader:"tours",name:"Tours",icon_available:"tours_1.jpg",icon_unavailable:"tours_0.jpg",category:"Experiences"},tastings:{csvHeader:"tastings",name:"Tastings",icon_available:"tastings_1.jpg",icon_unavailable:"tastings_0.jpg",category:"Experiences"},pancake_breakfast:{csvHeader:"pancake_breakfast",name:"Pancake Breakfast",icon_available:"pancake_breakfast_1.jpg",icon_unavailable:"pancake_breakfast_0.jpg",category:"Experiences"},seasonal_events:{csvHeader:"seasonal_events",name:"Seasonal Events",icon_available:"seasonal_events_1.jpg",icon_unavailable:"seasonal_events_0.jpg",category:"Experiences"}},Io=["Maple Products","Experiences"],or={farm_stand:yo,cheese_shop:No,fish_monger:_o,butcher:Fo,antique_shop:Po,brewery:So,winery:To,sugar_shack:ko},Co={farm_stand:jo,cheese_shop:xo,fish_monger:Eo,butcher:wo,antique_shop:Do,brewery:Ao,winery:Uo,sugar_shack:Io};function tr(e){return or[e]}function Rr(e){return Co[e]}const Ta=300,Ro=5e3,He="phindus_lastLocation",Lo=30;async function Oo(e){try{const r=await io("/api/locations",{signal:e},3e5);let s=[];return Array.isArray(r)&&(s=r),s}catch(r){return r instanceof Error&&r.name==="AbortError"?[]:[]}}const Vo=({message:e,type:r,onClose:s,duration:t=Ro})=>{const[n,c]=i.useState(!1);i.useEffect(()=>{const f=setTimeout(()=>{c(!0),setTimeout(s,300)},t);return()=>clearTimeout(f)},[t,s]);const l={success:{bg:"bg-gradient-to-r from-green-500 to-green-600 dark:from-green-600 dark:to-green-700",icon:"text-white",text:"text-white",border:"border-green-400 dark:border-green-500"},error:{bg:"bg-gradient-to-r from-red-500 to-red-600 dark:from-red-600 dark:to-red-700",icon:"text-white",text:"text-white",border:"border-red-400 dark:border-red-500"},warning:{bg:"bg-gradient-to-r from-yellow-500 to-orange-500 dark:from-yellow-600 dark:to-orange-600",icon:"text-white",text:"text-white",border:"border-yellow-400 dark:border-yellow-500"},info:{bg:"bg-gradient-to-r from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700",icon:"text-white",text:"text-white",border:"border-blue-400 dark:border-blue-500"}},u={success:o.jsxDEV("svg",{className:`w-5 h-5 ${l[r].icon}`,fill:"currentColor",viewBox:"0 0 20 20",children:o.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:56,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:55,columnNumber:7},void 0),error:o.jsxDEV("svg",{className:`w-5 h-5 ${l[r].icon}`,fill:"currentColor",viewBox:"0 0 20 20",children:o.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:61,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:60,columnNumber:7},void 0),warning:o.jsxDEV("svg",{className:`w-5 h-5 ${l[r].icon}`,fill:"currentColor",viewBox:"0 0 20 20",children:o.jsxDEV("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:66,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:65,columnNumber:7},void 0),info:o.jsxDEV("svg",{className:`w-5 h-5 ${l[r].icon}`,fill:"currentColor",viewBox:"0 0 20 20",children:o.jsxDEV("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:71,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:70,columnNumber:7},void 0)};return o.jsxDEV("div",{id:`toast-${r}`,className:`
        max-w-sm w-full shadow-2xl rounded-lg overflow-hidden border-2
        ${l[r].bg} ${l[r].border}
        transform transition-all duration-300 ease-out
        ${n?"translate-x-full opacity-0":"translate-x-0 opacity-100"}
      `,role:"alert","aria-live":"assertive",children:[o.jsxDEV("div",{className:"p-4",children:o.jsxDEV("div",{className:"flex items-start",children:[o.jsxDEV("div",{className:"flex-shrink-0",children:u[r]},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:90,columnNumber:11},void 0),o.jsxDEV("div",{className:"ml-3 flex-1 pt-0.5",children:o.jsxDEV("p",{id:`toast-message-${r}`,className:`text-sm font-medium ${l[r].text}`,children:e},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:94,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:93,columnNumber:11},void 0),o.jsxDEV("button",{id:"toast-close-button",onClick:()=>{c(!0),setTimeout(s,300)},className:`ml-3 inline-flex flex-shrink-0 rounded-md p-1 hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white transition-colors ${l[r].text}`,"aria-label":"Close notification",children:o.jsxDEV("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsxDEV("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:106,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:105,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:96,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:89,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:88,columnNumber:7},void 0),o.jsxDEV("div",{className:"h-1 bg-black/20",children:o.jsxDEV("div",{className:"h-full bg-white/40 transition-all ease-linear",style:{width:"100%",animation:`shrink ${t}ms linear forwards`}},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:113,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:112,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/Toast.tsx",lineNumber:77,columnNumber:5},void 0)},as=i.createContext(void 0),Be=()=>{const e=i.useContext(as);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},Mo=({children:e})=>{const[r,s]=i.useState([]),t=i.useCallback((m,p,d=5e3)=>{const y={id:`toast-${Date.now()}-${Math.random()}`,type:p,message:m,duration:d};s(E=>[...E,y])},[]),n=i.useCallback((m,p)=>{t(m,"success",p)},[t]),c=i.useCallback((m,p)=>{t(m,"error",p)},[t]),l=i.useCallback((m,p)=>{t(m,"warning",p)},[t]),u=i.useCallback((m,p)=>{t(m,"info",p)},[t]),f=i.useCallback(m=>{s(p=>p.filter(d=>d.id!==m))},[]);return o.jsxDEV(as.Provider,{value:{showToast:t,showSuccess:n,showError:c,showWarning:l,showInfo:u},children:[e,o.jsxDEV("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 pointer-events-none",children:r.map(m=>o.jsxDEV("div",{className:"pointer-events-auto",children:o.jsxDEV(Vo,{type:m.type,message:m.message,duration:m.duration,onClose:()=>f(m.id)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/ToastContext.tsx",lineNumber:68,columnNumber:13},void 0)},m.id,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/ToastContext.tsx",lineNumber:67,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/ToastContext.tsx",lineNumber:65,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/ToastContext.tsx",lineNumber:61,columnNumber:5},void 0)},ns=i.createContext(void 0),Ho=({children:e})=>{const{showError:r}=Be(),[s,t]=i.useState([]),[n,c]=i.useState([]),[l,u]=i.useState(!0),[f,m]=i.useState(null),p=i.useRef(!1),d=i.useCallback(async E=>{if(!p.current){u(!0),m(null);try{let x=null;if(window.__LOCATIONS_PROMISE__&&(console.log("[LocationData] Using early fetch promise from index.html"),x=await window.__LOCATIONS_PROMISE__,delete window.__LOCATIONS_PROMISE__),x||(console.log("[LocationData] Falling back to normal API fetch"),x=await Oo(E)),E!=null&&E.aborted){p.current=!1;return}if(x&&Array.isArray(x))t(x),m(null),p.current=!0;else{t([]);const _="Failed to load locations. Please try again.";m(_),r(_)}}catch{if(E!=null&&E.aborted){p.current=!1;return}t([]);const _="Unable to load location data. Please check your connection and try again.";m(_),r(_)}finally{E!=null&&E.aborted||u(!1)}}},[r]);i.useEffect(()=>{const E=new AbortController;return d(E.signal),()=>{E.abort()}},[d]);const v=i.useCallback(()=>{p.current=!1,d()},[d]),y=i.useMemo(()=>({allLocations:s,setAllLocations:t,currentlyDisplayedLocations:n,setCurrentlyDisplayedLocations:c,isLoadingLocations:l,locationsError:f,retryLoadLocations:v}),[s,n,l,f,v]);return o.jsxDEV(ns.Provider,{value:y,children:e},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/LocationDataContext.tsx",lineNumber:126,columnNumber:10},void 0)},is=()=>{const e=i.useContext(ns);if(e===void 0)throw new Error("useLocationData must be used within a LocationDataProvider");return e};function $o(e,r,s){let t="";{const n=new Date;n.setTime(n.getTime()+s*24*60*60*1e3),t="; expires="+n.toUTCString()}document.cookie=e+"="+(r||"")+t+"; path=/; SameSite=Lax"}function cs(e){const r=e+"=",s=document.cookie.split(";");for(let t=0;t<s.length;t++){let n=s[t];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(r)===0)return n.substring(r.length,n.length)}return null}function Bo(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT; SameSite=Lax"}let De=!1,Lr=!1,Ae=null;function Go(){if(Lr)return Promise.resolve();if(Ae)return Promise.reject(Ae);if(De)return new Promise((r,s)=>{window.addEventListener("google-maps-api-loaded",()=>r(),{once:!0}),window.addEventListener("google-maps-api-error",t=>{s(t.detail)},{once:!0})});const e="AIzaSyCRGp81QHEPMm5l08QK3f2xrxtRBAWLpBY";return De=!0,new Promise((r,s)=>{window.initAppMapGlobal=()=>{window.googleMapsApiLoaded=!0,window.dispatchEvent(new CustomEvent("google-maps-api-loaded")),Lr=!0,De=!1,r()},window.gm_authFailure=()=>{De=!1;const n=new Error("Google Maps authentication failed. The API key may have restrictions that block this website. Please contact support if this issue persists.");Ae=n,window.dispatchEvent(new CustomEvent("google-maps-api-error",{detail:n})),s(n)};const t=document.createElement("script");t.async=!0,t.defer=!0,t.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,geometry,marker&loading=async&callback=initAppMapGlobal`,t.onerror=()=>{De=!1;const n=new Error("Failed to load Google Maps API. Please check your internet connection and try again.");Ae=n,window.dispatchEvent(new CustomEvent("google-maps-api-error",{detail:n})),s(n)},document.head.appendChild(t)})}function zo(){return Ae}const ar={locationTypes:new Set(me),searchRadius:25};function qo(e){return new Set(me)}function Wo(e){if(!e)return{};const r=e.split(",").filter(Boolean),s={};return r.forEach(t=>{s[t]=!0}),s}function Yo(e,r){if(!e||!r)return null;const s=parseFloat(e),t=parseFloat(r);return isNaN(s)||isNaN(t)||s<-90||s>90||t<-180||t>180?null:{name:"",formatted_address:"",geometry:{location:{lat:s,lng:t},viewport:void 0},place_id:void 0,address_components:void 0,types:void 0}}function Ko(e){if(!e)return ar.searchRadius;const r=parseFloat(e);return isNaN(r)||r<5||r>100?ar.searchRadius:r}function nr(e){return{locationTypes:qo(e.get("types")),productFilters:Wo(e.get("products")),searchLocation:Yo(e.get("lat"),e.get("lng")),searchRadius:Ko(e.get("radius"))}}function Jo(e){return null}function Xo(e){const r=Object.keys(e).filter(s=>e[s]);return r.length===0?null:r.sort().join(",")}function Zo(e){var c;if(!((c=e==null?void 0:e.geometry)!=null&&c.location))return{lat:null,lng:null};const{lat:r,lng:s}=e.geometry.location,t=typeof r=="function"?r():r,n=typeof s=="function"?s():s;return{lat:t.toFixed(2),lng:n.toFixed(2)}}function Qo(e){const r=new URLSearchParams;Jo(e.locationTypes);const s=Xo(e.productFilters);s&&r.set("products",s);const t=Zo(e.searchLocation);return t.lat&&t.lng&&(r.set("lat",t.lat),r.set("lng",t.lng)),e.searchRadius!==ar.searchRadius&&r.set("radius",e.searchRadius.toString()),r}const ls=i.createContext(void 0),et=({children:e})=>{const{showError:r}=Be(),[s]=dr(),[t,n]=i.useState(null),[c,l]=i.useState(""),[u,f]=i.useState(go),[m,p]=i.useState(!1),[d,v]=i.useState(null);i.useEffect(()=>{var S,w;const x=()=>{var P,b;window.googleMapsApiLoaded&&((b=(P=window.google)==null?void 0:P.maps)!=null&&b.DirectionsService)&&(p(!0),window.removeEventListener("google-maps-api-loaded",x))},_=P=>{const b=P.detail,F=Ue(b),I=$e(F);r(I)};if(window.googleMapsApiLoaded&&((w=(S=window.google)==null?void 0:S.maps)!=null&&w.DirectionsService))p(!0);else{window.addEventListener("google-maps-api-loaded",x),window.addEventListener("google-maps-api-error",_);const P=zo();if(P){const b=Ue(P),F=$e(b);r(F)}}return()=>{window.removeEventListener("google-maps-api-loaded",x),window.removeEventListener("google-maps-api-error",_)}},[r]),i.useEffect(()=>{var P,b;if(window.location.pathname.startsWith("/farm/")||t)return;const _=nr(s);if((P=_.searchLocation)!=null&&P.geometry&&(_.searchLocation.name||_.searchLocation.formatted_address)){n(_.searchLocation),l(_.searchLocation.formatted_address||_.searchLocation.name||""),v(_.searchLocation),f(_.searchRadius);return}const S=cs(He);if(S)try{const F=JSON.parse(S);if((b=F==null?void 0:F.place)!=null&&b.geometry){n(F.place),l(F.term||""),v(F.place),f(_.searchRadius);return}}catch(F){console.error("[SearchContext] Error parsing cookie:",F)}const w={name:"Portland, Maine",formatted_address:"Portland, ME, USA",geometry:{location:ts,viewport:void 0},place_id:void 0,address_components:void 0,types:void 0};n(w),l("Portland, ME, USA"),v(w),f(_.searchRadius)},[t,s]);const y=i.useCallback((x,_)=>{n(x),l(_),x!=null&&x.geometry&&_?$o(He,JSON.stringify({term:_,place:x}),Lo):Bo(He)},[]),E=i.useMemo(()=>({lastPlaceSelectedByAutocomplete:t,setLastPlaceSelectedByAutocompleteAndCookie:y,searchTerm:c,setSearchTerm:l,currentRadius:u,setCurrentRadius:f,mapsApiReady:m,mapViewTargetLocation:d,setMapViewTargetLocation:v}),[t,y,c,u,m,d]);return o.jsxDEV(ls.Provider,{value:E,children:e},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/SearchContext.tsx",lineNumber:175,columnNumber:10},void 0)},ds=()=>{const e=i.useContext(ls);if(e===void 0)throw new Error("useSearch must be used within a SearchProvider");return e},rt=!1,st=!1,ot=!0,tt=["farm_stand","fish_monger","cheese_shop","butcher","antique_shop"],at=[{type:"brewery",enabled:rt},{type:"winery",enabled:st},{type:"sugar_shack",enabled:ot}],_e=[...tt,...at.filter(e=>e.enabled).map(e=>e.type)],us=i.createContext(void 0),Or=new Set(_e),nt=({children:e})=>{const[r]=dr(),{types:s}=Ks(),t=ur(),n=mr(),[c,l]=i.useState({}),[u,f]=i.useState(new Set(Or));i.useEffect(()=>{let x;s?x=fo(s):t.pathname==="/all"||t.pathname==="/"?x=new Set(_e):t.pathname==="/not-sure"?x=new Set:x=nr(r).locationTypes,f(x);const _=nr(r),S=Object.keys(_.productFilters).filter(P=>{let b=!1;return x.forEach(F=>{var I;(I=or[F])!=null&&I[P]&&(b=!0)}),b&&_.productFilters[P]}),w={};S.forEach(P=>{w[P]=!0}),l(w)},[]);const m=i.useMemo(()=>{const x=new Set;return u.forEach(_=>{const S=or[_];Object.keys(S).forEach(w=>x.add(w))}),x},[u]),p=i.useCallback(x=>m.has(x),[m]),d=i.useCallback(x=>{if(!p(x)){console.warn(`[FilterContext] Attempted to toggle invalid product key: "${x}"`);return}l(_=>({..._,[x]:!_[x]}))},[p]),v=i.useCallback(()=>{const x=new URLSearchParams(window.location.search),_=new URLSearchParams;["lat","lng","location","radius"].forEach(P=>{const b=x.get(P);b&&_.set(P,b)});const S=_.toString(),w=S?`/all?${S}`:"/all";l({}),f(new Set(Or)),n(w,{replace:!0})},[n]),y=i.useCallback(x=>{f(_=>{const S=new Set(_);return S.has(x)?S.delete(x):S.add(x),S})},[]),E=i.useMemo(()=>({activeProductFilters:c,setActiveProductFilters:l,activeLocationTypes:u,setActiveLocationTypes:f,toggleLocationType:y,toggleFilter:d,clearAllFilters:v,isValidProductKey:p}),[c,u,y,d,v,p]);return o.jsxDEV(us.Provider,{value:E,children:e},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/FilterContext.tsx",lineNumber:171,columnNumber:10},void 0)},Ge=()=>{const e=i.useContext(us);if(e===void 0)throw new Error("useFilters must be used within a FilterProvider");return e},er=350,ms=i.createContext(void 0),it=({children:e})=>{const[r,s]=i.useState(null),[t,n]=i.useState(null),[c,l]=i.useState(!1),[u,f]=i.useState(!1),[m,p]=i.useState(!1),[d,v]=i.useState(!1),[y,E]=i.useState("photos"),[x,_]=i.useState(0),S=i.useRef(null),w=i.useRef(null),P=i.useRef(null),[b,F]=i.useState(!1),[I,A]=i.useState(.3),L=I>.3,[j,D]=i.useState(!1),[g,R]=i.useState(!1),[T,U]=i.useState(null);i.useEffect(()=>(c?(S.current&&(clearTimeout(S.current),S.current=null),p(!0)):m&&(S.current=setTimeout(()=>{p(!1),S.current=null},er)),()=>{S.current&&clearTimeout(S.current)}),[c,m]);const[C,G]=i.useState(!1),[H,J]=i.useState(!1);i.useEffect(()=>{if(c&&m){const K=requestAnimationFrame(()=>{G(!0)});return()=>cancelAnimationFrame(K)}else G(!1)},[c,m]),i.useEffect(()=>(u?(w.current&&(clearTimeout(w.current),w.current=null),v(!0)):d&&(w.current=setTimeout(()=>{v(!1),w.current=null},er)),()=>{w.current&&clearTimeout(w.current)}),[u,d]),i.useEffect(()=>{if(u&&d){const K=requestAnimationFrame(()=>{J(!0)});return()=>cancelAnimationFrame(K)}else J(!1)},[u,d]);const W=i.useCallback(K=>{s(K)},[]),Q=i.useCallback((K,ce="shop",ve="photos")=>{if(!K){console.error("[UIContext] Attempted to open overlay with null/undefined shop");return}if(!K.Name&&!K.slug&&!K.GoogleProfileID){console.error("[UIContext] Shop missing required identifiers (Name, slug, or GoogleProfileID)");return}P.current&&(clearTimeout(P.current),P.current=null),W(K),E(ve),ce==="shop"?(l(!0),f(!0)):(ce==="directions"||ce==="social")&&(f(!0),l(!1)),document.body&&document.body.classList.add("modal-active")},[W]),he=i.useCallback(()=>{l(!1),f(!1),document.body&&document.body.classList.remove("modal-active"),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{s(null),P.current=null},er+50)},[]),fe=i.useCallback(()=>{l(!0),f(!0),document.body&&document.body.classList.add("modal-active")},[]),pe=i.useCallback(()=>{l(!1),!u&&document.body&&document.body.classList.remove("modal-active")},[u]),be=i.useCallback(()=>{f(!1),!c&&document.body&&document.body.classList.remove("modal-active")},[c]),de=i.useCallback(()=>{c||u?(l(!1),f(!1),document.body&&document.body.classList.remove("modal-active")):(l(!0),f(!0),document.body&&document.body.classList.add("modal-active"))},[c,u]),ae=i.useCallback(K=>{E(K),_(ce=>ce+1)},[]),oe=i.useMemo(()=>({selectedShop:r,setSelectedShop:W,hoveredShop:t,setHoveredShop:n,isShopDetailsOpen:c,isShopSocialsOpen:u,shouldRenderShopDetails:m,shouldRenderShopSocials:d,isShopDetailsAnimatedOpen:C,isShopSocialsAnimatedOpen:H,openShopOverlays:Q,closeShopOverlays:he,openBothOverlays:fe,closeShopDetails:pe,closeShopSocials:be,toggleBothOverlays:de,isInitialModalOpen:b,setIsInitialModalOpen:F,shopSocialsInitialTab:y,setShopSocialsActiveTab:ae,tabChangeKey:x,bottomSheetHeight:I,setBottomSheetHeight:A,bottomSheetExpanded:L,isFilterDrawerOpen:j,setIsFilterDrawerOpen:D,isManuallyCollapsed:g,setIsManuallyCollapsed:R,previewShop:T,setPreviewShop:U}),[r,W,t,c,u,m,d,C,H,Q,he,fe,pe,be,de,b,y,ae,x,I,L,j,g,T]);return o.jsxDEV(ms.Provider,{value:oe,children:e},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/UIContext.tsx",lineNumber:349,columnNumber:10},void 0)},hs=()=>{const e=i.useContext(ms);if(e===void 0)throw new Error("useUI must be used within a UIProvider");return e};function ct(e){return e?"lat"in e&&typeof e.lat=="function"?{lat:e.lat(),lng:e.lng()}:"lat"in e&&typeof e.lat=="number"?{lat:e.lat,lng:e.lng}:null:null}function lt(e,r){var l,u,f,m,p;if(!e||e.length===0)return[];let s=[...e];r.locationTypes.size<co&&(s=s.filter(d=>Array.isArray(d.types)?d.types.some(v=>r.locationTypes.has(v)):r.locationTypes.has(d.type)));const t=Object.keys(r.productFilters).filter(d=>r.productFilters[d]);t.length>0&&(s=s.filter(d=>d.products?t.every(v=>!!d.products[v]):!1));let n=null;if(r.mapsApiReady&&((f=(u=(l=window.google)==null?void 0:l.maps)==null?void 0:u.geometry)!=null&&f.spherical)&&((p=(m=r.location)==null?void 0:m.geometry)!=null&&p.location)){const d=ct(r.location.geometry.location);d&&(n=new window.google.maps.LatLng(d.lat,d.lng))}if(n&&r.radius>0){const d=r.radius*bo;s=s.filter(v=>{if(v.lat==null||v.lng==null||isNaN(v.lat)||isNaN(v.lng))return!1;const y=new window.google.maps.LatLng(v.lat,v.lng);try{return window.google.maps.geometry.spherical.computeDistanceBetween(n,y)<=d}catch{return!1}})}let c=[];return n?c=s.map(d=>{if(d.lat!=null&&d.lng!=null&&!isNaN(d.lat)&&!isNaN(d.lng)){const v=new window.google.maps.LatLng(d.lat,d.lng);try{const y=window.google.maps.geometry.spherical.computeDistanceBetween(n,v),E=y*vo;return{...d,distance:y,distanceText:`${E.toFixed(1)} mi`}}catch{return{...d,distanceText:void 0}}}return{...d,distanceText:void 0}}):c=s.map(d=>({...d,distanceText:void 0})),c.some(d=>d.distance!==void 0)&&c.sort((d,v)=>(d.distance??1/0)-(v.distance??1/0)),c}function dt(e){const{allLocations:r,activeProductFilters:s,activeLocationTypes:t,searchLocation:n,currentRadius:c,mapsApiReady:l}=e;return i.useMemo(()=>!r||r.length===0?[]:lt(r,{productFilters:s||{},locationTypes:t||new Set(["farm_stand","cheese_shop"]),location:n,radius:c,mapsApiReady:l}),[r,s,t,n,c,l])}function ut(){const e=mr(),r=ur(),[s]=dr(),{activeProductFilters:t,activeLocationTypes:n}=Ge(),{lastPlaceSelectedByAutocomplete:c,currentRadius:l}=ds(),u=i.useRef(null),f=i.useRef(!0);i.useEffect(()=>{if(f.current){f.current=!1;return}if(!(r.pathname.includes("/")&&r.pathname.split("/").filter(Boolean).length>=2)){if(r.pathname==="/all"){const m=Object.values(t).some(d=>d===!0);if(n.size===_e.length&&!m)return}return u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{const m=ho(n),v=Qo({locationTypes:n,productFilters:t,searchLocation:c,searchRadius:l}).toString(),y=Object.values(t).some(w=>w===!0),E=n.size===_e.length,x=n.size===0;let _;x?_="/not-sure":E&&!y?_="/all":_=m?`/${m}`:"/all",v&&(_+=`?${v}`);const S=`${r.pathname}${r.search}`;_!==S&&e(_,{replace:!0})},300),()=>{u.current&&clearTimeout(u.current)}}},[t,n,c,l,e,s,r.pathname])}let fs=-1;const Fe=e=>{addEventListener("pageshow",r=>{r.persisted&&(fs=r.timeStamp,e(r))},!0)},ne=(e,r,s,t)=>{let n,c;return l=>{r.value>=0&&(l||t)&&(c=r.value-(n??0),(c||n===void 0)&&(n=r.value,r.delta=c,r.rating=((u,f)=>u>f[1]?"poor":u>f[0]?"needs-improvement":"good")(r.value,s),e(r)))}},hr=e=>{requestAnimationFrame(()=>requestAnimationFrame(()=>e()))},fr=()=>{const e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},ke=()=>{const e=fr();return(e==null?void 0:e.activationStart)??0},ie=(e,r=-1)=>{const s=fr();let t="navigate";return fs>=0?t="back-forward-cache":s&&(document.prerendering||ke()>0?t="prerender":document.wasDiscarded?t="restore":s.type&&(t=s.type.replace(/_/g,"-"))),{name:e,value:r,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:t}},rr=new WeakMap;function pr(e,r){return rr.get(e)||rr.set(e,new r),rr.get(e)}class mt{constructor(){ee(this,"t");ee(this,"i",0);ee(this,"o",[])}h(r){var n;if(r.hadRecentInput)return;const s=this.o[0],t=this.o.at(-1);this.i&&s&&t&&r.startTime-t.startTime<1e3&&r.startTime-s.startTime<5e3?(this.i+=r.value,this.o.push(r)):(this.i=r.value,this.o=[r]),(n=this.t)==null||n.call(this,r)}}const Ie=(e,r,s={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const t=new PerformanceObserver(n=>{Promise.resolve().then(()=>{r(n.getEntries())})});return t.observe({type:e,buffered:!0,...s}),t}}catch{}},gr=e=>{let r=!1;return()=>{r||(e(),r=!0)}};let xe=-1;const ps=new Set,Vr=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,ir=e=>{if(document.visibilityState==="hidden"){if(e.type==="visibilitychange")for(const r of ps)r();isFinite(xe)||(xe=e.type==="visibilitychange"?e.timeStamp:0,removeEventListener("prerenderingchange",ir,!0))}},ze=()=>{var e;if(xe<0){const r=ke();xe=(document.prerendering||(e=globalThis.performance.getEntriesByType("visibility-state").filter(t=>t.name==="hidden"&&t.startTime>r)[0])==null?void 0:e.startTime)??Vr(),addEventListener("visibilitychange",ir,!0),addEventListener("prerenderingchange",ir,!0),Fe(()=>{setTimeout(()=>{xe=Vr()})})}return{get firstHiddenTime(){return xe},onHidden(r){ps.add(r)}}},qe=e=>{document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},Mr=[1800,3e3],gs=(e,r={})=>{qe(()=>{const s=ze();let t,n=ie("FCP");const c=Ie("paint",l=>{for(const u of l)u.name==="first-contentful-paint"&&(c.disconnect(),u.startTime<s.firstHiddenTime&&(n.value=Math.max(u.startTime-ke(),0),n.entries.push(u),t(!0)))});c&&(t=ne(e,n,Mr,r.reportAllChanges),Fe(l=>{n=ie("FCP"),t=ne(e,n,Mr,r.reportAllChanges),hr(()=>{n.value=performance.now()-l.timeStamp,t(!0)})}))})},Hr=[.1,.25],ht=(e,r={})=>{const s=ze();gs(gr(()=>{let t,n=ie("CLS",0);const c=pr(r,mt),l=f=>{for(const m of f)c.h(m);c.i>n.value&&(n.value=c.i,n.entries=c.o,t())},u=Ie("layout-shift",l);u&&(t=ne(e,n,Hr,r.reportAllChanges),s.onHidden(()=>{l(u.takeRecords()),t(!0)}),Fe(()=>{c.i=0,n=ie("CLS",0),t=ne(e,n,Hr,r.reportAllChanges),hr(()=>t())}),setTimeout(t))}))};let bs=0,sr=1/0,Ve=0;const ft=e=>{for(const r of e)r.interactionId&&(sr=Math.min(sr,r.interactionId),Ve=Math.max(Ve,r.interactionId),bs=Ve?(Ve-sr)/7+1:0)};let cr;const $r=()=>cr?bs:performance.interactionCount??0,pt=()=>{"interactionCount"in performance||cr||(cr=Ie("event",ft,{type:"event",buffered:!0,durationThreshold:0}))};let Br=0;class gt{constructor(){ee(this,"u",[]);ee(this,"l",new Map);ee(this,"m");ee(this,"p")}v(){Br=$r(),this.u.length=0,this.l.clear()}L(){const r=Math.min(this.u.length-1,Math.floor(($r()-Br)/50));return this.u[r]}h(r){var n,c;if((n=this.m)==null||n.call(this,r),!r.interactionId&&r.entryType!=="first-input")return;const s=this.u.at(-1);let t=this.l.get(r.interactionId);if(t||this.u.length<10||r.duration>s.P){if(t?r.duration>t.P?(t.entries=[r],t.P=r.duration):r.duration===t.P&&r.startTime===t.entries[0].startTime&&t.entries.push(r):(t={id:r.interactionId,entries:[r],P:r.duration},this.l.set(t.id,t),this.u.push(t)),this.u.sort((l,u)=>u.P-l.P),this.u.length>10){const l=this.u.splice(10);for(const u of l)this.l.delete(u.id)}(c=this.p)==null||c.call(this,t)}}}const vs=e=>{const r=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?e():(e=gr(e),addEventListener("visibilitychange",e,{once:!0,capture:!0}),r(()=>{e(),removeEventListener("visibilitychange",e,{capture:!0})}))},Gr=[200,500],bt=(e,r={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const s=ze();qe(()=>{pt();let t,n=ie("INP");const c=pr(r,gt),l=f=>{vs(()=>{for(const p of f)c.h(p);const m=c.L();m&&m.P!==n.value&&(n.value=m.P,n.entries=m.entries,t())})},u=Ie("event",l,{durationThreshold:r.durationThreshold??40});t=ne(e,n,Gr,r.reportAllChanges),u&&(u.observe({type:"first-input",buffered:!0}),s.onHidden(()=>{l(u.takeRecords()),t(!0)}),Fe(()=>{c.v(),n=ie("INP"),t=ne(e,n,Gr,r.reportAllChanges)}))})};class vt{constructor(){ee(this,"m")}h(r){var s;(s=this.m)==null||s.call(this,r)}}const zr=[2500,4e3],yt=(e,r={})=>{qe(()=>{const s=ze();let t,n=ie("LCP");const c=pr(r,vt),l=f=>{r.reportAllChanges||(f=f.slice(-1));for(const m of f)c.h(m),m.startTime<s.firstHiddenTime&&(n.value=Math.max(m.startTime-ke(),0),n.entries=[m],t())},u=Ie("largest-contentful-paint",l);if(u){t=ne(e,n,zr,r.reportAllChanges);const f=gr(()=>{l(u.takeRecords()),u.disconnect(),t(!0)}),m=p=>{p.isTrusted&&(vs(f),removeEventListener(p.type,m,{capture:!0}))};for(const p of["keydown","click","visibilitychange"])addEventListener(p,m,{capture:!0});Fe(p=>{n=ie("LCP"),t=ne(e,n,zr,r.reportAllChanges),hr(()=>{n.value=performance.now()-p.timeStamp,t(!0)})})}})},qr=[800,1800],lr=e=>{document.prerendering?qe(()=>lr(e)):document.readyState!=="complete"?addEventListener("load",()=>lr(e),!0):setTimeout(e)},jt=(e,r={})=>{let s=ie("TTFB"),t=ne(e,s,qr,r.reportAllChanges);lr(()=>{const n=fr();n&&(s.value=Math.max(n.responseStart-ke(),0),s.entries=[n],t(!0),Fe(()=>{s=ie("TTFB",0),t=ne(e,s,qr,r.reportAllChanges),t(!0)}))})};async function Se(e){e.name,e.value,e.rating,e.delta,e.id,e.navigationType}function Nt(){yt(Se),ht(Se),bt(Se),gs(Se),jt(Se)}function Wr(e){"performance"in window&&"mark"in performance&&performance.mark(e)}function xt(){const e=window.location.origin,r=`${e}${window.location.pathname}`;return{title:"phind.us - Find Local Farms, Cheesemongers, Fishmongers & More",description:"Discover fresh, local products from farm stands, cheesemongers, fishmongers, butchers, and antique shops across Maine. Search by location, filter by products, and support local businesses in your community.",keywords:"farm stands, cheesemongers, fishmongers, butchers, antique shops, local produce, farmers market, fresh vegetables, Maine farms, local food, organic produce, artisan cheese, fresh seafood, local meat",ogTitle:"phind.us - Support Local Maine Businesses",ogDescription:"Find the freshest local products from farm stands, cheesemongers, fishmongers, and more near you. Search by location and discover what's available.",ogImage:`${e}/images/og-image.jpg`,ogImageWidth:1200,ogImageHeight:630,ogImageAlt:"phind.us - Map showing local farm stands, cheesemongers, and fishmongers across Maine",ogUrl:r,twitterCard:"summary_large_image",canonicalUrl:r,geoRegion:"US-ME",geoPlacename:"Maine, United States",geoPosition:{lat:43.6591,lng:-70.2568}}}function _t(e){var w,P,b;const r=window.location.origin,s=((w=e.placeDetails)==null?void 0:w.name)||e.Name||"Shop",t=((P=e.placeDetails)==null?void 0:P.formatted_address)||e.Address||"",n=((b=e.placeDetails)==null?void 0:b.rating)||e.Rating,c=t.split(",").map(F=>F.trim()),l=c.length>1?c[c.length-2]:"",u=c.length>0?c[c.length-1]:"",f=[];Object.entries({beef:"beef",pork:"pork",lamb:"lamb",chicken:"chicken",eggs:"eggs",corn:"corn",carrots:"carrots",potatoes:"potatoes",tomatoes:"tomatoes",lettuce:"lettuce",strawberries:"strawberries"}).forEach(([F,I])=>{e[F]&&f.push(I)});const p=f.length>0?`Offering ${f.slice(0,5).join(", ")}${f.length>5?" and more":""}.`:"Fresh local produce available.",d=n&&n!=="N/A"?` Rated ${n} stars.`:"",v=`${s} in ${l}${u?`, ${u}`:""}. ${p}${d} Find directions, hours, and contact information.`,y=te(e.type),E=[s,y.toLowerCase(),l,u,"local produce","fresh vegetables",...f].filter(Boolean).join(", "),x=e.ImageOne?`${r}/images/${e.ImageOne}`:`${r}/images/og-image.jpg`,_=`${r}/farm/${e.slug||e.GoogleProfileID}`,S=l&&u?`${l}, ${u}`:l||u||"Maine, United States";return{title:`${s} - ${y} in ${l}${u?`, ${u}`:""}`,description:v,keywords:E,ogTitle:`${s} - Local ${y}`,ogDescription:v,ogImage:x,ogImageWidth:1200,ogImageHeight:630,ogImageAlt:`${s} - ${y} located in ${l}${u?`, ${u}`:""}`,ogUrl:_,twitterCard:"summary_large_image",canonicalUrl:_,geoRegion:"US-ME",geoPlacename:S,...e.lat&&e.lng&&{geoPosition:{lat:e.lat,lng:e.lng}}}}function Et(){const e=window.location.origin,r={"@context":"https://schema.org","@type":"Organization",name:"phind.us",alternateName:"Phind US - Local Maine Business Finder",url:e,logo:`${e}/images/og-image.jpg`,description:"Discover fresh, local products from farm stands, cheesemongers, fishmongers, butchers, and antique shops across Maine.",address:{"@type":"PostalAddress",addressRegion:"ME",addressCountry:"US"},sameAs:[],areaServed:{"@type":"State",name:"Maine"},serviceType:"Local Business Directory"};return JSON.stringify(r)}function Ft(e){var f,m,p,d,v;const r=window.location.origin,s=((f=e.placeDetails)==null?void 0:f.name)||e.Name||"Shop",t=((m=e.placeDetails)==null?void 0:m.formatted_address)||e.Address||"",n=(p=e.placeDetails)==null?void 0:p.rating,c=(d=e.placeDetails)==null?void 0:d.user_ratings_total,l=te(e.type).toLowerCase(),u={"@context":"https://schema.org","@type":"LocalBusiness","@id":`${r}/farm/${e.slug||e.GoogleProfileID}`,name:s,description:`Local ${l} offering fresh products${t?` in ${t}`:""}`,url:`${r}/farm/${e.slug||e.GoogleProfileID}`,...e.ImageOne&&{image:`${r}/images/${e.ImageOne}`},...e.lat&&e.lng&&{geo:{"@type":"GeoCoordinates",latitude:e.lat,longitude:e.lng}},...t&&{address:{"@type":"PostalAddress",streetAddress:t}},...e.Phone&&{telephone:e.Phone},...n&&n!=="N/A"&&{aggregateRating:{"@type":"AggregateRating",ratingValue:n,...c&&{reviewCount:c}}},...((v=e.placeDetails)==null?void 0:v.opening_hours)&&{openingHoursSpecification:wt(e.placeDetails.opening_hours)}};return JSON.stringify(u)}function wt(e){if(!(e!=null&&e.weekday_text))return[];const r={Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday",Sunday:"Sunday"};return e.weekday_text.map(s=>{const[t,n]=s.split(": "),c=r[t];if(!c||n==="Closed")return null;const l=n.split("â€“").map(u=>u.trim());return{"@type":"OpeningHoursSpecification",dayOfWeek:c,opens:Yr(l[0]),closes:Yr(l[1])}}).filter(Boolean)}function Yr(e){if(!e)return"00:00";const r=e.match(/(\d+):(\d+)\s*(AM|PM)/i);if(!r)return e;let[,s,t,n]=r,c=parseInt(s);return n.toUpperCase()==="PM"&&c!==12?c+=12:n.toUpperCase()==="AM"&&c===12&&(c=0),`${c.toString().padStart(2,"0")}:${t}`}function Kr(e){document.title=e.title;const r=(s,t,n="name")=>{let c=document.querySelector(`meta[${n}="${s}"]`);c||(c=document.createElement("meta"),c.setAttribute(n,s),document.head.appendChild(c)),c.setAttribute("content",t)};if(r("description",e.description),e.keywords&&r("keywords",e.keywords),r("og:title",e.ogTitle||e.title,"property"),r("og:description",e.ogDescription||e.description,"property"),r("og:type","website","property"),r("og:locale","en_US","property"),r("og:site_name","phind.us","property"),e.ogUrl&&r("og:url",e.ogUrl,"property"),e.ogImage&&(r("og:image",e.ogImage,"property"),e.ogImage.startsWith("https://")&&r("og:image:secure_url",e.ogImage,"property"),e.ogImageWidth&&r("og:image:width",String(e.ogImageWidth),"property"),e.ogImageHeight&&r("og:image:height",String(e.ogImageHeight),"property"),e.ogImageAlt&&r("og:image:alt",e.ogImageAlt,"property"),r("og:image:type",e.ogImageType||"image/jpeg","property")),r("twitter:card",e.twitterCard||"summary"),r("twitter:title",e.ogTitle||e.title),r("twitter:description",e.ogDescription||e.description),e.ogImage&&r("twitter:image",e.ogImage),e.canonicalUrl){let s=document.querySelector('link[rel="canonical"]');s||(s=document.createElement("link"),s.rel="canonical",document.head.appendChild(s)),s.href=e.canonicalUrl}if(e.geoRegion&&r("geo.region",e.geoRegion),e.geoPlacename&&r("geo.placename",e.geoPlacename),e.geoPosition){const s=`${e.geoPosition.lat};${e.geoPosition.lng}`;r("geo.position",s),r("ICBM",`${e.geoPosition.lat}, ${e.geoPosition.lng}`)}e.robots&&r("robots",e.robots)}function Pt(e){var c;const r=window.location.origin,s=((c=e.placeDetails)==null?void 0:c.name)||e.Name||"Shop",t=te(e.type),n={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:r},{"@type":"ListItem",position:2,name:t,item:`${r}/${e.type.replace("_","-")}`},{"@type":"ListItem",position:3,name:s,item:`${r}/farm/${e.slug||e.GoogleProfileID}`}]};return JSON.stringify(n)}function Jr(e){document.querySelectorAll('script[type="application/ld+json"]').forEach(t=>t.remove()),(Array.isArray(e)?e:[e]).forEach(t=>{const n=document.createElement("script");n.type="application/ld+json",n.text=t,document.head.appendChild(n)})}const Me=2;class Xr extends i.Component{constructor(s){super(s);ee(this,"handleRetry",()=>{const{retryCount:s}=this.state;s<Me?(this.setState({hasError:!1,error:void 0,retryCount:s+1}),setTimeout(()=>{window.location.reload()},100)):window.location.reload()});this.state={hasError:!1,retryCount:0}}static getDerivedStateFromError(s){var n,c,l;const t=((n=s.message)==null?void 0:n.includes("Failed to fetch dynamically imported module"))||((c=s.message)==null?void 0:c.includes("Importing a module script failed"))||((l=s.message)==null?void 0:l.includes("Loading chunk"))||s.name==="ChunkLoadError";return{hasError:!0,error:s,retryCount:t?0:Me}}componentDidCatch(s,t){console.error("LazyLoadErrorBoundary caught error:",s,t)}render(){if(this.state.hasError){const{componentName:s="component"}=this.props,{retryCount:t}=this.state,n=t<Me;return o.jsxDEV("div",{id:"lazy-load-error-boundary",className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:o.jsxDEV("div",{id:"lazy-load-error-content",className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[o.jsxDEV("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-yellow-100 rounded-full mb-4",children:o.jsxDEV("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/LazyLoadErrorBoundary.tsx",lineNumber:86,columnNumber:17},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/LazyLoadErrorBoundary.tsx",lineNumber:80,columnNumber:15},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/LazyLoadErrorBoundary.tsx",lineNumber:79,columnNumber:13},this),o.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:n?"Loading Issue":"Failed to Load"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/LazyLoadErrorBoundary.tsx",lineNumber:94,columnNumber:13},this),o.jsxDEV("p",{className:"text-gray-600 text-center mb-6",children:n?`We encountered an issue loading the ${s}. This sometimes happens due to network conditions.`:`Unable to load the ${s} after multiple attempts.`},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/LazyLoadErrorBoundary.tsx",lineNumber:97,columnNumber:13},this),this.state.error&&o.jsxDEV("div",{className:"mb-4 p-3 bg-gray-100 rounded text-xs font-mono text-gray-700 overflow-auto max-h-32",children:this.state.error.toString()},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/LazyLoadErrorBoundary.tsx",lineNumber:103,columnNumber:15},this),o.jsxDEV("div",{className:"flex gap-2",children:[o.jsxDEV("button",{id:"lazy-load-retry-button",onClick:this.handleRetry,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:n?`Retry (${t}/${Me})`:"Reload Page"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/LazyLoadErrorBoundary.tsx",lineNumber:108,columnNumber:15},this),n&&o.jsxDEV("button",{id:"lazy-load-home-button",onClick:()=>window.location.href="/",className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2",children:"Go Home"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/LazyLoadErrorBoundary.tsx",lineNumber:116,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/LazyLoadErrorBoundary.tsx",lineNumber:107,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/LazyLoadErrorBoundary.tsx",lineNumber:78,columnNumber:11},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/LazyLoadErrorBoundary.tsx",lineNumber:77,columnNumber:9},this)}return this.props.children}}class Te extends i.Component{constructor(s){super(s);ee(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,t){console.error("[ErrorBoundary] Caught error:",s),console.error("[ErrorBoundary] Error info:",t),this.setState({error:s,errorInfo:t}),this.props.onError&&this.props.onError(s,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:o.jsxDEV("div",{id:"error-boundary-fallback",className:"flex items-center justify-center min-h-[200px] p-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",role:"alert","aria-live":"assertive",children:o.jsxDEV("div",{className:"text-center max-w-md",children:[o.jsxDEV("div",{className:"mb-4",children:o.jsxDEV("svg",{className:"mx-auto h-12 w-12 text-red-500 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:o.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/ErrorBoundary/ErrorBoundary.tsx",lineNumber:90,columnNumber:17},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/ErrorBoundary/ErrorBoundary.tsx",lineNumber:83,columnNumber:15},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/ErrorBoundary/ErrorBoundary.tsx",lineNumber:82,columnNumber:13},this),o.jsxDEV("h2",{id:"error-boundary-heading",className:"text-lg font-semibold text-red-800 dark:text-red-300 mb-2",children:"Something went wrong"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/ErrorBoundary/ErrorBoundary.tsx",lineNumber:99,columnNumber:13},this),o.jsxDEV("p",{id:"error-boundary-message",className:"text-sm text-red-600 dark:text-red-400 mb-4",children:"We encountered an error loading this section. Please try refreshing the page."},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/ErrorBoundary/ErrorBoundary.tsx",lineNumber:103,columnNumber:13},this),o.jsxDEV("button",{id:"error-boundary-retry",onClick:this.handleReset,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors",children:"Try Again"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/ErrorBoundary/ErrorBoundary.tsx",lineNumber:107,columnNumber:13},this),this.state.error&&o.jsxDEV("details",{id:"error-boundary-details",className:"mt-6 text-left",children:[o.jsxDEV("summary",{id:"error-boundary-details-summary",className:"text-sm font-medium text-red-700 dark:text-red-300 cursor-pointer hover:underline",children:"Error Details (Development Only)"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/ErrorBoundary/ErrorBoundary.tsx",lineNumber:118,columnNumber:17},this),o.jsxDEV("pre",{id:"error-boundary-stack-trace",className:"mt-2 p-3 bg-red-100 dark:bg-red-900/40 rounded text-xs overflow-auto max-h-48 text-red-900 dark:text-red-200",children:[o.jsxDEV("div",{id:"error-boundary-error-label",className:"font-semibold mb-2",children:"Error:"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/ErrorBoundary/ErrorBoundary.tsx",lineNumber:122,columnNumber:19},this),this.state.error.toString(),this.state.errorInfo&&o.jsxDEV(o.Fragment,{children:[o.jsxDEV("div",{id:"error-boundary-stack-label",className:"font-semibold mt-3 mb-2",children:"Component Stack:"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/ErrorBoundary/ErrorBoundary.tsx",lineNumber:126,columnNumber:23},this),this.state.errorInfo.componentStack]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/ErrorBoundary/ErrorBoundary.tsx",lineNumber:125,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/ErrorBoundary/ErrorBoundary.tsx",lineNumber:121,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/ErrorBoundary/ErrorBoundary.tsx",lineNumber:117,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/ErrorBoundary/ErrorBoundary.tsx",lineNumber:81,columnNumber:11},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/ErrorBoundary/ErrorBoundary.tsx",lineNumber:80,columnNumber:9},this):this.props.children}}const Ne=({src:e,alt:r,fallbackSrc:s="/images/Flag_of_Maine.svg",width:t,height:n,className:c="",loading:l="lazy",onError:u,priority:f=!1,...m})=>{const[p,d]=i.useState(e),[v,y]=i.useState(!1),[E,x]=i.useState(null);i.useEffect(()=>{(async()=>{const P=new Image;P.onload=P.onerror=function(){x(P.height===2)},P.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"})()},[]);const _=w=>w.endsWith(".svg")||w.endsWith(".webp")?w:w.replace(/\.(jpg|jpeg|png|gif)$/i,".webp"),S=()=>{v||(y(!0),p!==s&&d(s),u&&u())};return E!==!1&&!e.endsWith(".svg")?o.jsxDEV("picture",{children:[o.jsxDEV("source",{type:"image/webp",srcSet:_(e)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/OptimizedImage.tsx",lineNumber:93,columnNumber:9},void 0),o.jsxDEV("source",{type:e.endsWith(".png")?"image/png":e.endsWith(".gif")?"image/gif":"image/jpeg",srcSet:e},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/OptimizedImage.tsx",lineNumber:98,columnNumber:9},void 0),o.jsxDEV("img",{src:v?s:p,alt:r,width:t,height:n,className:c,loading:f?"eager":l,onError:S,...f&&{fetchpriority:"high"},...m},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/OptimizedImage.tsx",lineNumber:107,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/OptimizedImage.tsx",lineNumber:91,columnNumber:7},void 0):o.jsxDEV("img",{src:v?s:p,alt:r,width:t,height:n,className:c,loading:f?"eager":l,onError:S,...f&&{fetchpriority:"high"},...m},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/OptimizedImage.tsx",lineNumber:125,columnNumber:5},void 0)},Dt=({shop:e,displayMode:r,maxProducts:s,showCategories:t=!1,showProductNames:n=!1,showSummary:c=!1,iconSize:l="md",products:u,locationType:f,activeFilters:m={},onProductClick:p})=>{const d=i.useMemo(()=>{var I;if(!e)return{};const b=tr(e.type),F={};for(const A in b){const L=b[A],j=L.category||"Other",D=((I=e.products)==null?void 0:I[A])===!0;F[j]||(F[j]=[]),F[j].push({id:A,name:L.name,icon:D?L.icon_available:L.icon_unavailable,available:D})}return F},[e]),v=i.useMemo(()=>{let b=Object.values(d).flat();return s&&r==="compact"&&(b=b.slice(0,s)),b},[d,s,r]),y={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-10 h-10"};if(r==="filter-selector"&&u){if(t&&f){const b=Rr(f),F={};Object.entries(u).forEach(([A,L])=>{const j=L.category||"Other";F[j]||(F[j]=[]),F[j].push([A,L])});const I=[...b.filter(A=>F[A]),...Object.keys(F).filter(A=>!b.includes(A))];return o.jsxDEV("div",{id:"product-icon-grid-filter",className:"p-3",children:I.map(A=>o.jsxDEV("div",{className:"mb-4 last:mb-0",children:[o.jsxDEV("h3",{id:`product-filter-category-${A.toLowerCase().replace(/\s+/g,"-")}`,className:"text-sm font-semibold text-gray-700 mb-2 capitalize border-b border-gray-200 pb-1",children:A},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:111,columnNumber:15},void 0),o.jsxDEV("div",{className:"grid grid-cols-6 gap-1.5",children:F[A].map(([L,j])=>{const D=!!m[L],g=D?j.icon_available:j.icon_unavailable;return o.jsxDEV("button",{onClick:()=>p==null?void 0:p(L),className:`${y[l]} rounded overflow-hidden border-2 transition-all hover:scale-110 ${D?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:border-gray-400 opacity-70"}`,title:`${j.name}${D?" (active filter)":" (click to filter)"}`,"aria-label":`${D?"Remove":"Add"} ${j.name} filter`,"aria-pressed":D,children:o.jsxDEV(Ne,{src:`/images/icons/${g}`,alt:j.name,className:"w-full h-full object-cover",loading:"lazy"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:132,columnNumber:23},void 0)},L,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:120,columnNumber:21},void 0)})},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:114,columnNumber:15},void 0)]},A,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:110,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:108,columnNumber:9},void 0)}return o.jsxDEV("div",{id:"product-icon-grid-simple",className:"p-2",children:o.jsxDEV("div",{className:"grid grid-cols-6 gap-1.5",children:Object.entries(u).map(([b,F])=>{const I=!!m[b],A=I?F.icon_available:F.icon_unavailable;return o.jsxDEV("button",{onClick:()=>p==null?void 0:p(b),className:`${y[l]} rounded overflow-hidden border-2 transition-all hover:scale-110 ${I?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:border-gray-400 opacity-70"}`,title:`${F.name}${I?" (active filter)":" (click to filter)"}`,"aria-label":`${I?"Remove":"Add"} ${F.name} filter`,"aria-pressed":I,children:o.jsxDEV(Ne,{src:`/images/icons/${A}`,alt:F.name,className:"w-full h-full object-cover",loading:"lazy"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:169,columnNumber:17},void 0)},b,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:157,columnNumber:15},void 0)})},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:151,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:150,columnNumber:7},void 0)}if(!e)return null;const E=Rr(e.type),x=v.filter(b=>b.available).length,_=v.length;if(r==="compact"){if(t){const b=Object.values(d).flat(),F=b.filter(A=>A.available).length,I=b.length;return o.jsxDEV("div",{id:"product-icon-grid-compact",className:"p-2 pb-1 border-b border-gray-200",children:[c&&o.jsxDEV("div",{className:"mb-2 text-xs text-gray-600",children:[F," of ",I," available"]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:202,columnNumber:13},void 0),[...E,...Object.keys(d).filter(A=>!E.includes(A))].filter(A=>{var L;return((L=d[A])==null?void 0:L.length)>0}).map(A=>o.jsxDEV("div",{className:"mb-3 last:mb-0",children:[o.jsxDEV("h4",{id:`product-compact-category-${A.toLowerCase().replace(/\s+/g,"-")}`,className:"text-xs font-semibold text-gray-700 mb-1.5 capitalize",children:A},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:211,columnNumber:17},void 0),o.jsxDEV("div",{className:"grid grid-cols-6 gap-1",children:d[A].map(L=>o.jsxDEV("div",{className:`${y[l]} rounded overflow-hidden border ${L.available?"border-gray-300":"border-gray-200 opacity-50"}`,title:L.name,children:o.jsxDEV(Ne,{src:`/images/icons/${L.icon}`,alt:`${L.name}: ${L.available?"available":"not available"}`,className:"w-full h-full object-cover",loading:"lazy"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:223,columnNumber:23},void 0)},L.id,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:216,columnNumber:21},void 0))},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:214,columnNumber:17},void 0)]},A,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:210,columnNumber:15},void 0))]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:200,columnNumber:9},void 0)}return o.jsxDEV("div",{className:"p-2 pb-1 border-b border-gray-200",children:[c&&o.jsxDEV("div",{className:"mb-2 text-xs text-gray-600",children:[x," of ",_," available"]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:242,columnNumber:11},void 0),o.jsxDEV("div",{className:"grid grid-cols-6 gap-1",children:v.map(b=>o.jsxDEV("div",{className:`${y[l]} rounded overflow-hidden border ${b.available?"border-gray-300":"border-gray-200 opacity-50"}`,title:b.name,children:o.jsxDEV(Ne,{src:`/images/icons/${b.icon}`,alt:`${b.name}: ${b.available?"available":"not available"}`,className:"w-full h-full object-cover",loading:"lazy"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:255,columnNumber:15},void 0)},b.id,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:248,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:246,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:240,columnNumber:7},void 0)}const S=Object.values(d).flat(),w=S.filter(b=>b.available).length,P=S.length;return o.jsxDEV(o.Fragment,{children:[c&&o.jsxDEV("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:o.jsxDEV("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[o.jsxDEV("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:w},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:278,columnNumber:13},void 0)," ","available of"," ",o.jsxDEV("span",{className:"font-semibold",children:P},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:282,columnNumber:13},void 0)," ","total products"]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:277,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:276,columnNumber:9},void 0),t?o.jsxDEV("div",{className:"space-y-2.5",children:[...E,...Object.keys(d).filter(b=>!E.includes(b))].filter(b=>{var F;return((F=d[b])==null?void 0:F.length)>0}).map(b=>o.jsxDEV("div",{children:[o.jsxDEV("h3",{id:`product-detail-category-${b.toLowerCase().replace(/\s+/g,"-")}`,className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1.5 capitalize border-b border-gray-200 dark:border-gray-700 pb-0.5",children:b},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:294,columnNumber:17},void 0),o.jsxDEV("div",{className:"flex flex-wrap gap-1.5",children:d[b].map(F=>o.jsxDEV("div",{className:`flex items-center space-x-1.5 px-2 py-1 rounded text-xs transition-all ${F.available?"bg-gray-100 dark:bg-gray-700 shadow-sm":"bg-gray-50 dark:bg-gray-800 opacity-50"}`,children:[o.jsxDEV(Ne,{src:`/images/icons/${F.icon}`,alt:n?"":`${F.name}: ${F.available?"available":"not available"}`,className:`${y[l]} object-contain`,loading:"lazy"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:307,columnNumber:23},void 0),n&&o.jsxDEV("span",{className:F.available?"text-gray-700 dark:text-gray-300 font-medium":"text-gray-500 dark:text-gray-500",children:[F.name,o.jsxDEV("span",{className:"sr-only",children:[": ",F.available?"available":"not available"]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:316,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:314,columnNumber:25},void 0)]},F.id,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:299,columnNumber:21},void 0))},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:297,columnNumber:17},void 0)]},b,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:293,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:289,columnNumber:9},void 0):o.jsxDEV("div",{className:"flex flex-wrap gap-1.5",children:v.map(b=>o.jsxDEV("div",{className:`flex items-center space-x-1.5 px-2 py-1 rounded text-xs transition-all ${b.available?"bg-gray-100 dark:bg-gray-700 shadow-sm":"bg-gray-50 dark:bg-gray-800 opacity-50"}`,children:[o.jsxDEV(Ne,{src:`/images/icons/${b.icon}`,alt:n?"":`${b.name}: ${b.available?"available":"not available"}`,className:`${y[l]} object-contain`,loading:"lazy"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:336,columnNumber:15},void 0),n&&o.jsxDEV("span",{className:b.available?"text-gray-700 dark:text-gray-300 font-medium":"text-gray-500 dark:text-gray-500",children:[b.name,o.jsxDEV("span",{className:"sr-only",children:[": ",b.available?"available":"not available"]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:345,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:343,columnNumber:17},void 0)]},b.id,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:328,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:326,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductIconGrid.tsx",lineNumber:274,columnNumber:5},void 0)},St=z.memo(Dt),At=({category:e,products:r,locationType:s,isOpen:t,onClose:n,buttonRef:c})=>{const l=i.useRef(null),{activeProductFilters:u,toggleFilter:f}=Ge();i.useEffect(()=>{if(!t)return;const p=d=>{l.current&&!l.current.contains(d.target)&&c.current&&!c.current.contains(d.target)&&n()};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[t,n,c]),i.useEffect(()=>{if(!t)return;const p=d=>{var v;d.key==="Escape"&&(n(),(v=c.current)==null||v.focus())};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[t,n,c]),i.useEffect(()=>{if(t&&l.current){const p=l.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');p.length>0&&p[0].focus()}},[t]);const m=i.useRef(t);return i.useEffect(()=>{var p;m.current&&!t&&((p=c.current)==null||p.focus()),m.current=t},[t,c]),t?o.jsxDEV("div",{id:`product-filter-dropdown-${s}`,ref:l,className:"absolute top-full mt-2 bg-white border border-gray-300 rounded-lg shadow-lg z-50 min-w-[420px]",role:"dialog","aria-label":`${e} product filters`,children:[o.jsxDEV(St,{displayMode:"filter-selector",products:r,locationType:s,activeFilters:u,onProductClick:f,iconSize:"md",showCategories:!0},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Filters/ProductFilterDropdown.tsx",lineNumber:97,columnNumber:7},void 0),o.jsxDEV("div",{className:"px-3 py-2 border-t border-gray-200 bg-gray-50 rounded-b-lg flex justify-end",children:o.jsxDEV("button",{id:`product-filter-close-${s}`,onClick:n,className:"text-xs text-gray-600 hover:text-gray-800 font-medium",children:"Close"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Filters/ProductFilterDropdown.tsx",lineNumber:109,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Filters/ProductFilterDropdown.tsx",lineNumber:108,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Filters/ProductFilterDropdown.tsx",lineNumber:89,columnNumber:5},void 0):null};function Tt(){const[e,r]=i.useState(!1),s=i.useRef(null);return i.useEffect(()=>{const t=s.current;if(!t)return;const n=new IntersectionObserver(([c])=>{r(!c.isIntersecting)},{threshold:0,rootMargin:"0px"});return n.observe(t),()=>{n.disconnect()}},[]),{isCollapsed:e,sentinelRef:s}}const Zr={farm_stand:{emoji:ue("farm_stand"),label:te("farm_stand"),color:"green"},fish_monger:{emoji:ue("fish_monger"),label:te("fish_monger"),color:"blue"},cheese_shop:{emoji:ue("cheese_shop"),label:te("cheese_shop"),color:"yellow"},butcher:{emoji:ue("butcher"),label:te("butcher"),color:"red"},brewery:{emoji:ue("brewery"),label:te("brewery"),color:"amber"},winery:{emoji:ue("winery"),label:te("winery"),color:"purple"},antique_shop:{emoji:ue("antique_shop"),label:te("antique_shop"),color:"gray"},sugar_shack:{emoji:ue("sugar_shack"),label:te("sugar_shack"),color:"orange"}},Ut=()=>{const[e,r]=i.useState(null),s=i.useRef({}),{isCollapsed:t,sentinelRef:n}=Tt(),[c,l]=i.useState(!1),[u,f]=i.useState(!1),[m,p]=i.useState(new Set),d=i.useRef(null),{setSelectedShop:v,closeShopOverlays:y,isFilterDrawerOpen:E,setIsFilterDrawerOpen:x}=hs(),{activeLocationTypes:_,toggleLocationType:S,activeProductFilters:w,toggleFilter:P,clearAllFilters:b}=Ge();i.useEffect(()=>(E?(d.current&&clearTimeout(d.current),l(!0)):c&&(d.current=setTimeout(()=>{l(!1)},350)),()=>{d.current&&clearTimeout(d.current)}),[E,c]),i.useEffect(()=>{if(E&&c){const j=requestAnimationFrame(()=>{f(!0)});return()=>cancelAnimationFrame(j)}else f(!1)},[E,c]);const F=i.useCallback(j=>{j.preventDefault(),v(null),y(),b()},[v,y,b]),I=i.useCallback(()=>{x(!E)},[E,x]),A=i.useCallback(()=>{x(!1)},[x]);i.useEffect(()=>{const j=D=>{D.key==="Escape"&&E&&A()};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[E,A]);const L=i.useCallback(j=>{p(D=>{const g=new Set(D);return g.has(j)?g.delete(j):g.add(j),g})},[]);return o.jsxDEV("header",{id:"site-header",className:`
        absolute top-0 left-0 right-0 z-30 print:hidden
        transition-all duration-300 ease-out
        ${t?"md:py-2":""}
      `,style:{height:t?"3.5rem":"auto"},role:"banner",children:[o.jsxDEV("div",{ref:n,className:"absolute top-0 h-0 w-0 pointer-events-none","aria-hidden":"true"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:145,columnNumber:7},void 0),o.jsxDEV("h1",{id:"site-title",className:"sr-only",children:"phind.us - Local Maine Business Finder"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:148,columnNumber:7},void 0),o.jsxDEV("div",{id:"mobile-header-bar",className:"md:hidden w-full px-3 py-2",children:o.jsxDEV("div",{className:"flex items-center",children:o.jsxDEV("button",{id:"mobile-menu-toggle",onClick:I,className:"cursor-pointer transition-transform duration-300 hover:scale-110 flex-shrink-0 p-2 -m-2 min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":E?"Close menu":"Open menu","aria-expanded":E,children:o.jsxDEV("picture",{children:[o.jsxDEV("source",{srcSet:"/images/logo-300.webp 1x, /images/logo-600.webp 2x",type:"image/webp"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:162,columnNumber:15},void 0),o.jsxDEV("img",{src:"/images/logo-300.webp",alt:"phind.us Logo - Maine Flag",className:"h-8 w-auto object-contain logo-hamburger drop-shadow-lg",fetchPriority:"high",loading:"eager",width:"32",height:"32"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:166,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:161,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:154,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:152,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:151,columnNumber:7},void 0),o.jsxDEV("div",{id:"desktop-header",className:"hidden md:block w-full",children:o.jsxDEV("div",{className:`
          flex flex-col sm:flex-row justify-between items-center py-2 gap-y-2 gap-x-4 w-full px-3 sm:px-4
          transition-opacity duration-300
          ${t?"opacity-0 md:opacity-100 pointer-events-none md:pointer-events-auto":"opacity-100"}
        `,children:o.jsxDEV("nav",{id:"header-controls",className:"flex flex-col sm:flex-row items-center gap-x-4 gap-y-2 px-5 py-3 rounded-2xl flex-wrap",style:{backgroundColor:"#356A78"},"aria-label":"Main navigation and filters",children:[o.jsxDEV("div",{id:"header-logo",className:"flex items-center gap-2 flex-shrink-0",children:o.jsxDEV(Js,{id:"logo-link",to:"/all",onClick:F,className:"cursor-pointer transition-all duration-300 hover:scale-110 hover:-rotate-2 hover:drop-shadow-xl",style:{transformStyle:"preserve-3d"},title:"phind.us - Reset Filters","aria-label":"phind.us Home - Reset Filters",children:o.jsxDEV("picture",{children:[o.jsxDEV("source",{srcSet:"/images/logo-300.webp 1x, /images/logo-600.webp 2x",type:"image/webp"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:201,columnNumber:19},void 0),o.jsxDEV("img",{src:"/images/logo-300.webp",alt:"phind.us Logo - Maine Flag",className:"h-8 sm:h-10 w-auto object-contain",fetchPriority:"high",loading:"eager",width:"40",height:"40"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:205,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:200,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:191,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:190,columnNumber:13},void 0),o.jsxDEV("div",{id:"location-type-filters",className:"flex items-center gap-3 flex-wrap",role:"group","aria-label":"Location type filters",children:o.jsxDEV("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(Zr).filter(([j])=>_e.includes(j)).map(([j,D])=>{const g=_.has(j),R=e===j,T=D.disabled===!0;s.current[j]||(s.current[j]=z.createRef());const C=T?"bg-gray-200 text-gray-500 opacity-50 cursor-not-allowed":{green:g?"bg-green-100 text-green-700 hover:bg-green-400 hover:text-black":"bg-gray-100 text-gray-600 hover:bg-green-200 hover:text-black border border-green-400",yellow:g?"bg-yellow-100 text-yellow-700 hover:bg-yellow-400 hover:text-black":"bg-gray-100 text-gray-600 hover:bg-yellow-200 hover:text-black border border-yellow-400",blue:g?"bg-blue-100 text-blue-700 hover:bg-blue-400 hover:text-black":"bg-gray-100 text-gray-600 hover:bg-blue-200 hover:text-black border border-blue-400",red:g?"bg-red-100 text-red-700 hover:bg-red-400 hover:text-black":"bg-gray-100 text-gray-600 hover:bg-red-200 hover:text-black border border-red-400",purple:g?"bg-purple-100 text-purple-700 hover:bg-purple-400 hover:text-black":"bg-gray-100 text-gray-600 hover:bg-purple-200 hover:text-black border border-purple-400",amber:g?"bg-amber-100 text-amber-700 hover:bg-amber-400 hover:text-black":"bg-gray-100 text-gray-600 hover:bg-amber-200 hover:text-black border border-amber-400",rose:g?"bg-rose-100 text-rose-700 hover:bg-rose-400 hover:text-black":"bg-gray-100 text-gray-600 hover:bg-rose-200 hover:text-black border border-rose-400",orange:g?"bg-orange-100 text-orange-700 hover:bg-orange-400 hover:text-black":"bg-gray-100 text-gray-600 hover:bg-orange-200 hover:text-black border border-orange-400",teal:g?"bg-teal-100 text-teal-700 hover:bg-teal-400 hover:text-black":"bg-gray-100 text-gray-600 hover:bg-teal-200 hover:text-black border border-teal-400",gray:g?"bg-gray-100 text-gray-700 hover:bg-gray-400 hover:text-black":"bg-gray-100 text-gray-600 hover:bg-gray-200 hover:text-black border border-gray-400"}[D.color];return o.jsxDEV("div",{className:"relative",children:[o.jsxDEV("div",{className:`flex items-center rounded-full overflow-hidden transition-all duration-200 ${C}`,children:[o.jsxDEV("button",{id:`location-type-btn-${j}`,type:"button",onClick:()=>!T&&S(j),disabled:T,className:"text-xs pl-3 pr-2 py-2.5 min-h-[44px] font-medium whitespace-nowrap flex items-center gap-1 flex-shrink-0 transition-all duration-200",title:T?`${D.label} (Coming Soon)`:`${g?"Hide":"Show"} ${D.label}`,"aria-label":T?`${D.label} (Coming Soon)`:`${g?"Hide":"Show"} ${D.label} locations`,"aria-pressed":g,"aria-disabled":T,children:[D.emoji," ",D.label]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:276,columnNumber:23},void 0),g&&!T&&o.jsxDEV("button",{id:`location-type-dropdown-btn-${j}`,ref:s.current[j],type:"button",onClick:G=>{G.stopPropagation(),r(R?null:j)},className:"text-xs px-3 py-2.5 min-h-[44px] min-w-[44px] flex items-center justify-center transition-colors hover:opacity-80",title:`${D.label} product filters`,"aria-label":`Open ${D.label} product filters`,"aria-expanded":R,"aria-haspopup":"true",children:o.jsxDEV("svg",{className:`w-4 h-4 transition-transform ${R?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:o.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:313,columnNumber:29},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:306,columnNumber:27},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:292,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:274,columnNumber:21},void 0),g&&!T&&o.jsxDEV(At,{category:D.label,products:tr(j),locationType:j,isOpen:R,onClose:()=>r(null),buttonRef:s.current[j]},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:320,columnNumber:23},void 0)]},j,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:273,columnNumber:19},void 0)})},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:220,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:219,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:188,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:182,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:181,columnNumber:7},void 0),c&&o.jsxDEV(o.Fragment,{children:[o.jsxDEV("div",{id:"mobile-drawer-backdrop",className:`
              md:hidden fixed left-0 right-0 bottom-0 bg-black pointer-events-auto
              transition-opacity duration-[350ms] ease-out
              ${u?"opacity-70":"opacity-0"}
            `,onClick:A,"aria-hidden":"true",style:{top:"3.5rem",zIndex:9998,touchAction:"none"}},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:343,columnNumber:11},void 0),o.jsxDEV("div",{id:"mobile-filter-drawer",className:`
              md:hidden fixed left-0 right-0
              bg-white dark:bg-gray-800
              shadow-lg rounded-b-2xl
              transition-transform duration-[350ms] ease-out
              overflow-y-auto overscroll-contain
              ${u?"translate-y-0":"-translate-y-full"}
            `,style:{top:"3.5rem",height:"calc(100vh - 3.5rem - 2rem)",zIndex:9999,WebkitOverflowScrolling:"touch"},role:"dialog","aria-modal":"true","aria-label":"Filter menu",children:o.jsxDEV("div",{className:"p-3 min-h-full",children:[o.jsxDEV("h2",{id:"mobile-filter-heading",className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2 px-1",children:"FILTER BY TYPE"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:377,columnNumber:15},void 0),o.jsxDEV("div",{id:"mobile-location-types",className:"space-y-1",children:Object.entries(Zr).filter(([j])=>_e.includes(j)).map(([j,D])=>{const g=_.has(j),R=D.disabled===!0,T=m.has(j),U=tr(j),C={green:g?"bg-green-100":"bg-gray-100 dark:bg-gray-700",yellow:g?"bg-yellow-100":"bg-gray-100 dark:bg-gray-700",blue:g?"bg-blue-100":"bg-gray-100 dark:bg-gray-700",red:g?"bg-red-100":"bg-gray-100 dark:bg-gray-700",purple:g?"bg-purple-100":"bg-gray-100 dark:bg-gray-700",amber:g?"bg-amber-100":"bg-gray-100 dark:bg-gray-700",rose:g?"bg-rose-100":"bg-gray-100 dark:bg-gray-700",orange:g?"bg-orange-100":"bg-gray-100 dark:bg-gray-700",teal:g?"bg-teal-100":"bg-gray-100 dark:bg-gray-700",gray:g?"bg-gray-100":"bg-gray-100 dark:bg-gray-700"},G=g?{green:"text-green-700",yellow:"text-yellow-700",blue:"text-blue-700",red:"text-red-700",purple:"text-purple-700",amber:"text-amber-700",rose:"text-rose-700",orange:"text-orange-700",teal:"text-teal-700",gray:"text-gray-700"}[D.color]:"text-gray-600 dark:text-gray-300";return o.jsxDEV("div",{className:"w-full",children:[o.jsxDEV("button",{id:`mobile-location-type-btn-${j}`,type:"button",onClick:()=>!R&&S(j),disabled:R,className:`
                          w-full flex items-center justify-between
                          px-4 py-3 rounded-lg
                          transition-all duration-200
                          ${C[D.color]} ${G}
                          ${R?"opacity-50 cursor-not-allowed":"hover:shadow-md active:scale-[0.98]"}
                        `,"aria-pressed":g,children:[o.jsxDEV("span",{className:"font-medium text-sm flex items-center gap-2",children:[o.jsxDEV("span",{className:"text-lg",children:D.emoji},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:437,columnNumber:27},void 0),D.label]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:436,columnNumber:25},void 0),g&&!R&&o.jsxDEV("button",{id:`mobile-location-expand-btn-${j}`,type:"button",onClick:H=>{H.stopPropagation(),L(j)},className:"p-3 -m-1 hover:bg-white/20 rounded transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":`${T?"Hide":"Show"} ${D.label} products`,"aria-expanded":T,children:o.jsxDEV("svg",{className:`w-5 h-5 transition-transform duration-200 ${T?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:460,columnNumber:31},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:454,columnNumber:29},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:443,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:422,columnNumber:23},void 0),g&&!R&&T&&Object.keys(U).length>0&&o.jsxDEV("div",{className:"mt-1 bg-white dark:bg-gray-700 rounded-lg p-3 animate-slideDown",role:"region","aria-labelledby":`${j}-accordion`,children:o.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:Object.values(U).map(H=>{const J=w[H.csvHeader]===!0;return o.jsxDEV("button",{id:`mobile-product-filter-${H.csvHeader}`,type:"button",onClick:()=>P(H.csvHeader),className:`
                                    px-3 py-2 rounded-md text-xs font-medium
                                    transition-all duration-200
                                    ${J?"bg-blue-600 text-white shadow-sm":"bg-gray-100 text-gray-700 dark:bg-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-500"}
                                  `,"aria-pressed":J,children:H.name},H.csvHeader,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:477,columnNumber:33},void 0)})},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:473,columnNumber:27},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:468,columnNumber:25},void 0)]},j,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:420,columnNumber:21},void 0)})},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:382,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:376,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:356,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:341,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Header/Header.tsx",lineNumber:131,columnNumber:5},void 0)},kt=i.lazy(()=>Ee(()=>import("./MapComponent-TLIGZRhe.js"),__vite__mapDeps([0,1]))),It=i.lazy(()=>Ee(()=>import("./MapSearchControls-BBiISNAr.js"),__vite__mapDeps([2,1,3]))),Ct=i.lazy(()=>Ee(()=>import("./CardListings-BxrVIXDs.js"),__vite__mapDeps([4,1,5,6]))),Rt=i.lazy(()=>Ee(()=>import("./MobileBottomSheet-CFqLZWtB.js"),__vite__mapDeps([7,1,5]))),Lt=i.lazy(()=>Ee(()=>import("./ShopDetails-BkVS_MFO.js"),__vite__mapDeps([8,1,6,9]))),Ot=i.lazy(()=>Ee(()=>import("./ShopSocials-rXllifo-.js"),__vite__mapDeps([10,1,9])));function Vt(){const e=mr(),r=ur(),{allLocations:s,setCurrentlyDisplayedLocations:t}=is(),{lastPlaceSelectedByAutocomplete:n,currentRadius:c,mapsApiReady:l,setLastPlaceSelectedByAutocompleteAndCookie:u,setMapViewTargetLocation:f}=ds(),{activeProductFilters:m,activeLocationTypes:p}=Ge(),{selectedShop:d,isShopDetailsOpen:v,isShopSocialsOpen:y,shouldRenderShopDetails:E,shouldRenderShopSocials:x,isShopDetailsAnimatedOpen:_,isShopSocialsAnimatedOpen:S,openShopOverlays:w,closeShopOverlays:P,setSelectedShop:b,isFilterDrawerOpen:F,setIsManuallyCollapsed:I}=hs(),[A,L]=z.useState(window.innerWidth<768);i.useEffect(()=>{Nt(),Wr("app-initialized")},[]),i.useEffect(()=>{const D=()=>{L(window.innerWidth<768)};return window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]),i.useEffect(()=>{s&&s.length>0&&(s.length,Wr("shops-data-ready"))},[s]),ut();const j=dt({allLocations:s,activeProductFilters:m,activeLocationTypes:p,searchLocation:n,currentRadius:c,mapsApiReady:l});return i.useEffect(()=>{t(j)},[j,t]),i.useEffect(()=>{var g,R;if(r.pathname.match(/^\/(farm-stand|cheesemonger|fishmonger|butcher|antique-shop|brewery|winery|sugar-shack)\/(.+)/)&&d&&n===null&&l){if(cs(He))return;const U=((g=d.placeDetails)==null?void 0:g.formatted_address)||d.Address;if(d.lat&&d.lng&&U){const C={formatted_address:U,geometry:{location:new google.maps.LatLng(d.lat,d.lng)},name:((R=d.placeDetails)==null?void 0:R.name)||d.Name};u(C,U),f(C)}}},[r.pathname,d,n,l,u,f]),i.useEffect(()=>{const D=r.pathname.match(/^\/(farm-stand|cheesemonger|fishmonger|butcher|antique-shop|brewery|winery|sugar-shack)\/(.+)/);if(D&&D[2]){const g=D[2];if(!s||s.length===0)return;const T=j.find(U=>U.slug===g)||j.find(U=>U.GoogleProfileID===g)||s.find(U=>U.slug===g)||s.find(U=>U.GoogleProfileID===g);T?!d||d.slug!==T.slug&&d.GoogleProfileID!==T.GoogleProfileID?(b(T),I(!1),A||w(T)):!v&&!y&&!A&&w(d):(e("/",{replace:!0}),(v||y)&&P(),d&&b(null))}else r.pathname==="/"||Cr(r.pathname)?(v||y)&&P():!d&&r.pathname.match(/^\/(farm-stand|cheesemonger|fishmonger|butcher|antique-shop|brewery|winery|sugar-shack)\//)&&s&&s.length>0&&(e("/",{replace:!0}),(v||y)&&P())},[r.pathname,s,j,d,v,y,w,P,b,e,A,I]),i.useEffect(()=>{const D=g=>{if(g.key==="Escape"&&(v||y)){P();const R=r.search;e(`/all${R}`,{replace:!0})}};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[v,y,P,e,r.search]),i.useEffect(()=>{if(r.pathname.match(/^\/farm\/(.+)/)&&d){const g=_t(d);Kr(g);const R=Ft(d),T=Pt(d);Jr([R,T])}else if(r.pathname==="/"||Cr(r.pathname)){const g=xt();Kr(g);const R=Et();Jr(R)}},[r.pathname,d]),o.jsxDEV("div",{id:"app-container",className:"h-screen flex flex-col",children:[o.jsxDEV("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:bg-blue-600 focus:text-white focus:px-4 focus:py-2 focus:rounded-md focus:shadow-lg",children:"Skip to main content"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:247,columnNumber:7},this),o.jsxDEV(Te,{children:o.jsxDEV(Ut,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:254,columnNumber:9},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:253,columnNumber:7},this),o.jsxDEV("main",{id:"main-content",className:"flex-grow flex overflow-hidden",role:"main",children:[o.jsxDEV(Te,{children:o.jsxDEV(i.Suspense,{fallback:o.jsxDEV("div",{className:"flex-1 bg-gray-100","aria-label":"Loading map"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:258,columnNumber:31},this),children:o.jsxDEV("div",{className:"flex-1 relative",children:[l?o.jsxDEV(kt,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:260,columnNumber:31},this):o.jsxDEV("div",{className:"w-full h-full bg-gray-100","aria-label":"Loading map"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:260,columnNumber:50},this),l&&o.jsxDEV(i.Suspense,{fallback:null,children:o.jsxDEV(It,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:264,columnNumber:19},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:263,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:259,columnNumber:13},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:258,columnNumber:11},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:257,columnNumber:9},this),o.jsxDEV(Te,{children:o.jsxDEV(i.Suspense,{fallback:o.jsxDEV("div",{className:"hidden md:block md:w-2/5 lg:w-1/3 p-4 bg-white/80 animate-pulse z-10"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:272,columnNumber:31},this),children:o.jsxDEV("div",{className:"hidden md:block",children:o.jsxDEV(Ct,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:274,columnNumber:15},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:273,columnNumber:13},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:272,columnNumber:11},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:271,columnNumber:9},this),A&&!F&&o.jsxDEV(Te,{children:o.jsxDEV(i.Suspense,{fallback:null,children:o.jsxDEV(Rt,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:283,columnNumber:15},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:282,columnNumber:13},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:281,columnNumber:11},this),!A&&E&&d&&o.jsxDEV(Xr,{componentName:"shop details",children:o.jsxDEV(i.Suspense,{fallback:o.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxDEV("div",{className:"text-white",children:"Loading..."},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:291,columnNumber:125},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:291,columnNumber:33},this),children:o.jsxDEV(Lt,{shop:d,isOpen:_,onClose:()=>{P();const D=r.search;e(`/all${D}`,{replace:!0})}},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:292,columnNumber:15},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:291,columnNumber:13},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:290,columnNumber:11},this),!A&&x&&d&&o.jsxDEV(Xr,{componentName:"social media",children:o.jsxDEV(i.Suspense,{fallback:o.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxDEV("div",{className:"text-white",children:"Loading..."},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:309,columnNumber:125},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:309,columnNumber:33},this),children:o.jsxDEV(Ot,{shop:d,isOpen:S,onClose:()=>{P();const D=r.search;e(`/all${D}`,{replace:!0})}},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:310,columnNumber:15},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:309,columnNumber:13},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:308,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:256,columnNumber:7},this),o.jsxDEV(Xs,{children:[o.jsxDEV($,{path:"/",element:o.jsxDEV(le,{to:"/not-sure",replace:!0},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:328,columnNumber:36},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:328,columnNumber:11},this),o.jsxDEV($,{path:"/farms",element:o.jsxDEV(le,{to:"/farm-stand",replace:!0},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:331,columnNumber:41},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:331,columnNumber:11},this),o.jsxDEV($,{path:"/cheese",element:o.jsxDEV(le,{to:"/cheesemonger",replace:!0},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:332,columnNumber:42},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:332,columnNumber:11},this),o.jsxDEV($,{path:"/fish",element:o.jsxDEV(le,{to:"/fishmonger",replace:!0},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:333,columnNumber:40},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:333,columnNumber:11},this),o.jsxDEV($,{path:"/butchers",element:o.jsxDEV(le,{to:"/butcher",replace:!0},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:334,columnNumber:44},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:334,columnNumber:11},this),o.jsxDEV($,{path:"/antiques",element:o.jsxDEV(le,{to:"/antique-shop",replace:!0},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:335,columnNumber:44},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:335,columnNumber:11},this),o.jsxDEV($,{path:"/breweries",element:o.jsxDEV(le,{to:"/brewery",replace:!0},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:336,columnNumber:45},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:336,columnNumber:11},this),o.jsxDEV($,{path:"/wineries",element:o.jsxDEV(le,{to:"/winery",replace:!0},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:337,columnNumber:44},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:337,columnNumber:11},this),o.jsxDEV($,{path:"/sugar-shacks",element:o.jsxDEV(le,{to:"/sugar-shack",replace:!0},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:338,columnNumber:48},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:338,columnNumber:11},this),o.jsxDEV($,{path:"/all",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:342,columnNumber:39},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:342,columnNumber:11},this),o.jsxDEV($,{path:"/not-sure",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:343,columnNumber:44},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:343,columnNumber:11},this),o.jsxDEV($,{path:"/farm-stand",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:344,columnNumber:46},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:344,columnNumber:11},this),o.jsxDEV($,{path:"/cheesemonger",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:345,columnNumber:48},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:345,columnNumber:11},this),o.jsxDEV($,{path:"/fishmonger",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:346,columnNumber:46},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:346,columnNumber:11},this),o.jsxDEV($,{path:"/butcher",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:347,columnNumber:43},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:347,columnNumber:11},this),o.jsxDEV($,{path:"/antique-shop",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:348,columnNumber:48},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:348,columnNumber:11},this),o.jsxDEV($,{path:"/brewery",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:349,columnNumber:43},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:349,columnNumber:11},this),o.jsxDEV($,{path:"/winery",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:350,columnNumber:42},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:350,columnNumber:11},this),o.jsxDEV($,{path:"/sugar-shack",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:351,columnNumber:47},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:351,columnNumber:11},this),o.jsxDEV($,{path:"/:types",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:354,columnNumber:42},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:354,columnNumber:11},this),o.jsxDEV($,{path:"/farm-stand/:slug",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:357,columnNumber:52},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:357,columnNumber:11},this),o.jsxDEV($,{path:"/cheesemonger/:slug",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:358,columnNumber:54},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:358,columnNumber:11},this),o.jsxDEV($,{path:"/fishmonger/:slug",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:359,columnNumber:52},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:359,columnNumber:11},this),o.jsxDEV($,{path:"/butcher/:slug",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:360,columnNumber:49},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:360,columnNumber:11},this),o.jsxDEV($,{path:"/antique-shop/:slug",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:361,columnNumber:54},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:361,columnNumber:11},this),o.jsxDEV($,{path:"/brewery/:slug",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:362,columnNumber:49},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:362,columnNumber:11},this),o.jsxDEV($,{path:"/winery/:slug",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:363,columnNumber:48},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:363,columnNumber:11},this),o.jsxDEV($,{path:"/sugar-shack/:slug",element:o.jsxDEV(z.Fragment,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:364,columnNumber:53},this)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:364,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:326,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/App.tsx",lineNumber:245,columnNumber:5},this)}const ys=i.createContext(void 0),Mt=({children:e})=>{const{showError:r}=Be(),[s,t]=i.useState(null),[n,c]=i.useState(null),[l,u]=i.useState(!1),f=i.useRef(null),m=i.useRef(""),p=i.useCallback(()=>{t(null),c(null),u(!1),f.current=null,m.current=""},[]),d=i.useCallback(async(y,E)=>{var b,F;if(!(window.googleMapsApiLoaded&&((F=(b=window.google)==null?void 0:b.maps)==null?void 0:F.DirectionsService))){const I="Directions service is not available right now.";c(I),u(!1),r(I);return}const _=`${JSON.stringify(y)}-${JSON.stringify(E)}`;if(f.current&&m.current===_)return f.current;f.current=null,m.current=_,u(!0),t(null),c(null);const S=new window.google.maps.DirectionsService,w={origin:y,destination:E,travelMode:window.google.maps.TravelMode.DRIVING},P=(async()=>{try{const I=await S.route(w);if(I.status==="OK")t(I);else{const A=Ue(I.status),L=$e(A);Ir(I.status,"Directions (DirectionsService)"),c(L),r(L)}}catch(I){const A=I instanceof Error?I.message:"An error occurred while fetching directions.";Ir(A,"Directions (DirectionsService)");const L=Ue(A),j=$e(L);c(j),r(j)}finally{u(!1),f.current=null}})();return f.current=P,P},[r]),v=i.useMemo(()=>({directionsResult:s,directionsError:n,isFetchingDirections:l,fetchAndDisplayDirections:d,clearDirections:p}),[s,n,l,d,p]);return o.jsxDEV(ys.Provider,{value:v,children:e},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/DirectionsContext.tsx",lineNumber:117,columnNumber:10},void 0)},Ua=()=>{const e=i.useContext(ys);if(e===void 0)throw new Error("useDirections must be used within a DirectionsProvider");return e};function Ht(e,r){const s=e.map(n=>n.shop.slug).join(","),t=new URLSearchParams;return t.set("trip",s),r&&t.set("opt","1"),`?${t.toString()}`}function $t(e){const r=e.get("trip");if(!r)return null;const s=r.split(",").filter(n=>n.trim().length>0),t=e.get("opt")==="1";return{slugs:s,isOptimized:t}}function Bt(e,r){const s={stopSlugs:e.map(t=>t.shop.slug),isOptimizedRoute:r,timestamp:Date.now()};localStorage.setItem("phindus_trip_planner",JSON.stringify(s))}function Gt(){try{const e=localStorage.getItem("phindus_trip_planner");return e?JSON.parse(e):null}catch(e){return console.error("Failed to load trip from localStorage:",e),null}}function zt(){localStorage.removeItem("phindus_trip_planner")}const Qr={log:(...e)=>{console.log(...e)},warn:(...e)=>{console.warn(...e)},error:(...e)=>{console.error(...e)},info:(...e)=>{console.info(...e)},time:e=>{console.time(e)},timeEnd:e=>{console.timeEnd(e)},group:e=>{console.group(e)},groupEnd:()=>{console.groupEnd()}},js=i.createContext(void 0),qt=({children:e})=>{const[r,s]=i.useState([]),[t,n]=i.useState(!1),[c,l]=i.useState(null),[u,f]=i.useState(!1),[m,p]=i.useState(!1),[d,v]=i.useState(null),{showToast:y}=Be(),{allLocations:E}=is(),x=i.useRef(!1),_=()=>`stop_${Date.now()}_${Math.random()}`;i.useEffect(()=>{if(x.current||!E||E.length===0)return;x.current=!0;const g=new URLSearchParams(window.location.search),R=$t(g);if(R&&R.slugs.length>0){const U=[];R.slugs.forEach((C,G)=>{const H=E.find(J=>J.slug===C);H&&U.push({shop:H,order:G,id:_()})}),U.length>0&&(s(U),f(R.isOptimized),n(!0),y("Trip loaded from URL","success"));return}const T=Gt();if(T&&T.stopSlugs.length>0){const U=[];T.stopSlugs.forEach((C,G)=>{const H=E.find(J=>J.slug===C);H&&U.push({shop:H,order:G,id:_()})}),U.length>0&&(s(U),f(T.isOptimizedRoute),Qr.log("[Trip Planner] Loaded trip from localStorage:",U.length,"stops"))}},[E,y]),i.useEffect(()=>{x.current&&r.length>0&&Bt(r,u)},[r,u]);const S=i.useCallback(g=>{const R=r.some(C=>C.shop.slug===g.slug),T=r.length>=10;if(R){y(`${g.Name} is already in your trip`,"info");return}if(T){y("Maximum 10 stops allowed per trip","error");return}const U={shop:g,order:r.length,id:_()};s(C=>[...C,U]),y(`Added ${g.Name} to trip`,"success"),r.length===0&&n(!0)},[r,y]),w=i.useCallback(g=>{s(R=>R.filter(U=>U.id!==g).map((U,C)=>({...U,order:C}))),l(null),y("Stop removed from trip","success")},[y]),P=i.useCallback((g,R)=>{s(T=>{const U=Array.from(T),[C]=U.splice(g,1);return U.splice(R,0,C),U.map((G,H)=>({...G,order:H}))}),l(null)},[]),b=i.useCallback(()=>{f(g=>!g),l(null),y(u?"Route optimization disabled":"Route optimization enabled","info")},[u,y]),F=i.useCallback(async g=>{var T,U;if(r.length===0){y("Add at least one stop to calculate route","error");return}const R=r.filter(C=>!C.shop.lat||!C.shop.lng);if(R.length>0){const C=R.map(G=>G.shop.Name).join(", ");y(`Cannot calculate route: Missing coordinates for ${C}`,"error");return}if(r.length>25){y("Too many stops. Google Maps allows a maximum of 25 waypoints.","error");return}p(!0),v(null);try{const C=r.slice(0,-1).map(Q=>({lat:Q.shop.lat,lng:Q.shop.lng})),G={lat:r[r.length-1].shop.lat,lng:r[r.length-1].shop.lng},H=new URLSearchParams;typeof g=="string"?H.set("origin",g):H.set("origin",`${g.lat},${g.lng}`),H.set("destination",`${G.lat},${G.lng}`),C.length>0&&H.set("waypoints",JSON.stringify(C)),u&&H.set("optimizeWaypoints","true"),Qr.log("[Trip Planner] Calculating route with",C.length,"waypoints",u?"(optimized)":"(in order)");const J=await fetch(`/api/directions?${H.toString()}`,{signal:AbortSignal.timeout(3e4)});if(!J.ok){const Q=await J.json().catch(()=>({error:"Failed to calculate route"}));throw new Error(Q.error||"Failed to calculate route")}const W=await J.json();if(W.status==="OK"&&W.routes&&W.routes.length>0){l(W);const Q=W.routes[0],he=((T=Q.legs)==null?void 0:T.reduce((de,ae)=>{var oe;return de+(((oe=ae.distance)==null?void 0:oe.value)||0)},0))||0,fe=((U=Q.legs)==null?void 0:U.reduce((de,ae)=>{var oe;return de+(((oe=ae.duration)==null?void 0:oe.value)||0)},0))||0,pe=(he/1609.34).toFixed(1),be=Math.round(fe/60);y(`Route calculated: ${pe} miles, ${be} min`,"success")}else throw W.status==="ZERO_RESULTS"?new Error("No route found between these locations. Try reordering stops or checking addresses."):W.status==="MAX_WAYPOINTS_EXCEEDED"?new Error("Too many waypoints. Please reduce the number of stops in your trip."):W.status==="INVALID_REQUEST"?new Error("Invalid route request. Please check your starting location and stops."):W.status==="REQUEST_DENIED"?new Error("Route request was denied. Please contact support."):W.status==="OVER_QUERY_LIMIT"?new Error("Too many requests. Please try again in a moment."):W.status==="UNKNOWN_ERROR"?new Error("Server error calculating route. Please try again."):new Error(W.status||"No route found")}catch(C){let G="Failed to calculate trip route";C instanceof Error&&(C.name==="TimeoutError"||C.name==="AbortError"?G="Route calculation timed out. Please try again.":G=C.message),v(G),y(G,"error"),console.error("[Trip Planner] Error calculating route:",C)}finally{p(!1)}},[r,u,y]),I=i.useCallback(()=>{s([]),l(null),v(null),f(!1),zt();const g=new URL(window.location.href);g.searchParams.delete("trip"),g.searchParams.delete("opt"),window.history.replaceState({},"",g.toString()),y("Trip cleared","success")},[y]),A=i.useCallback(()=>{n(g=>!g)},[]),L=i.useCallback(g=>r.some(R=>R.shop.slug===g),[r]),j=i.useCallback(()=>{const g=Ht(r,u);return`${window.location.origin}${window.location.pathname}${g}`},[r,u]),D={tripStops:r,isTripMode:t,tripDirectionsResult:c,isOptimizedRoute:u,isFetchingTripRoute:m,tripError:d,addStopToTrip:S,removeStopFromTrip:w,reorderStops:P,toggleRouteOptimization:b,calculateTripRoute:F,clearTrip:I,toggleTripMode:A,isShopInTrip:L,getTripShareUrl:j};return o.jsxDEV(js.Provider,{value:D,children:e},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/TripPlannerContext.tsx",lineNumber:356,columnNumber:5},void 0)},ka=()=>{const e=i.useContext(js);if(!e)throw new Error("useTripPlanner must be used within TripPlannerProvider");return e},Wt=({children:e})=>o.jsxDEV(Mo,{children:o.jsxDEV(Ho,{children:o.jsxDEV(et,{children:o.jsxDEV(nt,{children:o.jsxDEV(it,{children:o.jsxDEV(Mt,{children:o.jsxDEV(qt,{children:e},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/AppProviders.tsx",lineNumber:27,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/AppProviders.tsx",lineNumber:26,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/AppProviders.tsx",lineNumber:25,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/AppProviders.tsx",lineNumber:24,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/AppProviders.tsx",lineNumber:23,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/AppProviders.tsx",lineNumber:22,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/contexts/AppProviders.tsx",lineNumber:21,columnNumber:5},void 0);Go().catch(()=>{});const es=document.getElementById("root");es&&oo.createRoot(es).render(o.jsxDEV(z.StrictMode,{children:o.jsxDEV(Te,{children:o.jsxDEV(Zs,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:o.jsxDEV(Wt,{children:o.jsxDEV(Vt,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/main.tsx",lineNumber:33,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/main.tsx",lineNumber:32,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/main.tsx",lineNumber:26,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/main.tsx",lineNumber:25,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/main.tsx",lineNumber:24,columnNumber:5},void 0));export{Rr as $,ca as A,oo as B,fa as C,la as D,bo as E,ga as F,pa as G,Ta as H,Fa as I,go as J,ea as K,aa as L,ba as M,ta as N,Da as O,St as P,na as Q,_a as R,va as S,ia as T,Zt as U,Ne as V,Aa as W,Xt as X,te as Y,ue as Z,tr as _,Pa as a,Be as a0,ds as b,hs as c,Ua as d,Ge as e,ka as f,da as g,ua as h,ma as i,o as j,Jt as k,Qo as l,po as m,oa as n,sa as o,ra as p,wa as q,Qt as r,ha as s,ya as t,is as u,xa as v,Na as w,Ea as x,ja as y,Sa as z};
