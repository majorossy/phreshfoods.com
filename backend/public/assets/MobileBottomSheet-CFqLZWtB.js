var pe=Object.defineProperty;var Ne=(e,r,o)=>r in e?pe(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o;var re=(e,r,o)=>Ne(e,typeof r!="symbol"?r+"":r,o);import{j as s,_ as ne,$ as ge,u as xe,c as ie,e as ye,b as je,k as ve,l as Ee,Y as Pe,Z as De,P as Se}from"./index-cycpxOLf.js";import{b as a,R as Fe,e as ke}from"./react-vendor-CH-h0uFD.js";import{S as Ie}from"./StarRating-BU65rjwo.js";const A={SNAP_COLLAPSED:.3,SNAP_HALF:.5,SNAP_EXPANDED:.75,SNAP_FULL_DETAILS:.9,DRAG_HANDLE_HEIGHT_PX:60,SHOW_QUICK_INFO_THRESHOLD:.5,SHOW_FULL_DETAILS_THRESHOLD:.85,VELOCITY_THRESHOLD_PX_S:800},oe={WITH_SELECTED_SHOP:[A.SNAP_COLLAPSED,A.SNAP_HALF,A.SNAP_FULL_DETAILS],WITHOUT_SELECTED_SHOP:[A.SNAP_COLLAPSED,A.SNAP_HALF,A.SNAP_EXPANDED]},H={CARD_WIDTH_PERCENT:80,CARD_GAP_PERCENT:10,CENTER_CARD_SCALE:1.05,SIDE_CARD_SCALE:.9,SIDE_CARD_OPACITY:.7,SIDE_CARD_BRIGHTNESS:.85,CENTER_CARD_SHADOW:"0 12px 48px rgba(0, 0, 0, 0.25)",SIDE_CARD_SHADOW:"0 4px 12px rgba(0, 0, 0, 0.1)",CENTER_CARD_Z_INDEX:10,SIDE_CARD_Z_INDEX:1},K={SPRING_EASING:"cubic-bezier(0.34, 1.56, 0.64, 1)",SLOW_MS:400,TRANSFORM_TRANSITION:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",CARD_TRANSITION:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), filter 0.3s cubic-bezier(0.4, 0, 0.2, 1)"};function we(e){return e?oe.WITH_SELECTED_SHOP:oe.WITHOUT_SELECTED_SHOP}function Ce(e,r,o){const t=[...o].sort((i,n)=>i-n);return Math.abs(r)>A.VELOCITY_THRESHOLD_PX_S?r>0?t.find(n=>n>e)??t[t.length-1]:[...t].reverse().find(n=>n<e)??t[0]:t.reduce((i,n)=>Math.abs(n-e)<Math.abs(i-e)?n:i)}const q={HORIZONTAL_ANGLE_DEG:30,VERTICAL_ANGLE_DEG:60,FLICK_VELOCITY_THRESHOLD:800,MAX_OVERSCROLL_PERCENT:25,RUBBER_BAND_TENSION:.55},_e={SPRING_SNAP:{mass:1}},Z={MIN_SWIPE_VELOCITY:200,SNAP_ANIMATION_DURATION_MS:300,get ITEM_WIDTH_PERCENT(){return H.CARD_WIDTH_PERCENT},get GAP_PERCENT(){return H.CARD_GAP_PERCENT}},te=()=>typeof window<"u"&&"vibrate"in navigator,Me=()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches,Ue={selection:[5],light:[10],medium:[25],heavy:[50],success:[10,30,10,30,20],error:[50,30,50],warning:[25,50,25]};let Q=!0;function z(e){if(!Q||Me()||!te())return!1;try{const r=Ue[e];return navigator.vibrate(r)}catch{return!1}}const B={selection:()=>z("selection"),light:()=>z("light"),medium:()=>z("medium"),heavy:()=>z("heavy"),success:()=>z("success"),error:()=>z("error"),warning:()=>z("warning"),cancel:()=>{if(!te())return!1;try{return navigator.vibrate(0)}catch{return!1}},isSupported:()=>te(),enable:()=>{Q=!0},disable:()=>{Q=!1,B.cancel()},isEnabled:()=>Q,toggle:()=>(Q=!Q,Q||B.cancel(),Q)},X={carouselSnap:()=>B.selection(),carouselEdge:()=>B.light(),sheetSnap:()=>B.medium(),photoChange:()=>B.selection(),addToTrip:()=>B.success(),removeFromTrip:()=>B.light(),longPress:()=>B.medium(),select:()=>B.selection(),buttonPress:()=>B.light()},Ae={maxSamples:10,maxSampleAge:100,minSamples:2};class Re{constructor(r={}){re(this,"samples",[]);re(this,"config");this.config={...Ae,...r}}addSample(r,o){const t=performance.now();this.samples.push({x:r,y:o,time:t}),this.pruneOldSamples(t)}pruneOldSamples(r){const o=r-this.config.maxSampleAge;for(;this.samples.length>0&&this.samples[0].time<o;)this.samples.shift();for(;this.samples.length>this.config.maxSamples;)this.samples.shift()}getVelocity(){if(this.samples.length<this.config.minSamples)return{x:0,y:0};const r=performance.now();if(this.pruneOldSamples(r),this.samples.length<this.config.minSamples)return{x:0,y:0};const o=this.samples[0],t=this.samples[this.samples.length-1],i=(t.time-o.time)/1e3;return i<=0?{x:0,y:0}:this.samples.length>=3?this.getWeightedVelocity():{x:(t.x-o.x)/i,y:(t.y-o.y)/i}}getWeightedVelocity(){let r=0,o=0,t=0;for(let i=1;i<this.samples.length;i++){const n=this.samples[i-1],c=this.samples[i],l=(c.time-n.time)/1e3;if(l>0){const m=(c.x-n.x)/l,u=(c.y-n.y)/l,y=i*i;o+=m*y,t+=u*y,r+=y}}return r===0?{x:0,y:0}:{x:o/r,y:t/r}}getDirection(){const r=this.getVelocity(),o=Math.atan2(r.y,r.x)*(180/Math.PI);return o<0?o+360:o}getSpeed(){const r=this.getVelocity();return Math.sqrt(r.x*r.x+r.y*r.y)}isHorizontal(r=30){const o=this.getDirection();return o<r||o>360-r||o>180-r&&o<180+r}isVertical(r=30){const o=this.getDirection();return o>90-r&&o<90+r||o>270-r&&o<270+r}getDisplacement(){if(this.samples.length<2)return{x:0,y:0};const r=this.samples[0],o=this.samples[this.samples.length-1];return{x:o.x-r.x,y:o.y-r.y}}isFlick(r=300){return this.getSpeed()>r}reset(){this.samples=[]}getSampleCount(){return this.samples.length}}function me(e,r,o=30,t=60){if(Math.sqrt(e*e+r*r)<10)return"undetermined";const n=Math.atan2(Math.abs(r),Math.abs(e))*(180/Math.PI);return n<o?"horizontal":n>t?"vertical":"undetermined"}function Le({initialHeight:e=A.SNAP_COLLAPSED,snapPoints:r=[...oe.WITHOUT_SELECTED_SHOP],onSnapChange:o,enabled:t=!0}){const i=a.useRef(null),[n,c]=a.useState(!1),[l,m]=a.useState(e),u=a.useRef(0),y=a.useRef(0),p=a.useRef(0),g=a.useRef(e),F=a.useRef(0),v=a.useRef(null),b=a.useRef(!1),_=a.useRef(null),U=a.useRef([]),k=a.useCallback(f=>r.reduce((D,I)=>Math.abs(I-f)<Math.abs(D-f)?I:D),[r]);return a.useEffect(()=>{!n&&e!==l&&m(e)},[e,n]),a.useEffect(()=>{if(!t)return;const f=i.current;if(!f)return;const R=j=>{const d=j.touches[0],E=f.getBoundingClientRect();d.clientY-E.top>A.DRAG_HANDLE_HEIGHT_PX||(u.current=d.clientY,y.current=d.clientX,p.current=d.clientY,g.current=l,F.current=Date.now(),b.current=!1,_.current=null,U.current=[{y:d.clientY,time:Date.now()}],c(!0))},D=j=>{if(!n)return;const d=j.touches[0],E=Date.now();p.current=d.clientY,U.current.push({y:d.clientY,time:E}),U.current.length>5&&U.current.shift();const M=d.clientX-y.current,L=u.current-p.current;if(!_.current){const w=me(M,-L,q.HORIZONTAL_ANGLE_DEG,q.VERTICAL_ANGLE_DEG);w!=="undetermined"&&(_.current=w)}if(_.current==="horizontal"){c(!1);return}const T=L/window.innerHeight,N=r[0],h=r[r.length-1],P=g.current+T;let C;if(P<N){const w=N-P;C=N-w*.3}else if(P>h){const w=P-h;C=h+w*.3}else C=P;Math.abs(L)>10&&(j.preventDefault(),b.current=!0),v.current&&cancelAnimationFrame(v.current),v.current=requestAnimationFrame(()=>{m(C)})},I=()=>{if(!n)return;let j=0;const d=U.current;if(d.length>=2){const N=d[0],h=d[d.length-1],P=N.y-h.y,C=h.time-N.time;C>0&&(j=P/C*1e3)}const E=r[0],M=r[r.length-1],L=Math.max(E,Math.min(M,l)),T=Ce(L,j,r);m(T),T!==g.current&&X.sheetSnap(),o&&T!==g.current&&o(T),c(!1),b.current=!1,_.current=null,U.current=[],v.current&&(cancelAnimationFrame(v.current),v.current=null)};return f.addEventListener("touchstart",R,{passive:!1}),f.addEventListener("touchmove",D,{passive:!1}),f.addEventListener("touchend",I),f.addEventListener("touchcancel",I),()=>{f.removeEventListener("touchstart",R),f.removeEventListener("touchmove",D),f.removeEventListener("touchend",I),f.removeEventListener("touchcancel",I),v.current&&cancelAnimationFrame(v.current)}},[t,n,l,k,o,r]),{ref:i,height:l,isDragging:n,setHeight:m,style:{height:`${l*100}vh`,transition:n?"none":`height ${K.SLOW_MS}ms ${K.SPRING_EASING}`}}}function ue(e){var t,i,n;const r=(t=e.placeDetails)==null?void 0:t.business_status;if(r==="CLOSED_PERMANENTLY")return{status:"permClosed",text:"PERMANENTLY CLOSED",color:"text-white",bgColor:"bg-red-900"};if(r==="CLOSED_TEMPORARILY")return{status:"tempClosed",text:"TEMPORARILY CLOSED",color:"text-white",bgColor:"bg-orange-700"};const o=(n=(i=e.placeDetails)==null?void 0:i.opening_hours)==null?void 0:n.open_now;return o===!0?{status:"open",text:"OPEN",color:"text-white",bgColor:"bg-green-500",pulse:!0}:o===!1?{status:"closed",text:"CLOSED",color:"text-white",bgColor:"bg-red-500"}:{status:"unknown",text:"",color:"",bgColor:""}}const Ve=({shop:e,size:r="sm",className:o=""})=>{const t=ue(e);if(t.status==="unknown")return null;const i=r==="sm"?"text-[10px] px-2 py-0.5":"text-xs px-2.5 py-1";return s.jsxDEV("span",{id:`status-badge-${e.slug||e.GoogleProfileID}`,className:`
        status-badge
        inline-flex items-center
        rounded
        font-semibold uppercase tracking-wide
        ${t.bgColor}
        ${t.color}
        ${i}
        ${o}
      `,role:"status","aria-label":`Shop is ${t.text.toLowerCase()}`,children:[t.pulse&&s.jsxDEV("span",{id:`status-dot-${e.slug||e.GoogleProfileID}`,className:"status-badge__dot w-1.5 h-1.5 bg-white rounded-full mr-1.5 animate-pulse","aria-hidden":"true"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/StatusBadge.tsx",lineNumber:125,columnNumber:9},void 0),s.jsxDEV("span",{id:`status-text-${e.slug||e.GoogleProfileID}`,children:t.text},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/StatusBadge.tsx",lineNumber:131,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/StatusBadge.tsx",lineNumber:108,columnNumber:5},void 0)};function de(e){var i;const r=(i=e.placeDetails)==null?void 0:i.reviews;if(!r||r.length===0)return null;const o=r.filter(n=>n.text&&n.text.length>=20).sort((n,c)=>(c.rating||0)-(n.rating||0));if(o.length===0)return null;const t=o[0];return{text:t.text||"",authorName:t.author_name||"Anonymous",authorPhoto:t.profile_photo_url,rating:t.rating||0}}function Te(e,r){if(e.length<=r)return e;const o=e.slice(0,r),t=o.lastIndexOf(" ");return t>r*.7?o.slice(0,t)+"...":o+"..."}function Oe(e){const r=e.trim().split(" ");return r.length===1?r[0]:`${r[0]} ${r[r.length-1].charAt(0)}.`}const He=({shop:e,maxLength:r=80,className:o=""})=>{const t=de(e);if(!t)return null;const i=Te(t.text,r),n=Oe(t.authorName);return s.jsxDEV("div",{id:`review-snippet-${e.slug||e.GoogleProfileID}`,className:`review-snippet text-xs ${o}`,role:"complementary","aria-label":"Customer review",children:s.jsxDEV("div",{className:"flex items-start gap-2",children:[s.jsxDEV("svg",{className:"w-3 h-3 text-gray-400 dark:text-gray-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsxDEV("path",{d:"M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ReviewSnippet.tsx",lineNumber:128,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ReviewSnippet.tsx",lineNumber:122,columnNumber:9},void 0),s.jsxDEV("div",{className:"flex-1 min-w-0",children:[s.jsxDEV("p",{id:`review-text-${e.slug||e.GoogleProfileID}`,className:"text-gray-600 dark:text-gray-400 italic line-clamp-2",children:i},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ReviewSnippet.tsx",lineNumber:133,columnNumber:11},void 0),s.jsxDEV("div",{id:`review-author-info-${e.slug||e.GoogleProfileID}`,className:"flex items-center gap-1.5 mt-1",children:[s.jsxDEV("span",{className:"text-gray-500 dark:text-gray-500","aria-hidden":"true",children:"â€”"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ReviewSnippet.tsx",lineNumber:139,columnNumber:13},void 0),t.authorPhoto&&s.jsxDEV("img",{src:t.authorPhoto,alt:`${t.authorName}'s profile photo`,className:"w-4 h-4 rounded-full object-cover",loading:"lazy",onError:c=>{c.target.style.display="none"}},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ReviewSnippet.tsx",lineNumber:143,columnNumber:15},void 0),s.jsxDEV("span",{id:`review-author-name-${e.slug||e.GoogleProfileID}`,className:"text-gray-500 dark:text-gray-500 font-medium",children:n},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ReviewSnippet.tsx",lineNumber:155,columnNumber:13},void 0),t.rating>0&&s.jsxDEV("span",{id:`review-rating-${e.slug||e.GoogleProfileID}`,className:"text-yellow-500 flex items-center",children:[s.jsxDEV("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:s.jsxDEV("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ReviewSnippet.tsx",lineNumber:163,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ReviewSnippet.tsx",lineNumber:162,columnNumber:17},void 0),s.jsxDEV("span",{id:`review-rating-value-${e.slug||e.GoogleProfileID}`,className:"text-[10px] ml-0.5",children:t.rating},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ReviewSnippet.tsx",lineNumber:165,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ReviewSnippet.tsx",lineNumber:161,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ReviewSnippet.tsx",lineNumber:138,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ReviewSnippet.tsx",lineNumber:132,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ReviewSnippet.tsx",lineNumber:120,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ReviewSnippet.tsx",lineNumber:114,columnNumber:5},void 0)};function fe(e,r=5){const o=ne(e.type),t=ge(e.type),i=[];if(Object.entries(o).forEach(([m,u])=>{var p;(e[m]===!0||((p=e.products)==null?void 0:p[m])===!0)&&i.push({key:m,name:u.name,icon:u.icon_available,category:u.category})}),i.length===0)return[];const n={};i.forEach(m=>{n[m.category]||(n[m.category]=[]),n[m.category].push(m)});const c=[],l=t.filter(m=>{var u;return((u=n[m])==null?void 0:u.length)>0});for(const m of l){if(c.length>=r)break;const u=n[m];u.length>0&&c.push(u[0])}if(c.length<r)for(const m of l){if(c.length>=r)break;const u=n[m];for(let y=1;y<u.length&&c.length<r;y++)c.push(u[y])}return c}function he(e){const r=ne(e.type);let o=0;return Object.keys(r).forEach(t=>{var n;(e[t]===!0||((n=e.products)==null?void 0:n[t])===!0)&&o++}),o}const $e=({shop:e,maxProducts:r=5,iconSize:o=24,className:t=""})=>{const i=a.useMemo(()=>fe(e,r),[e,r]),n=a.useMemo(()=>he(e),[e]);if(i.length===0)return null;const c=n-i.length;return s.jsxDEV("div",{id:`product-preview-${e.slug||e.GoogleProfileID}`,className:`product-preview flex items-center gap-1.5 ${t}`,role:"list","aria-label":"Available products",children:[i.map((l,m)=>s.jsxDEV("div",{className:"product-preview__icon flex-shrink-0 rounded overflow-hidden bg-gray-100 dark:bg-gray-700",style:{width:o,height:o,animationDelay:`${m*50}ms`},role:"listitem",title:l.name,children:s.jsxDEV("img",{src:`/images/icons/${l.icon}`,alt:l.name,width:o,height:o,className:"w-full h-full object-cover",loading:"lazy",onError:u=>{u.target.style.display="none"}},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductPreview.tsx",lineNumber:169,columnNumber:11},void 0)},l.key,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductPreview.tsx",lineNumber:158,columnNumber:9},void 0)),c>0&&s.jsxDEV("span",{className:"product-preview__more text-[11px] text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded-full whitespace-nowrap","aria-label":`${c} more products available`,children:["+",c]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductPreview.tsx",lineNumber:186,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ProductPreview.tsx",lineNumber:151,columnNumber:5},void 0)};function We(e,r=5){var P,C,w,x,S;const o=e.placeDetails,t=e.slug||e.GoogleProfileID||`shop-${(P=e.Name)==null?void 0:P.toLowerCase().replace(/\W/g,"-")}`,i=ue(e),n=i.status==="open",c=i.status==="closed"||i.status==="permClosed"||i.status==="tempClosed",l=(o==null?void 0:o.rating)||0,m=(o==null?void 0:o.user_ratings_total)||0,u=l>0&&m>0,y=(o==null?void 0:o.photos)||[],p=y.length,g=p>0,F=g?y[0].photo_reference:null,v=fe(e,r),b=he(e),_=b>0,U=((C=e.Phone)==null?void 0:C.trim())||null,k=((w=e.Website)==null?void 0:w.trim())||null,f=!!U,R=!!k,D=e.lat??null,I=e.lng??null,j=D!==null&&I!==null,d=((x=e.City)==null?void 0:x.trim())||"",E=((S=e.Address)==null?void 0:S.trim())||"",M=[E,d,e.State,e.Zip].filter(Boolean).join(", "),L="distanceText"in e?e.distanceText:void 0,T="distance"in e?e.distance:void 0,N=(o==null?void 0:o.url)||null,h=de(e);return{id:t,name:e.Name||"Unknown Shop",slug:e.slug||t,type:e.type,city:d,address:E,fullAddress:M,distance:L,distanceMeters:T,status:i,isOpen:n,isClosed:c,rating:l,ratingCount:m,hasRating:u,featuredReview:h,photos:y,photoCount:p,hasPhotos:g,primaryPhotoRef:F,previewProducts:v,totalProducts:b,hasProducts:_,phone:U,website:k,hasPhone:f,hasWebsite:R,lat:D,lng:I,hasLocation:j,googleMapsUrl:N,shop:e}}function Be(e){return{farm_stand:"Farm Stand",cheese_shop:"Cheese Shop",fish_monger:"Fish Market",butcher:"Butcher",antique_shop:"Antiques",brewery:"Brewery",winery:"Winery",sugar_shack:"Sugar Shack"}[e]||"Shop"}function Qe(e){const r={farm_stand:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-400",gradient:"from-green-400 to-emerald-600"},cheese_shop:{bg:"bg-amber-100 dark:bg-amber-900/30",text:"text-amber-700 dark:text-amber-400",gradient:"from-amber-400 to-yellow-600"},fish_monger:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-400",gradient:"from-blue-400 to-cyan-600"},butcher:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-400",gradient:"from-red-400 to-rose-600"},antique_shop:{bg:"bg-stone-100 dark:bg-stone-900/30",text:"text-stone-700 dark:text-stone-400",gradient:"from-amber-700 to-stone-600"},brewery:{bg:"bg-amber-100 dark:bg-amber-900/30",text:"text-amber-700 dark:text-amber-400",gradient:"from-amber-500 to-orange-700"},winery:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-700 dark:text-purple-400",gradient:"from-purple-400 to-rose-600"},sugar_shack:{bg:"bg-amber-100 dark:bg-amber-900/30",text:"text-amber-700 dark:text-amber-400",gradient:"from-amber-600 to-amber-800"}};return r[e]||r.farm_stand}function Ge(e,r=400){return`/api/photo?photo_reference=${encodeURIComponent(e)}&maxwidth=${r}`}function ce(e){return{farm_stand:"from-green-400 to-emerald-600",cheese_shop:"from-amber-400 to-yellow-600",fish_monger:"from-blue-400 to-cyan-600",butcher:"from-red-400 to-rose-600",antique_shop:"from-amber-700 to-stone-600",brewery:"from-amber-500 to-orange-700",winery:"from-purple-400 to-rose-600",sugar_shack:"from-amber-600 to-amber-800"}[e]||"from-gray-400 to-gray-600"}function ze(e){return{farm_stand:"ðŸŒ½",cheese_shop:"ðŸ§€",fish_monger:"ðŸŸ",butcher:"ðŸ¥©",antique_shop:"ðŸº",brewery:"ðŸº",winery:"ðŸ·",sugar_shack:"ðŸ"}[e]||"ðŸ“"}const qe=({shop:e,height:r=160,maxPhotos:o=5,photoSize:t=400,className:i="",onPhotoChange:n,priority:c=!1})=>{var T;const[l,m]=a.useState(0),[u,y]=a.useState(!1),[p,g]=a.useState(0),[F,v]=a.useState(new Set([0])),b=a.useRef(null),_=a.useRef(0),U=a.useRef(0),k=a.useRef(0),f=a.useRef(0),R=a.useRef(0),D=a.useMemo(()=>{var h;return(((h=e.placeDetails)==null?void 0:h.photos)||[]).slice(0,o)},[(T=e.placeDetails)==null?void 0:T.photos,o]),I=D.length>0,j=D.length;a.useEffect(()=>{if(!I)return;const N=new Set(F);N.add(l),l>0&&N.add(l-1),l<j-1&&N.add(l+1),N.size!==F.size&&v(N)},[l,I,j,F]);const d=a.useCallback(N=>{if(!I||j<=1)return;N.stopPropagation();const h=N.touches[0];_.current=h.clientX,U.current=p,f.current=h.clientX,R.current=Date.now(),k.current=0,y(!0)},[I,j,p]),E=a.useCallback(N=>{var $;if(!u||!I)return;N.stopPropagation();const h=N.touches[0],P=Date.now(),C=h.clientX-_.current,w=P-R.current;w>0&&(k.current=(h.clientX-f.current)/w*1e3),f.current=h.clientX,R.current=P;const x=(($=b.current)==null?void 0:$.offsetWidth)||0,S=0,V=-x*(j-1);let O=U.current+C;if(O>S){const W=O-S;O=S+W*.3}else if(O<V){const W=V-O;O=V-W*.3}g(O)},[u,I,j]),M=a.useCallback(N=>{var x;if(!u||!I)return;N.stopPropagation(),y(!1);const h=((x=b.current)==null?void 0:x.offsetWidth)||0;if(h===0)return;const P=k.current,C=Z.MIN_SWIPE_VELOCITY;let w=l;if(Math.abs(P)>C)P>0&&l>0?w=l-1:P<0&&l<j-1&&(w=l+1);else{const S=-p/h;w=Math.round(S),w=Math.max(0,Math.min(j-1,w))}m(w),g(-w*h),n&&w!==l&&n(w)},[u,I,l,j,p,n]);a.useEffect(()=>{const N=()=>{var P;const h=((P=b.current)==null?void 0:P.offsetWidth)||0;g(-l*h)};return N(),window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[l]);const L=a.useCallback(N=>{var P;if(N<0||N>=j)return;const h=((P=b.current)==null?void 0:P.offsetWidth)||0;m(N),g(-N*h),n&&N!==l&&n(N)},[j,l,n]);if(!I){const N=ce(e.type),h=ze(e.type);return s.jsxDEV("div",{id:`shop-photo-carousel-placeholder-${e.slug||e.GoogleProfileID}`,className:`shop-photo-carousel relative overflow-hidden rounded-t-xl ${i}`,style:{height:r},role:"img","aria-label":`${e.Name} placeholder`,children:s.jsxDEV("div",{className:`w-full h-full bg-gradient-to-br ${N} flex items-center justify-center`,children:s.jsxDEV("span",{className:"text-4xl opacity-80","aria-hidden":"true",children:h},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ShopPhotoCarousel.tsx",lineNumber:259,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ShopPhotoCarousel.tsx",lineNumber:256,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ShopPhotoCarousel.tsx",lineNumber:249,columnNumber:7},void 0)}return s.jsxDEV("div",{id:`shop-photo-carousel-${e.slug||e.GoogleProfileID}`,ref:b,className:`shop-photo-carousel relative overflow-hidden rounded-t-xl ${i}`,style:{height:r},onTouchStart:d,onTouchMove:E,onTouchEnd:M,onTouchCancel:M,role:"region","aria-roledescription":"carousel","aria-label":`${e.Name} photos`,children:[s.jsxDEV("div",{className:"flex h-full",style:{transform:`translateX(${p}px)`,transition:u?"none":K.TRANSFORM_TRANSITION},children:D.map((N,h)=>{const P=F.has(h),C=P?Ge(N.photo_reference,t):"";return s.jsxDEV("div",{className:"flex-shrink-0 w-full h-full bg-gray-200 dark:bg-gray-700",role:"group","aria-roledescription":"slide","aria-label":`Photo ${h+1} of ${j}`,children:P?s.jsxDEV("img",{src:C,alt:`Photo ${h+1} of ${e.Name}`,className:"w-full h-full object-cover",loading:h===0?"eager":"lazy",fetchPriority:c&&h===0?"high":void 0,onError:w=>{var S;const x=w.target;x.style.display="none",(S=x.parentElement)==null||S.classList.add("bg-gradient-to-br",...ce(e.type).split(" "))}},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ShopPhotoCarousel.tsx",lineNumber:302,columnNumber:17},void 0):s.jsxDEV("div",{className:"w-full h-full animate-pulse bg-gray-300 dark:bg-gray-600"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ShopPhotoCarousel.tsx",lineNumber:319,columnNumber:17},void 0)},N.photo_reference,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ShopPhotoCarousel.tsx",lineNumber:294,columnNumber:13},void 0)})},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ShopPhotoCarousel.tsx",lineNumber:282,columnNumber:7},void 0),j>1&&s.jsxDEV("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1.5 z-10",role:"tablist","aria-label":"Photo navigation",children:D.map((N,h)=>s.jsxDEV("button",{onClick:P=>{P.stopPropagation(),L(h)},className:`
                w-2 h-2 rounded-full transition-all duration-200
                ${h===l?"bg-white w-4":"bg-white/50 hover:bg-white/75"}
              `,role:"tab","aria-selected":h===l,"aria-label":`Go to photo ${h+1}`,tabIndex:h===l?0:-1},h,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ShopPhotoCarousel.tsx",lineNumber:334,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ShopPhotoCarousel.tsx",lineNumber:328,columnNumber:9},void 0),j>1&&s.jsxDEV("div",{className:"absolute top-2 right-2 z-10",children:s.jsxDEV("span",{className:"text-[10px] text-white bg-black/50 px-1.5 py-0.5 rounded backdrop-blur-sm",children:[l+1,"/",j]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ShopPhotoCarousel.tsx",lineNumber:359,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ShopPhotoCarousel.tsx",lineNumber:358,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/ShopPhotoCarousel.tsx",lineNumber:268,columnNumber:5},void 0)},Xe=({shop:e,onDirectionsClick:r,onCallClick:o,onWebsiteClick:t,onShareClick:i,size:n="sm",className:c=""})=>{const l=!!(e.Phone&&e.Phone.trim()),m=!!(e.Website&&e.Website.trim()),u=!!(e.lat&&e.lng),y=typeof navigator.share=="function",p=a.useCallback(()=>{if(X.buttonPress(),r)r();else if(u){const f=`https://www.google.com/maps/dir/?api=1&destination=${e.lat},${e.lng}`;window.open(f,"_blank","noopener,noreferrer")}},[r,u,e.lat,e.lng]),g=a.useCallback(()=>{X.buttonPress(),o?o():l&&(window.location.href=`tel:${e.Phone}`)},[o,l,e.Phone]),F=a.useCallback(()=>{if(X.buttonPress(),t)t();else if(m){const f=e.Website.startsWith("http")?e.Website:`https://${e.Website}`;window.open(f,"_blank","noopener,noreferrer")}},[t,m,e.Website]),v=a.useCallback(async()=>{if(X.buttonPress(),i)i();else if(y)try{await navigator.share({title:e.Name,text:`Check out ${e.Name}`,url:window.location.href})}catch{}},[i,y,e.Name]),_=[{id:"directions",label:"Directions",icon:s.jsxDEV("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/QuickActionBar.tsx",lineNumber:123,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/QuickActionBar.tsx",lineNumber:122,columnNumber:9},void 0),available:u,onClick:p,color:"text-blue-600 dark:text-blue-400"},{id:"call",label:"Call",icon:s.jsxDEV("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/QuickActionBar.tsx",lineNumber:135,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/QuickActionBar.tsx",lineNumber:134,columnNumber:9},void 0),available:l,onClick:g,color:"text-green-600 dark:text-green-400"},{id:"website",label:"Website",icon:s.jsxDEV("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/QuickActionBar.tsx",lineNumber:147,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/QuickActionBar.tsx",lineNumber:146,columnNumber:9},void 0),available:m,onClick:F,color:"text-purple-600 dark:text-purple-400"},{id:"share",label:"Share",icon:s.jsxDEV("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/QuickActionBar.tsx",lineNumber:159,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/QuickActionBar.tsx",lineNumber:158,columnNumber:9},void 0),available:y,onClick:v,color:"text-gray-600 dark:text-gray-400"}].filter(f=>f.id==="directions"||f.available),U=n==="sm"?"py-1.5 px-2 text-xs gap-1":"py-2 px-3 text-sm gap-1.5",k=n==="sm"?"w-4 h-4":"w-5 h-5";return s.jsxDEV("div",{id:`quick-action-bar-${e.slug||e.GoogleProfileID}`,className:`quick-action-bar flex items-center justify-around gap-1 ${c}`,role:"toolbar","aria-label":"Shop actions",children:_.map(f=>s.jsxDEV("button",{id:`action-${f.id}-${e.slug||e.GoogleProfileID}`,onClick:R=>{R.stopPropagation(),f.onClick()},disabled:!f.available,className:`
            quick-action-bar__button
            flex items-center justify-center
            ${U}
            rounded-lg
            bg-gray-100 dark:bg-gray-700
            hover:bg-gray-200 dark:hover:bg-gray-600
            active:bg-gray-300 dark:active:bg-gray-500
            active:scale-95
            transition-all duration-150
            min-w-[44px] min-h-[44px]
            ${f.available?f.color:"text-gray-400 dark:text-gray-500"}
            ${f.available?"cursor-pointer":"opacity-50 cursor-not-allowed"}
          `,"aria-label":f.label,title:f.available?f.label:`${f.label} not available`,children:[s.jsxDEV("span",{className:k,"aria-hidden":"true",children:f.icon},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/QuickActionBar.tsx",lineNumber:212,columnNumber:11},void 0),s.jsxDEV("span",{className:"font-medium",children:f.label},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/QuickActionBar.tsx",lineNumber:215,columnNumber:11},void 0)]},f.id,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/QuickActionBar.tsx",lineNumber:187,columnNumber:9},void 0))},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/UI/QuickActionBar.tsx",lineNumber:180,columnNumber:5},void 0)},Ye=({shop:e,tier:r="compact",onTap:o,onDirections:t,className:i="",isCenterCard:n=!1})=>{const c=a.useMemo(()=>We(e),[e]),l=a.useMemo(()=>Qe(c.type),[c.type]),m=a.useMemo(()=>Be(c.type),[c.type]),u=a.useCallback(p=>{const g=p.target;g.closest("button")||g.closest("a")||o==null||o()},[o]),y=r==="minimal"?100:r==="compact"?140:160;return s.jsxDEV("article",{id:`shop-card-mobile-${e.slug||e.GoogleProfileID}`,className:`
        shop-card-mobile
        bg-white dark:bg-gray-800
        rounded-xl
        shadow-lg
        overflow-hidden
        transition-shadow duration-200
        ${n?"ring-2 ring-blue-500 dark:ring-blue-400":""}
        ${i}
      `,onClick:u,role:"article","aria-label":`${c.name} - ${m}`,children:[s.jsxDEV("div",{className:"relative",children:[s.jsxDEV(qe,{shop:e,height:y,maxPhotos:5,photoSize:400,priority:n},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:104,columnNumber:9},void 0),s.jsxDEV("div",{className:"absolute top-2 left-2 flex flex-col gap-1.5 z-10",children:[s.jsxDEV("span",{id:`shop-mobile-type-badge-${e.slug||e.GoogleProfileID}`,className:`
              text-[10px] font-semibold px-2 py-0.5 rounded
              ${l.bg} ${l.text}
              backdrop-blur-sm
            `,children:m},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:115,columnNumber:11},void 0),s.jsxDEV(Ve,{shop:e,size:"sm"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:127,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:113,columnNumber:9},void 0),c.distance&&s.jsxDEV("div",{className:"absolute top-2 right-2 z-10",children:s.jsxDEV("span",{id:`shop-mobile-distance-${e.slug||e.GoogleProfileID}`,className:"text-[10px] text-white bg-black/60 px-2 py-0.5 rounded backdrop-blur-sm font-medium",children:c.distance},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:133,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:132,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:103,columnNumber:7},void 0),s.jsxDEV("div",{className:"p-3",children:[s.jsxDEV("div",{className:"flex items-start justify-between gap-2 mb-1.5",children:[s.jsxDEV("h3",{id:`shop-mobile-name-${e.slug||e.GoogleProfileID}`,className:"text-sm font-semibold text-gray-900 dark:text-white line-clamp-1 flex-1",children:c.name},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:144,columnNumber:11},void 0),r!=="minimal"&&c.hasRating&&s.jsxDEV("div",{id:`shop-mobile-rating-${e.slug||e.GoogleProfileID}`,className:"flex items-center gap-0.5 flex-shrink-0",children:[s.jsxDEV("svg",{className:"w-3.5 h-3.5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsxDEV("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:152,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:151,columnNumber:15},void 0),s.jsxDEV("span",{id:`shop-mobile-rating-value-${e.slug||e.GoogleProfileID}`,className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:c.rating.toFixed(1)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:154,columnNumber:15},void 0),s.jsxDEV("span",{id:`shop-mobile-rating-count-${e.slug||e.GoogleProfileID}`,className:"text-[10px] text-gray-500 dark:text-gray-400",children:["(",c.ratingCount,")"]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:157,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:150,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:143,columnNumber:9},void 0),r!=="minimal"&&s.jsxDEV("p",{id:`shop-mobile-location-${e.slug||e.GoogleProfileID}`,className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-1 mb-2",children:c.city||c.address},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:166,columnNumber:11},void 0),r!=="minimal"&&c.hasProducts&&s.jsxDEV("div",{className:"mb-2",children:s.jsxDEV($e,{shop:e,maxProducts:r==="expanded"?5:4,iconSize:r==="expanded"?28:24},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:174,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:173,columnNumber:11},void 0),r==="expanded"&&c.featuredReview&&s.jsxDEV("div",{className:"mb-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:s.jsxDEV(He,{shop:e,maxLength:r==="expanded"?80:60},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:185,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:184,columnNumber:11},void 0),r==="expanded"&&s.jsxDEV("div",{className:"pt-2 border-t border-gray-100 dark:border-gray-700",children:s.jsxDEV(Xe,{shop:e,size:"sm",onDirectionsClick:t},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:195,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:194,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:141,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/ShopCardMobile.tsx",lineNumber:86,columnNumber:5},void 0)},Ze=Fe.memo(Ye);function Ke(e,r,o,t,i=1/60){const{mass:n}=t,l=-450*(e-o),m=-35*r,y=(l+m)/n,p=r+y*i;return{position:e+p*i,velocity:p}}function Je(e,r,o,t=.1,i=.1){return Math.abs(e-o)<t&&Math.abs(r)<i}function er(e,r,o,t,i,n){let c=e,l=o,m=null,u=performance.now(),y=!1;const p=g=>{if(y)return;const F=Math.min((g-u)/1e3,1/30);u=g;const v=Ke(c,l,r,t,F);if(c=v.position,l=v.velocity,i(c),Je(c,l,r)){i(r),n==null||n();return}m=requestAnimationFrame(p)};return m=requestAnimationFrame(p),{cancel:()=>{y=!0,m!==null&&(cancelAnimationFrame(m),m=null)}}}function le(e,r,o=.55){if(e<=0)return 0;const t=1-1/(e/r*o+1);return r*t}function rr(e,r,o,t,i=.55){if(e<r){const n=r-e;return r-le(n,t,i)}if(e>o){const n=e-o;return o+le(n,t,i)}return e}function se(e,r,o){return Math.min(Math.max(e,r),o)}function sr({itemCount:e,itemWidth:r=Z.ITEM_WIDTH_PERCENT,gapWidth:o=Z.GAP_PERCENT,initialIndex:t=0,onIndexChange:i,onSwipeStart:n,onSwipeEnd:c,enabled:l=!0}){const m=a.useRef(null),[u,y]=a.useState(t),[p,g]=a.useState(!1),[F,v]=a.useState(!1),b=a.useRef(0),_=a.useRef(0),U=a.useRef(0),k=a.useRef(new Re),f=a.useRef(null),R=a.useRef(null),D=a.useRef(null),I=a.useRef(!1),j=r+o,d=0,E=Math.max(0,(e-1)*j),M=(100-r)/2,L=a.useCallback(x=>{!D.current&&m.current&&(D.current=m.current.querySelector("[data-carousel-track]"),D.current||(D.current=m.current.firstElementChild)),D.current&&(D.current.style.transform=`translateX(calc(${M}% - ${x}%))`)},[M]),T=a.useCallback((x,S=0,V=!0)=>{var J;(J=R.current)==null||J.cancel();const O=x*j,$=se(O,d,E),W=Math.round($/j);if(!D.current&&m.current&&(D.current=m.current.querySelector("[data-carousel-track]"),D.current||(D.current=m.current.firstElementChild)),!V){b.current=$,L($),y(W),i&&i(W);return}I.current=!0,v(!0);const G=u;R.current=er(b.current,$,-S*.01,_e.SPRING_SNAP,ee=>{b.current=ee,L(ee)},()=>{I.current=!1,v(!1),b.current=$,R.current=null,y(W),W!==G&&i&&(i(W),X.carouselSnap())})},[j,d,E,u,i,L]),N=a.useCallback((x,S=!0)=>{const V=se(x,0,e-1);T(V,0,S)},[e,T]),h=a.useCallback(x=>{var V;if(!l||e<=1)return;const S=x.touches[0];_.current=S.clientX,U.current=b.current,f.current=null,k.current.reset(),k.current.addSample(S.clientX,S.clientY),(V=R.current)==null||V.cancel(),R.current=null,g(!0),n==null||n()},[l,e,n]),P=a.useCallback(x=>{var $,W;if(!p||!l)return;const S=x.touches[0],V=S.clientX-_.current,O=S.clientY-((W=($=k.current.samples)==null?void 0:$[0])==null?void 0:W.y);if(k.current.addSample(S.clientX,S.clientY),!f.current){const G=me(V,O,q.HORIZONTAL_ANGLE_DEG,q.VERTICAL_ANGLE_DEG);G!=="undetermined"&&(f.current=G)}if(f.current!=="vertical"&&f.current==="horizontal"){x.preventDefault();const G=m.current;if(!G)return;const J=G.offsetWidth,ee=V/J*100,Y=U.current-ee,be=q.MAX_OVERSCROLL_PERCENT,ae=rr(Y,d,E,be,q.RUBBER_BAND_TENSION);b.current=ae,L(ae),(Y<d||Y>E)&&(Math.abs(Y-d)<5||Math.abs(Y-E)<5)&&X.carouselEdge()}},[p,l,d,E,L]),C=a.useCallback(()=>{if(!p)return;g(!1),c==null||c();const x=k.current.getVelocity(),S=b.current;let V;if(Math.abs(x.x)>q.FLICK_VELOCITY_THRESHOLD){const O=x.x>0?-1:1;V=u+O}else if(Math.abs(x.x)>Z.MIN_SWIPE_VELOCITY){const O=S/j,$=x.x>0?-.3:.3;V=Math.round(O+$)}else V=Math.round(S/j);V=se(V,0,e-1),T(V,x.x,!0)},[p,c,u,j,e,T]);a.useEffect(()=>{const x=m.current;if(!(!x||!l))return D.current=x.querySelector("[data-carousel-track]"),D.current||(D.current=x.firstElementChild),L(u*j),b.current=u*j,x.addEventListener("touchstart",h,{passive:!0}),x.addEventListener("touchmove",P,{passive:!1}),x.addEventListener("touchend",C),x.addEventListener("touchcancel",C),()=>{var S;x.removeEventListener("touchstart",h),x.removeEventListener("touchmove",P),x.removeEventListener("touchend",C),x.removeEventListener("touchcancel",C),(S=R.current)==null||S.cancel()}},[l,h,P,C,u,j,L]),a.useEffect(()=>{if(!p&&!I.current&&t!==u){!D.current&&m.current&&(D.current=m.current.querySelector("[data-carousel-track]"),D.current||(D.current=m.current.firstElementChild));const x=t*j;b.current=x,L(x),y(t)}},[t]);const w={display:"flex",transform:`translateX(calc(${M}% - ${u*j}%))`,transition:p?"none":`transform ${Z.SNAP_ANIMATION_DURATION_MS}ms cubic-bezier(0.34, 1.56, 0.64, 1)`,touchAction:"pan-y",willChange:p?"transform":"auto"};return{containerRef:m,offset:b.current,currentIndex:u,isDragging:p,isAnimating:F,goToIndex:N,style:w}}function or(e){return e<=A.SNAP_COLLAPSED?"minimal":e<=A.SNAP_HALF?"compact":"expanded"}const tr=()=>{const{currentlyDisplayedLocations:e}=xe(),{selectedShop:r,setSelectedShop:o,setBottomSheetHeight:t,setIsManuallyCollapsed:i,setPreviewShop:n,bottomSheetHeight:c}=ie(),l=a.useMemo(()=>or(c),[c]),{activeLocationTypes:m,activeProductFilters:u}=ye(),{lastPlaceSelectedByAutocomplete:y,currentRadius:p}=je(),g=ke(),F=a.useCallback(()=>{if(!r)return 0;const d=e.findIndex(E=>E.slug===r.slug||E.GoogleProfileID===r.GoogleProfileID);return d!==-1?d:0},[r,e]),{containerRef:v,currentIndex:b,isDragging:_,isAnimating:U,goToIndex:k,style:f}=sr({itemCount:e.length,itemWidth:H.CARD_WIDTH_PERCENT,gapWidth:H.CARD_GAP_PERCENT,initialIndex:F(),onIndexChange:d=>{e[d]&&n(e[d])},enabled:e.length>1});a.useEffect(()=>{if(!r||U)return;const d=e.findIndex(E=>E.slug===r.slug||E.GoogleProfileID===r.GoogleProfileID);d!==-1&&d!==b&&k(d,!0)},[r,e,b,k,U]);const R=a.useCallback(d=>{var C;if(_)return;const E=e[d];o(E),n(null),t(A.SNAP_FULL_DETAILS),i(!1);const M=E.slug||E.GoogleProfileID||`shop-${(C=E.Name)==null?void 0:C.replace(/\W/g,"-").toLowerCase()}`,L=ve(E.type),h=Ee({locationTypes:m,productFilters:u,searchLocation:y,searchRadius:p}).toString(),P=h?`${L}/${M}?${h}`:`${L}/${M}`;g(P)},[e,o,n,t,i,m,u,y,p,g,_]),D=a.useCallback(d=>{d.stopPropagation(),b>0&&k(b-1,!0)},[b,k]),I=a.useCallback(d=>{d.stopPropagation(),b<e.length-1&&k(b+1,!0)},[b,e.length,k]),j=a.useCallback(d=>{d.key==="ArrowLeft"&&b>0?(d.preventDefault(),k(b-1,!0)):d.key==="ArrowRight"&&b<e.length-1&&(d.preventDefault(),k(b+1,!0))},[b,e.length,k]);return s.jsxDEV("div",{id:"horizontal-carousel",ref:v,className:`relative h-full overflow-visible carousel-container ${_?"is-swiping":""}`,onKeyDown:j,tabIndex:0,role:"region","aria-roledescription":"carousel","aria-labelledby":"carousel-heading",children:[s.jsxDEV("h2",{id:"carousel-heading",className:"sr-only",children:"Shop listings"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:174,columnNumber:7},void 0),b>0&&s.jsxDEV("button",{id:"carousel-prev-button",onClick:D,className:`absolute left-3 top-1/2 -translate-y-1/2 z-20
                     bg-white/95 dark:bg-gray-800/95 rounded-full
                     p-3 min-w-[48px] min-h-[48px]
                     shadow-lg border border-gray-200 dark:border-gray-600
                     hover:bg-white dark:hover:bg-gray-700
                     active:scale-90 active:bg-gray-100 dark:active:bg-gray-600
                     transition-all duration-150`,"aria-label":"Previous location",children:s.jsxDEV("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:190,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:189,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:177,columnNumber:9},void 0),b<e.length-1&&s.jsxDEV("button",{id:"carousel-next-button",onClick:I,className:`absolute right-3 top-1/2 -translate-y-1/2 z-20
                     bg-white/95 dark:bg-gray-800/95 rounded-full
                     p-3 min-w-[48px] min-h-[48px]
                     shadow-lg border border-gray-200 dark:border-gray-600
                     hover:bg-white dark:hover:bg-gray-700
                     active:scale-90 active:bg-gray-100 dark:active:bg-gray-600
                     transition-all duration-150`,"aria-label":"Next location",children:s.jsxDEV("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:210,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:209,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:197,columnNumber:9},void 0),e.length>1&&s.jsxDEV("div",{id:"carousel-position-indicator",className:"absolute bottom-2 left-1/2 -translate-x-1/2 z-20",children:s.jsxDEV("span",{id:"carousel-position-text",className:`text-xs text-gray-500 dark:text-gray-400
                       bg-white/80 dark:bg-gray-800/80
                       px-2.5 py-1 rounded-full
                       backdrop-blur-sm shadow-sm`,"aria-live":"polite","aria-atomic":"true",children:[b+1," / ",e.length]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:218,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:217,columnNumber:9},void 0),s.jsxDEV("div",{"data-carousel-track":!0,className:"flex h-full items-center pb-4 overflow-visible",style:{...f,transition:_?"none":K.TRANSFORM_TRANSITION,userSelect:"none",WebkitUserSelect:"none"},"aria-live":"polite",children:e.map((d,E)=>{const M=E===b;return s.jsxDEV("div",{className:"flex-shrink-0 relative mobile-carousel-item",style:{flex:`0 0 ${H.CARD_WIDTH_PERCENT}%`,marginRight:`${H.CARD_GAP_PERCENT}%`,transform:M?`scale(${H.CENTER_CARD_SCALE})`:`scale(${H.SIDE_CARD_SCALE})`,zIndex:M?H.CENTER_CARD_Z_INDEX:H.SIDE_CARD_Z_INDEX,boxShadow:M?H.CENTER_CARD_SHADOW:H.SIDE_CARD_SHADOW,opacity:M?1:H.SIDE_CARD_OPACITY,filter:M?"none":`brightness(${H.SIDE_CARD_BRIGHTNESS})`,transition:K.CARD_TRANSITION,pointerEvents:_?"none":"auto"},onClick:()=>R(E),role:"group","aria-roledescription":"slide","aria-label":`${E+1} of ${e.length}: ${d.Name}`,"aria-current":M?"true":void 0,children:s.jsxDEV(Ze,{shop:d,tier:l,isCenterCard:M,onTap:()=>R(E)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:275,columnNumber:15},void 0)},d.slug||d.GoogleProfileID||d.Name,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:249,columnNumber:13},void 0)})},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:233,columnNumber:7},void 0),e.length===0&&s.jsxDEV("div",{id:"carousel-empty-state",className:"flex items-center justify-center w-full h-full px-6 text-center",children:s.jsxDEV("div",{children:[s.jsxDEV("p",{id:"carousel-empty-title",className:"text-gray-500 dark:text-gray-400 text-sm",children:"No locations found"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:290,columnNumber:13},void 0),s.jsxDEV("p",{id:"carousel-empty-subtitle",className:"text-gray-400 dark:text-gray-500 text-xs mt-1",children:"Try adjusting your search or filters"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:293,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:289,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:288,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/HorizontalCarousel.tsx",lineNumber:163,columnNumber:5},void 0)},nr=({shop:e,showFullDetails:r=!1})=>{var u,y,p,g,F;const{setBottomSheetHeight:o,setIsManuallyCollapsed:t}=ie(),[i,n]=a.useState(new Set(["products"])),c=()=>{t(!0),o(.3)},l=()=>{var _,U;if(!((U=(_=e.placeDetails)==null?void 0:_.opening_hours)!=null&&U.weekday_text))return"Hours not available";const v=new Date().getDay(),b=v===0?6:v-1;return e.placeDetails.opening_hours.weekday_text[b]||"Hours not available"},m={emoji:De(e.type),label:Pe(e.type)};return s.jsxDEV("div",{id:"quick-shop-info",className:"px-4 pb-4 pt-2",children:[s.jsxDEV("div",{className:"flex justify-end mb-2",children:s.jsxDEV("button",{id:"quick-shop-close",onClick:c,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Close shop details",children:s.jsxDEV("svg",{className:"w-6 h-6 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:63,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:62,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:56,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:55,columnNumber:7},void 0),s.jsxDEV("div",{className:"mb-3",children:[s.jsxDEV("div",{className:"flex items-start justify-between gap-2 mb-1",children:[s.jsxDEV("h3",{id:"quick-shop-name",className:"text-lg font-semibold text-gray-900 dark:text-gray-100 line-clamp-2 flex-1",children:((u=e.placeDetails)==null?void 0:u.name)||e.Name},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:71,columnNumber:11},void 0),s.jsxDEV("span",{id:"quick-shop-type-badge",className:"text-xs px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 whitespace-nowrap flex-shrink-0",children:[m.emoji," ",m.label]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:74,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:70,columnNumber:9},void 0),((y=e.placeDetails)==null?void 0:y.rating)&&s.jsxDEV(Ie,{ratingValue:e.placeDetails.rating,reviewCount:e.placeDetails.user_ratings_total,starSizeClass:"w-4 h-4"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:81,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:69,columnNumber:7},void 0),s.jsxDEV("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxDEV("div",{id:"quick-shop-hours-section",className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[s.jsxDEV("h4",{id:"quick-shop-hours-label",className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Hours Today"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:93,columnNumber:11},void 0),s.jsxDEV("p",{id:"quick-shop-hours-value",className:"text-sm text-gray-900 dark:text-gray-100 line-clamp-2",children:l()},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:96,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:92,columnNumber:9},void 0),s.jsxDEV("div",{id:"quick-shop-distance-section",className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[s.jsxDEV("h4",{id:"quick-shop-distance-label",className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Distance"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:103,columnNumber:11},void 0),s.jsxDEV("p",{id:"quick-shop-distance-value",className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.distanceText&&e.distanceText!=="N/A"&&e.distanceText!=="Set location"?e.distanceText:"Set location"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:106,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:102,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:90,columnNumber:7},void 0),((p=e.placeDetails)==null?void 0:p.formatted_address)&&s.jsxDEV("div",{id:"quick-shop-address-section",className:"mb-4",children:[s.jsxDEV("h4",{id:"quick-shop-address-label",className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Address"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:117,columnNumber:11},void 0),s.jsxDEV("p",{id:"quick-shop-address-value",className:"text-sm text-gray-700 dark:text-gray-300",children:e.placeDetails.formatted_address},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:120,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:116,columnNumber:9},void 0),(e.Phone||e.Website)&&s.jsxDEV("div",{className:"mb-4 flex gap-3",children:[e.Phone&&s.jsxDEV("a",{id:"quick-shop-call-btn",href:`tel:${e.Phone}`,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2.5 px-4 rounded-lg font-medium text-sm transition-colors duration-200 flex items-center justify-center gap-2",children:[s.jsxDEV("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:136,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:135,columnNumber:15},void 0),"Call"]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:130,columnNumber:13},void 0),e.Website&&s.jsxDEV("a",{id:"quick-shop-website-btn",href:e.Website,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-100 py-2.5 px-4 rounded-lg font-medium text-sm transition-colors duration-200 flex items-center justify-center gap-2",children:[s.jsxDEV("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:150,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:149,columnNumber:15},void 0),"Website"]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:142,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:128,columnNumber:9},void 0),r&&s.jsxDEV("div",{className:"space-y-3 mt-4",children:[s.jsxDEV("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[s.jsxDEV("button",{onClick:()=>{const v=new Set(i);v.has("products")?v.delete("products"):v.add("products"),n(v)},className:"w-full flex items-center justify-between px-4 py-3 bg-gradient-to-r from-[#426976] to-[#5a8694] text-white hover:opacity-90 transition-opacity",children:[s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:177,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:176,columnNumber:17},void 0),s.jsxDEV("span",{className:"font-medium",children:"Products"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:179,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:175,columnNumber:15},void 0),s.jsxDEV("svg",{className:`w-5 h-5 transition-transform ${i.has("products")?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:187,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:181,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:163,columnNumber:13},void 0),i.has("products")&&s.jsxDEV("div",{className:"bg-white dark:bg-gray-900 p-4",children:s.jsxDEV(Se,{shop:e,products:ne(e.type)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:192,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:191,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:162,columnNumber:11},void 0),((F=(g=e.placeDetails)==null?void 0:g.opening_hours)==null?void 0:F.weekday_text)&&s.jsxDEV("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[s.jsxDEV("button",{onClick:()=>{const v=new Set(i);v.has("hours")?v.delete("hours"):v.add("hours"),n(v)},className:"w-full flex items-center justify-between px-4 py-3 bg-gradient-to-r from-[#426976] to-[#5a8694] text-white hover:opacity-90 transition-opacity",children:[s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:214,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:213,columnNumber:19},void 0),s.jsxDEV("span",{className:"font-medium",children:"Hours"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:216,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:212,columnNumber:17},void 0),s.jsxDEV("svg",{className:`w-5 h-5 transition-transform ${i.has("hours")?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:224,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:218,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:200,columnNumber:15},void 0),i.has("hours")&&s.jsxDEV("div",{className:"bg-gradient-to-br from-slate-50 to-gray-50 dark:from-slate-900 dark:to-gray-900 p-4",children:s.jsxDEV("div",{className:"space-y-2",children:e.placeDetails.opening_hours.weekday_text.map((v,b)=>s.jsxDEV("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:v},b,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:231,columnNumber:23},void 0))},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:229,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:228,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:199,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:160,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/QuickShopInfo.tsx",lineNumber:53,columnNumber:5},void 0)},mr=()=>{const{bottomSheetHeight:e,setBottomSheetHeight:r,selectedShop:o,isManuallyCollapsed:t,setIsManuallyCollapsed:i}=ie(),n=a.useCallback(g=>{g===A.SNAP_COLLAPSED&&o?i(!0):g>A.SNAP_COLLAPSED&&i(!1),r(g)},[r,o,i]);a.useEffect(()=>{o&&e<A.SNAP_HALF&&!t&&r(A.SNAP_FULL_DETAILS)},[o,e,t,r]);const c=we(!!o),{ref:l,isDragging:m,style:u}=Le({initialHeight:e,snapPoints:[...c],onSnapChange:n,enabled:!0}),y=a.useCallback(g=>{if(g.key==="Enter"||g.key===" ")if(g.preventDefault(),e<=A.SNAP_COLLAPSED){const F=o?A.SNAP_FULL_DETAILS:A.SNAP_HALF;n(F)}else n(A.SNAP_COLLAPSED);else if(g.key==="ArrowUp"){g.preventDefault();const F=c.indexOf(e);F<c.length-1&&n(c[F+1])}else if(g.key==="ArrowDown"){g.preventDefault();const F=c.indexOf(e);F>0&&n(c[F-1])}},[e,o,c,n]),p=e>A.SNAP_COLLAPSED;return s.jsxDEV("div",{ref:l,id:"mobileBottomSheet",role:"region","aria-label":"Shop listings panel",className:`
        fixed bottom-0 left-0 right-0
        bg-white dark:bg-gray-800
        rounded-t-2xl
        shadow-[0_-4px_20px_rgba(0,0,0,0.15)]
        z-40
        overflow-visible
        ${m?"is-dragging":""}
      `,style:{...u,willChange:m?"height":"auto"},children:[s.jsxDEV("div",{className:"flex justify-center items-center min-h-[44px] cursor-pointer",role:"button",tabIndex:0,"aria-label":p?"Press Enter to collapse panel, or use arrow keys to resize":"Press Enter to expand panel, or use arrow keys to resize","aria-expanded":p,"aria-controls":"mobileBottomSheet",onKeyDown:y,children:s.jsxDEV("div",{id:"bottom-sheet-drag-handle",className:"drag-handle w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full pointer-events-none"},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/MobileBottomSheet.tsx",lineNumber:121,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/MobileBottomSheet.tsx",lineNumber:112,columnNumber:7},void 0),s.jsxDEV("div",{className:"h-full overflow-x-visible overflow-y-hidden",children:e>=A.SHOW_QUICK_INFO_THRESHOLD&&o?s.jsxDEV("div",{className:"h-full overflow-y-auto custom-scrollbar",children:s.jsxDEV(nr,{shop:o,showFullDetails:e>=A.SHOW_FULL_DETAILS_THRESHOLD},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/MobileBottomSheet.tsx",lineNumber:132,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/MobileBottomSheet.tsx",lineNumber:131,columnNumber:11},void 0):s.jsxDEV(tr,{},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/MobileBottomSheet.tsx",lineNumber:136,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/MobileBottomSheet.tsx",lineNumber:128,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/chris.majorossy/Projects/FarrmFinder/phreshfoods.com/src/components/Mobile/MobileBottomSheet.tsx",lineNumber:91,columnNumber:5},void 0)};export{mr as default};
