<!DOCTYPE html>
<html>
<head>
    <title>Console Test</title>
</head>
<body>
    <h1>Checking Console Errors...</h1>
    <iframe id="app" src="http://localhost:5173" style="width: 100%; height: 600px; border: 1px solid #ccc;"></iframe>
    <div id="errors" style="background: #fee; padding: 10px; margin: 10px 0;">
        <h3>Console Errors:</h3>
        <pre id="error-log"></pre>
    </div>
    <script>
        const errorLog = document.getElementById('error-log');
        const originalError = console.error;
        const errors = [];

        // Capture console errors
        console.error = function(...args) {
            errors.push(args.join(' '));
            errorLog.textContent = errors.join('\n');
            originalError.apply(console, args);
        };

        // Listen for iframe errors
        window.addEventListener('message', (e) => {
            if (e.data.type === 'error') {
                errors.push(e.data.message);
                errorLog.textContent = errors.join('\n');
            }
        });

        // Check iframe after load
        const iframe = document.getElementById('app');
        iframe.onload = () => {
            console.log('Iframe loaded');
            try {
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                const rootEl = iframeDoc.getElementById('root');
                if (rootEl && rootEl.innerHTML.includes('Loading phind.us')) {
                    errors.push('React app not mounted - still showing loading screen');
                    errorLog.textContent = errors.join('\n');
                }
            } catch(e) {
                console.log('Cannot access iframe content (CORS)');
            }
        };
    </script>
</body>
</html>