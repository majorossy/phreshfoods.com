body {
    font-family: 'Inter', sans-serif;
    overscroll-behavior: none; 
    height: 100vh; /* Ensure body takes full viewport height */
    margin: 0; /* Remove default body margin */
    display: flex; /* Make body a flex container */
    flex-direction: column; /* Stack children vertically */
}

#app-container {
    display: flex;
    flex-direction: column;
    flex-grow: 1; /* Allow app-container to grow and fill body */
    overflow: hidden; /* Prevent app-container itself from scrolling */
}

.custom-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}
.custom-scrollbar::-webkit-scrollbar-track {
    background: #c9bcae;
    border-radius: 10px;
}
.custom-scrollbar::-webkit-scrollbar-thumb {
    background: #a0aec0; /* gray-400 */
    border-radius: 10px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #718096; /* gray-500 */
}

main {
    flex-grow: 1; 
    overflow: hidden; 
    position: relative; 
    display: flex; 
}

#mapPanel {
    height: 100%; /* Takes full height of main if other elements don't push it */
    width: 100%; /* Takes full width of main if other elements don't push it */
    position: absolute; /* Covers the entire main area initially */
    top: 0;
    left: 0;
    /* flex-grow: 1; /* This is not needed if absolute positioned */
}
#map {
    height: 100%;
    width: 100%;
}

#listingsPanel {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    z-index: 10; 
    width: 42%; /* Default width, can be overridden by Tailwind in HTML */
    overflow-y: auto; 
    background: transparent;
    flex-shrink: 0; 
}
@media (max-width: 767px) { /* On smaller screens, listings panel might be hidden or full width */
    #listingsPanel {
        width: 100%; /* Example: Full width on mobile if it's not an overlay */
        /* Or display: none; if it's meant to be hidden and map takes full space */
    }
}


/* --- Overlay Styling --- */
.detail-pop-overlay {
    position: absolute;
    inset: 0; 
    background-color: rgba(249, 250, 251, 0.97); 
    backdrop-filter: blur(4px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease-in-out, visibility 0s linear 0.3s, transform 0.3s ease-in-out;
    z-index: 50;
    display: flex; 
    flex-direction: column; 
    /* padding: 1rem; -- Padding is now handled by inner wrappers for flex full height */
}

@media (min-width: 768px) { 
    .detail-pop-overlay {
        top: 0; 
        bottom: 0; 
        width: 30%; 
        inset-inline-start: auto; 
        inset-inline-end: auto;  
    }
}

.detail-pop-overlay.is-open {
    opacity: 1;
    visibility: visible;
    transform: translateX(0);
    transition-delay: 0s;
    z-index: 50; 
}

#detailsOverlayShop { 
    right: 0; 
    transform: translateX(100%);
}
#detailsOverlayShop.is-open { transform: translateX(0%); }
@media (min-width: 768px) { #detailsOverlayShop { width: 42%; left: auto; } }

#detailsOverlaySocial { 
    left: 0; 
    transform: translateX(-100%);
}
#detailsOverlaySocial.is-open { transform: translateX(0%); }
@media (min-width: 768px) { #detailsOverlaySocial { width: 30%; right: auto; } }

.overlay-close-button {
    position: absolute; 
    top: 0.75rem; 
    right: 0.75rem; 
    color: #4B5563; 
    z-index: 60; 
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.25rem; 
}
.overlay-close-button:hover { color: #1F2937; }
@media (min-width: 640px) { .overlay-close-button { top: 1rem; right: 1rem; } }


/* --- Overlay Content Structure for Full Height Tabs (Social Overlay) --- */

/* Direct child of #detailsOverlaySocial holding tab navigation */
#detailsOverlaySocial > div:nth-child(2) { /* The div wrapping <nav id="socialOverlayTabs"> */
    padding: 1rem 1rem 0 1rem; /* Padding for the top area with close button & tabs */
    flex-shrink: 0; /* Prevent tab navigation area from shrinking */
}

/* Direct child of #detailsOverlaySocial holding ALL tab content panels */
#detailsOverlaySocial > div:nth-child(3) {
    flex-grow: 1; /* Allow this container of tab panels to grow */
    overflow: hidden; /* This container itself should not scroll; individual panels will */
    padding: 0 1rem 1rem 1rem; /* Padding for the content area below tabs */
    display: flex; 
    flex-direction: column; 
}

/* Individual tab content panels */
.social-tab-content {
    /* Default state for hidden panels, active panel will override if needed */
}

/* Active tab panel general structure (if not already handled by Tailwind's 'hidden' toggle) */
.social-tab-content:not(.hidden) {
    display: flex; /* Make active panel a flex container */
    flex-direction: column; /* Stack its children (heading, content) vertically */
    height: 100%; /* Take full height of its parent (the growing tab content area) */
}

/* Specific panel styling for full height scrolling content */
#social-reviews-panel:not(.hidden), 
#social-photos-panel:not(.hidden),
#social-facebook-panel:not(.hidden), /* Apply if FB should be full height scroll */
#social-instagram-panel:not(.hidden), /* Apply if IG should be full height scroll */
#social-twitter-panel:not(.hidden) { /* Apply if TW should be full height scroll */
    /* These are already flex containers due to .social-tab-content:not(.hidden) */
}

#social-reviews-panel > h3, 
#social-photos-panel > h3 { /* Headings within these panels */
    flex-shrink: 0; 
}

#socialOverlayReviewsContainer, 
#socialOverlayGooglePhotosContainer,
#socialLinksContainer, /* If FB content needs to scroll within its panel */
#instagramFeedContainer, /* If IG content needs to scroll */
#twitterTimelineContainer { /* If TW content needs to scroll */
    flex-grow: 1; 
    overflow-y: auto; 
    /* custom-scrollbar class is applied in HTML */
}
/* If socialLinksContainer etc. are direct children of the .social-feed-content which is inside the tab panel,
   then .social-feed-content might need to be the flex-grow item.
   The HTML structure given previously was:
   <div id="social-facebook-panel" class="social-tab-content ...">
     <div id="socialLinksContainer" class="social-feed-content ...">
   In this case, #socialLinksContainer needs flex-grow, and #social-facebook-panel needs to be display:flex, flex-direction:column.
   The .social-tab-content:not(.hidden) rule already handles this.
*/


/* --- Shop Details Overlay Content Structure --- */
#detailsOverlayShop > #shopDetailsContent { /* This is the main scrollable content wrapper */
    flex-grow: 1;
    overflow-y: auto;
    padding: 1rem; 
    padding-top: 3rem; /* Ample space for close button positioned absolutely over this */
}
#detailsOverlayShop #shopDetailName,
#detailsOverlayShop #shopDetailsContent > h3 { /* Headings for CSV photos */
    flex-shrink: 0; /* Prevent headings from shrinking if content below is very large */
}
#detailsOverlayShop #shopImageGallery, /* CSV Photo gallery */
#detailsOverlayShop #directionsControlSection { /* Directions buttons */
    flex-shrink: 0; /* Prevent these sections from shrinking */
}
#detailsOverlayShop #directionsPanel {
    /* max-height: 200px; -- This can be removed if we want it to take natural height or be part of overall scroll */
    /* If it should also grow/scroll within its own fixed area, it needs more specific flex rules */
}


/* --- Social Overlay Tab Button Styling --- */
.social-tab-button {
    border-color: transparent;
    color: #6b7280; 
    transition: color 0.15s ease-in-out, border-color 0.15s ease-in-out;
}
.social-tab-button:hover {
    color: #374151; 
    border-color: #d1d5db; 
}
.social-tab-button.active-social-tab {
    color: #2563eb; 
    border-color: #2563eb; 
    font-weight: 600; 
}

/* --- Social Media Embed Specific Styling --- */
.social-feed-content { /* General container for embeds if used */
    /* border: 1px solid #e5e7eb; -- Already in Tailwind if needed */
    /* overflow: hidden; -- Tailwind class */
}

#socialLinksContainer .fb-page,
#socialLinksContainer .fb-page iframe,
#socialLinksContainer .fb-page span {
    width: 100% !important;
    max-width: 100%;
    height: auto; 
    min-height: 1px; 
    display: block; 
}
#socialLinksContainer .fb-page iframe {
    min-height: 400px !important; /* Or whatever desired height */
    height: auto !important; 
    border: none !important; 
}
#twitterTimelineContainer iframe {
    width: 100% !important;
    max-width: 100%;
    min-height: 400px; /* Or desired height */
    border-radius: 0; 
    border: none !important; 
}
.instagram-embed-wrapper iframe,
.instagram-embed-wrapper .instagram-media {
    margin-left: auto !important;
    margin-right: auto !important;
    max-width: 100% !important; 
    width: calc(100% - 1rem) !important; /* If parent has p-4 like #instagramFeedContainer */
    min-width: 280px !important; 
    box-shadow: none !important; 
    border-radius: 0.375rem; 
}

/* Google Maps InfoWindow close button hiding */
.gm-style-iw-c button.gm-ui-hover-effect { display: none !important; }

/* --- Image Gallery Styling (Shared by CSV and Google Photos) --- */
#shopImageGallery,
#socialOverlayGooglePhotosContainer { 
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 0.5rem;
    padding-bottom: 0.5rem; /* For scroll spacing if many images */
}

#shopImageGallery .gallery-image-container,
#socialOverlayGooglePhotosContainer .gallery-image-container {
    box-sizing: border-box;
    display: flex; 
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background-color: #f3f4f6; 
    border-radius: 0.375rem; 
    overflow: hidden; 
    aspect-ratio: 3 / 2;
}

#shopImageGallery .gallery-image,
#socialOverlayGooglePhotosContainer .gallery-image {
    width: 100%;
    height: 100%;
    object-fit: cover; 
    display: block; 
}

#shopImageGallery .gallery-image-container .text-xs,
#socialOverlayGooglePhotosContainer .gallery-image-container .text-xs {
    padding: 0.5rem;
    width: 100%; 
    text-align: center;
}

/* Placeholder text that spans the full gallery grid */
#shopImageGallery > .col-span-full,
#socialOverlayGooglePhotosContainer > .col-span-full {
    grid-column: 1 / -1; 
    text-align: center;
}


/* Review card line clamp */
.line-clamp-3 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;
}
.hover\:line-clamp-none:hover {
  -webkit-line-clamp: unset;
}

/* --- Directions Styling (in detailsOverlayShop) --- */
#directionsControlSection button { /* Tailwind handles styling */ }
#directionsPanel {
    background-color: #f9fafb; 
    padding: 0.5rem;
    border-radius: 0.25rem; 
    border: 1px solid #e5e7eb; 
    margin-top: 0.5rem;
}
#directionsPanel .adp-summary { 
    font-weight: bold;
    margin-bottom: 0.5rem;
}
#directionsPanel .adp-step { padding: 0.25rem 0; }

/* Range Slider Thumb Styling */
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none; appearance: none; width: 16px; height: 16px;
  background: #c53030; cursor: pointer; border-radius: 50%; margin-top: -6px; 
}
input[type="range"]::-moz-range-thumb {
  width: 16px; height: 16px; background: #c53030; cursor: pointer;
  border-radius: 50%; border: none;
}
input[type="range"]::-ms-thumb {
  width: 16px; height: 16px; background: #c53030; cursor: pointer;
  border-radius: 50%; border: 0;
}
input[type="range"]::-webkit-slider-runnable-track {
  height: 4px; cursor: pointer; background: #cbd5e0; border-radius: 2px;
}
input[type="range"]::-moz-range-track {
  height: 4px; cursor: pointer; background: #cbd5e0; border-radius: 2px;
}
input[type="range"]::-ms-track {
  height: 4px; cursor: pointer; background: transparent;
  border-color: transparent; color: transparent;
}
input[type="range"]::-ms-fill-lower { background: #cbd5e0; border-radius: 2px; }
input[type="range"]::-ms-fill-upper { background: #cbd5e0; border-radius: 2px; }